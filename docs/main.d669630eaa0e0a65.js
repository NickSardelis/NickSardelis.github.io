"use strict";(self.webpackChunkTo_Do_List=self.webpackChunkTo_Do_List||[]).push([[179],{2011:(ut,Te,L)=>{L.d(Te,{Dh:()=>he,GT:()=>de,cc:()=>Ne,hO:()=>Ve,on:()=>$,pX:()=>re,xv:()=>fe});var m=L(4650),ee=L(127),k=L(5813);ut=L.hmd(ut);const se=["ngOnDestroy"],re=(pe,Je,st,xe={})=>new Proxy(pe,{get:(ve,Ce)=>st.runOutsideAngular(()=>{var Be;if(pe[Ce])return!(null===(Be=xe?.spy)||void 0===Be)&&Be.get&&xe.spy.get(Ce,pe[Ce]),pe[Ce];if(se.indexOf(Ce)>-1)return()=>{};const He=Je.toPromise().then(j=>{const me=j&&j[Ce];return"function"==typeof me?me.bind(j):me&&me.then?me.then(K=>st.run(()=>K)):st.run(()=>me)});return new Proxy(()=>{},{get:(j,me)=>He[me],apply:(j,me,K)=>He.then(X=>{var ie;const ne=X&&X(...K);return!(null===(ie=xe?.spy)||void 0===ie)&&ie.apply&&xe.spy.apply(Ce,K,ne),ne})})})}),de=(pe,Je)=>{Je.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(xe=>{Object.defineProperty(pe.prototype,xe,Object.getOwnPropertyDescriptor(st.prototype||st,xe))})})};class le{constructor(Je){return Je}}const he=new m.OlP("angularfire2.app.options"),fe=new m.OlP("angularfire2.app.name");function $(pe,Je,st){const ve="object"==typeof st&&st||{};ve.name=ve.name||"string"==typeof st&&st||"[DEFAULT]";const Be=ee.Z.apps.filter(He=>He&&He.name===ve.name)[0]||Je.runOutsideAngular(()=>ee.Z.initializeApp(pe,ve));try{JSON.stringify(pe)!==JSON.stringify(Be.options)&&G("error",`${Be.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Be)}const G=(pe,...Je)=>{(0,m.X6Q)()&&typeof console<"u"&&console[pe](...Je)},Y={provide:le,useFactory:$,deps:[he,m.R0b,[new m.FiY,fe]]};let Ve=(()=>{class pe{constructor(st){ee.Z.registerVersion("angularfire",k.q4.full,"core"),ee.Z.registerVersion("angularfire",k.q4.full,"app-compat"),ee.Z.registerVersion("angular",m.q4F.full,st.toString())}static initializeApp(st,xe){return{ngModule:pe,providers:[{provide:he,useValue:st},{provide:fe,useValue:xe}]}}}return pe.\u0275fac=function(st){return new(st||pe)(m.LFG(m.Lbi))},pe.\u0275mod=m.oAB({type:pe}),pe.\u0275inj=m.cJS({providers:[Y]}),pe})();function Ne(pe,Je,st,xe,ve){const[,Ce,Be]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===pe)||[];if(Ce)return function Ie(pe,Je){try{return pe.toString()===Je.toString()}catch{return pe===Je}}(ve,Be)||(ye("error",`${Je} was already initialized on the ${st} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:ve,was:Be})),Ce;{const He=xe();return globalThis.\u0275AngularfireInstanceCache.push([pe,He,ve]),He}}const tt=!!ut.hot,ye=(pe,...Je)=>{(0,m.X6Q)()&&typeof console<"u"&&console[pe](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Te,L)=>{L.d(Te,{q4:()=>$r,iC:()=>ps,HU:()=>sl,vb:()=>ri,JM:()=>$a});var m=L(4650),ee=L(5867),k=L(5861),se=L(9681),re=L(2090),de=L(4859),le=L(1877),he=L(8766);const fe="@firebase/installations",$="0.5.15",Y=`w:${$}`,Ve="FIS_v2",Je=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(b){return b instanceof re.ZR&&b.code.includes("request-failed")}function xe({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function ve(b){return{token:b.token,requestStatus:2,expiresIn:X(b.expiresIn),creationTime:Date.now()}}function Ce(b,T){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*(b,T){const U=(yield T.json()).error;return Je.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function He({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function j(b,{refreshToken:T}){const M=He(b);return M.append("Authorization",function ie(b){return`${Ve} ${b}`}(T)),M}function me(b){return K.apply(this,arguments)}function K(){return(K=(0,k.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function X(b){return Number(b.replace("s","000"))}function ne(b,T){return ke.apply(this,arguments)}function ke(){return(ke=(0,k.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:M}){const U=xe(b),Q=He(b),ae=T.getImmediate({optional:!0});if(ae){const vt=yield ae.getHeartbeatsHeader();vt&&Q.append("x-firebase-client",vt)}const je={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:Ve,appId:b.appId,sdkVersion:Y})},dt=yield me(()=>fetch(U,je));if(dt.ok){const vt=yield dt.json();return{fid:vt.fid||M,registrationStatus:2,refreshToken:vt.refreshToken,authToken:ve(vt.authToken)}}throw yield Ce("Create Installation",dt)})).apply(this,arguments)}function Pe(b){return new Promise(T=>{setTimeout(T,b)})}const Xt=/^[cdef][\w-]{21}$/;function Ke(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function un(b){return function ft(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Xt.test(M)?M:""}catch{return""}}function wn(b){return`${b.appName}!${b.appId}`}const Yt=new Map;function en(b,T){const M=wn(b);ln(M,T),function ns(b,T){const M=function Vr(){return!xi&&"BroadcastChannel"in self&&(xi=new BroadcastChannel("[Firebase] FID Change"),xi.onmessage=b=>{ln(b.data.key,b.data.fid)}),xi}();M&&M.postMessage({key:b,fid:T}),function Ur(){0===Yt.size&&xi&&(xi.close(),xi=null)}()}(M,T)}function ln(b,T){const M=Yt.get(b);if(M)for(const U of M)U(T)}let xi=null;const Yr="firebase-installations-store";let di=null;function Po(){return di||(di=(0,he.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Yr)}})),di}function Ze(b,T){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,k.Z)(function*(b,T){const M=wn(b),Q=(yield Po()).transaction(Yr,"readwrite"),ae=Q.objectStore(Yr),De=yield ae.get(M);return yield ae.put(T,M),yield Q.done,(!De||De.fid!==T.fid)&&en(b,T.fid),T})).apply(this,arguments)}function xs(b){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,k.Z)(function*(b){const T=wn(b),U=(yield Po()).transaction(Yr,"readwrite");yield U.objectStore(Yr).delete(T),yield U.done})).apply(this,arguments)}function hi(b,T){return ji.apply(this,arguments)}function ji(){return(ji=(0,k.Z)(function*(b,T){const M=wn(b),Q=(yield Po()).transaction(Yr,"readwrite"),ae=Q.objectStore(Yr),De=yield ae.get(M),je=T(De);return void 0===je?yield ae.delete(M):yield ae.put(je,M),yield Q.done,je&&(!De||De.fid!==je.fid)&&en(b,je.fid),je})).apply(this,arguments)}function xn(b){return qn.apply(this,arguments)}function qn(){return(qn=(0,k.Z)(function*(b){let T;const M=yield hi(b.appConfig,U=>{const Q=gn(U),ae=mt(b,Q);return T=ae.registrationPromise,ae.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function gn(b){return Tt(b||{fid:Ke(),registrationStatus:0})}function mt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Je.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function ot(b,T){return an.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:dr(b)}:{installationEntry:T}}function an(){return(an=(0,k.Z)(function*(b,T){try{const M=yield ne(b,T);return Ze(b.appConfig,M)}catch(M){throw st(M)&&409===M.customData.serverCode?yield xs(b.appConfig):yield Ze(b.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function dr(b){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,k.Z)(function*(b){let T=yield Qr(b.appConfig);for(;1===T.registrationStatus;)yield Pe(100),T=yield Qr(b.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield xn(b);return U||M}return T})).apply(this,arguments)}function Qr(b){return hi(b,T=>{if(!T)throw Je.create("installation-not-found");return Tt(T)})}function Tt(b){return function rs(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function tn(b,T){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,k.Z)(function*({appConfig:b,heartbeatServiceProvider:T},M){const U=rn(b,M),Q=j(b,M),ae=T.getImmediate({optional:!0});if(ae){const vt=yield ae.getHeartbeatsHeader();vt&&Q.append("x-firebase-client",vt)}const je={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:Y,appId:b.appId}})},dt=yield me(()=>fetch(U,je));if(dt.ok)return ve(yield dt.json());throw yield Ce("Generate Auth Token",dt)})).apply(this,arguments)}function rn(b,{fid:T}){return`${xe(b)}/${T}/authTokens:generate`}function er(b){return Br.apply(this,arguments)}function Br(){return(Br=(0,k.Z)(function*(b,T=!1){let M;const U=yield hi(b.appConfig,ae=>{if(!kt(ae))throw Je.create("not-registered");const De=ae.authToken;if(!T&&W(De))return ae;if(1===De.requestStatus)return M=et(b,T),ae;{if(!navigator.onLine)throw Je.create("app-offline");const je=Z(ae);return M=Ct(b,je),je}});return M?yield M:U.authToken})).apply(this,arguments)}function et(b,T){return Se.apply(this,arguments)}function Se(){return(Se=(0,k.Z)(function*(b,T){let M=yield Xe(b.appConfig);for(;1===M.authToken.requestStatus;)yield Pe(100),M=yield Xe(b.appConfig);const U=M.authToken;return 0===U.requestStatus?er(b,T):U})).apply(this,arguments)}function Xe(b){return hi(b,T=>{if(!kt(T))throw Je.create("not-registered");return function Ee(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ct(b,T){return It.apply(this,arguments)}function It(){return(It=(0,k.Z)(function*(b,T){try{const M=yield tn(b,T),U=Object.assign(Object.assign({},T),{authToken:M});return yield Ze(b.appConfig,U),M}catch(M){if(!st(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Ze(b.appConfig,U)}else yield xs(b.appConfig);throw M}})).apply(this,arguments)}function kt(b){return void 0!==b&&2===b.registrationStatus}function W(b){return 2===b.requestStatus&&!function B(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function Z(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function Ge(){return(Ge=(0,k.Z)(function*(b){const T=b,{installationEntry:M,registrationPromise:U}=yield xn(T);return U?U.catch(console.error):er(T).catch(console.error),M.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,k.Z)(function*(b,T=!1){const M=b;return yield fn(M),(yield er(M,T)).token})).apply(this,arguments)}function fn(b){return zt.apply(this,arguments)}function zt(){return(zt=(0,k.Z)(function*(b){const{registrationPromise:T}=yield xn(b);T&&(yield T)})).apply(this,arguments)}function Ms(b){return Je.create("missing-app-config-values",{valueName:b})}const ko="installations",bn=b=>{const T=b.getProvider("app").getImmediate(),M=function En(b){if(!b||!b.options)throw Ms("App Configuration");if(!b.name)throw Ms("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!b.options[M])throw Ms(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},no=b=>{const T=b.getProvider("app").getImmediate(),M=(0,se._getProvider)(T,ko).getImmediate();return{getId:()=>function J(b){return Ge.apply(this,arguments)}(M),getToken:Q=>function ct(b){return Qt.apply(this,arguments)}(M,Q)}};(function Cu(){(0,se._registerComponent)(new de.wA(ko,bn,"PUBLIC")),(0,se._registerComponent)(new de.wA("installations-internal",no,"PRIVATE"))})(),(0,se.registerVersion)(fe,$),(0,se.registerVersion)(fe,$,"esm2017");const Hi="@firebase/remote-config",Zn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Af{constructor(T,M,U,Q){this.client=T,this.storage=M,this.storageCache=U,this.logger=Q}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Q=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var M=this;return(0,k.Z)(function*(){const[U,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Q;T.eTag=Q&&Q.eTag;const ae=yield M.client.fetch(T),De=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&De.push(M.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(De),ae})()}}function Kl(b=navigator){return b.languages&&b.languages[0]||b.language}class Zl{constructor(T,M,U,Q,ae,De){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=U,this.projectId=Q,this.apiKey=ae,this.appId=De}fetch(T){var M=this;return(0,k.Z)(function*(){var U,Q,ae;const[De,je]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},pt={sdk_version:M.sdkVersion,app_instance_id:De,app_instance_id_token:je,app_id:M.appId,language_code:Kl()},Dn={method:"POST",headers:Mt,body:JSON.stringify(pt)},yr=fetch(vt,Dn),Hs=new Promise((ii,Gs)=>{T.signal.addEventListener(()=>{const Uf=new Error("The operation was aborted.");Uf.name="AbortError",Gs(Uf)})});let gs;try{yield Promise.race([yr,Hs]),gs=yield yr}catch(ii){let Gs="fetch-client-network";throw"AbortError"===(null===(U=ii)||void 0===U?void 0:U.name)&&(Gs="fetch-timeout"),Zn.create(Gs,{originalErrorMessage:null===(Q=ii)||void 0===Q?void 0:Q.message})}let $s=gs.status;const wo=gs.headers.get("ETag")||void 0;let ms,kn;if(200===gs.status){let ii;try{ii=yield gs.json()}catch(Gs){throw Zn.create("fetch-client-parse",{originalErrorMessage:null===(ae=Gs)||void 0===ae?void 0:ae.message})}ms=ii.entries,kn=ii.state}if("INSTANCE_STATE_UNSPECIFIED"===kn?$s=500:"NO_CHANGE"===kn?$s=304:("NO_TEMPLATE"===kn||"EMPTY_CONFIG"===kn)&&(ms={}),304!==$s&&200!==$s)throw Zn.create("fetch-status",{httpStatus:$s});return{status:$s,eTag:wo,config:ms}})()}}class im{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,k.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:U}){var Q=this;return(0,k.Z)(function*(){yield function nr(b,T){return new Promise((M,U)=>{const Q=Math.max(T-Date.now(),0),ae=setTimeout(M,Q);b.addEventListener(()=>{clearTimeout(ae),U(Zn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ae=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function hd(b){if(!(b instanceof re.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ae))throw ae;const De={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield Q.storage.setThrottleMetadata(De),Q.attemptFetch(T,De)}})()}}class fd{constructor(T,M,U,Q,ae){this.app=T,this._client=M,this._storageCache=U,this._storage=Q,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yl(b,T){var M;const U=b.target.error||void 0;return Zn.create(T,{originalErrorMessage:U&&(null===(M=U)||void 0===M?void 0:M.message)})}const Ps="app_namespace_store";class um{constructor(T,M,U,Q=function am(){return new Promise((b,T)=>{var M;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=Q=>{T(Yl(Q,"storage-open"))},U.onsuccess=Q=>{b(Q.target.result)},U.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(Ps,{keyPath:"compositeKey"})}}catch(U){T(Zn.create("storage-open",{originalErrorMessage:null===(M=U)||void 0===M?void 0:M.message}))}})}()){this.appId=T,this.appName=M,this.namespace=U,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,k.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Q,ae)=>{var De;const dt=U.transaction([Ps],"readonly").objectStore(Ps),vt=M.createCompositeKey(T);try{const Mt=dt.get(vt);Mt.onerror=pt=>{ae(Yl(pt,"storage-get"))},Mt.onsuccess=pt=>{const Dn=pt.target.result;Q(Dn?Dn.value:void 0)}}catch(Mt){ae(Zn.create("storage-get",{originalErrorMessage:null===(De=Mt)||void 0===De?void 0:De.message}))}})})()}set(T,M){var U=this;return(0,k.Z)(function*(){const Q=yield U.openDbPromise;return new Promise((ae,De)=>{var je;const vt=Q.transaction([Ps],"readwrite").objectStore(Ps),Mt=U.createCompositeKey(T);try{const pt=vt.put({compositeKey:Mt,value:M});pt.onerror=Dn=>{De(Yl(Dn,"storage-set"))},pt.onsuccess=()=>{ae()}}catch(pt){De(Zn.create("storage-set",{originalErrorMessage:null===(je=pt)||void 0===je?void 0:je.message}))}})})()}delete(T){var M=this;return(0,k.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Q,ae)=>{var De;const dt=U.transaction([Ps],"readwrite").objectStore(Ps),vt=M.createCompositeKey(T);try{const Mt=dt.delete(vt);Mt.onerror=pt=>{ae(Yl(pt,"storage-delete"))},Mt.onsuccess=()=>{Q()}}catch(Mt){ae(Zn.create("storage-delete",{originalErrorMessage:null===(De=Mt)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class gd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const M=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),ae=yield M;ae&&(T.lastFetchStatus=ae);const De=yield U;De&&(T.lastSuccessfulFetchTimestampMillis=De);const je=yield Q;je&&(T.activeConfig=je)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Du(){return xf.apply(this,arguments)}function xf(){return(xf=(0,k.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function ks(){(0,se._registerComponent)(new de.wA("remote-config",function b(T,{instanceIdentifier:M}){const U=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,re.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:ae,apiKey:De,appId:je}=U.options;if(!ae)throw Zn.create("registration-project-id");if(!De)throw Zn.create("registration-api-key");if(!je)throw Zn.create("registration-app-id");const dt=new um(je,U.name,M=M||"firebase"),vt=new gd(dt),Mt=new le.Yd(Hi);Mt.logLevel=le.in.ERROR;const pt=new Zl(Q,se.SDK_VERSION,M,ae,De,je),Dn=new im(pt,dt),yr=new Af(Dn,dt,vt,Mt),Hs=new fd(U,yr,vt,dt,Mt);return function fr(b){const T=(0,re.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Hs),Hs},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Hi,"0.3.14"),(0,se.registerVersion)(Hi,"0.3.14","esm2017")}();const $i="/firebase-messaging-sw.js",ss="/firebase-cloud-messaging-push-scope",os="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ca="google.c.a.c_id",Tu="google.c.a.c_l",Ql="google.c.a.ts",Mf="google.c.a.e";var as=(()=>{return(b=as||(as={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",as;var b})();function fi(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xr(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Q=new Uint8Array(U.length);for(let ae=0;ae<U.length;++ae)Q[ae]=U.charCodeAt(ae);return Q}const Lo="fcm_token_details_db",Cr="fcm_token_object_Store";function Nf(b){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,k.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(Lo))return null;let T=null;return(yield(0,he.X3)(Lo,5,{upgrade:(U=(0,k.Z)(function*(Q,ae,De,je){var dt;if(ae<2||!Q.objectStoreNames.contains(Cr))return;const vt=je.objectStore(Cr),Mt=yield vt.index("fcmSenderId").get(b);if(yield vt.clear(),Mt)if(2===ae){const pt=Mt;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;T={token:pt.fcmToken,createTime:null!==(dt=pt.createTime)&&void 0!==dt?dt:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:fi(pt.vapidKey)}}}else if(3===ae){const pt=Mt;T={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:fi(pt.auth),p256dh:fi(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:fi(pt.vapidKey)}}}else if(4===ae){const pt=Mt;T={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:fi(pt.auth),p256dh:fi(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:fi(pt.vapidKey)}}}}),function(ae,De,je,dt){return U.apply(this,arguments)})})).close(),yield(0,he.Lj)(Lo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Mn(T)?T:null;var U}),Rf.apply(this,arguments)}function Mn(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const pi="firebase-messaging-store";let Hr=null;function Au(){return Hr||(Hr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(pi)}})),Hr}function oo(b){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(b){const T=Oi(b),U=yield(yield Au()).transaction(pi).objectStore(pi).get(T);if(U)return U;{const Q=yield Nf(b.appConfig.senderId);if(Q)return yield qt(b,Q),Q}})).apply(this,arguments)}function qt(b,T){return xu.apply(this,arguments)}function xu(){return(xu=(0,k.Z)(function*(b,T){const M=Oi(b),Q=(yield Au()).transaction(pi,"readwrite");return yield Q.objectStore(pi).put(T,M),yield Q.done,T})).apply(this,arguments)}function ao(b){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,k.Z)(function*(b){const T=Oi(b),U=(yield Au()).transaction(pi,"readwrite");yield U.objectStore(pi).delete(T),yield U.done})).apply(this,arguments)}function Oi({appConfig:b}){return b.appId}const Sn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function St(b,T){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,k.Z)(function*(b,T){var M;const U=yield Xl(b),Q=Ae(T),ae={method:"POST",headers:U,body:JSON.stringify(Q)};let De;try{De=yield(yield fetch(ls(b.appConfig),ae)).json()}catch(je){throw Sn.create("token-subscribe-failed",{errorInfo:null===(M=je)||void 0===M?void 0:M.toString()})}if(De.error)throw Sn.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw Sn.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Pf(b,T){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,k.Z)(function*(b,T){var M;const U=yield Xl(b),Q=Ae(T.subscriptionOptions),ae={method:"PATCH",headers:U,body:JSON.stringify(Q)};let De;try{De=yield(yield fetch(`${ls(b.appConfig)}/${T.token}`,ae)).json()}catch(je){throw Sn.create("token-update-failed",{errorInfo:null===(M=je)||void 0===M?void 0:M.toString()})}if(De.error)throw Sn.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw Sn.create("token-update-no-token");return De.token})).apply(this,arguments)}function Pu(b,T){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,k.Z)(function*(b,T){var M;const Q={method:"DELETE",headers:yield Xl(b)};try{const De=yield(yield fetch(`${ls(b.appConfig)}/${T}`,Q)).json();if(De.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(ae){throw Sn.create("token-unsubscribe-failed",{errorInfo:null===(M=ae)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function ls({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Xl(b){return ba.apply(this,arguments)}function ba(){return(ba=(0,k.Z)(function*({appConfig:b,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ae({p256dh:b,auth:T,endpoint:M,vapidKey:U}){const Q={web:{endpoint:M,auth:T,p256dh:b}};return U!==os&&(Q.web.applicationPubKey=U),Q}const $t=6048e5;function ku(b){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,k.Z)(function*(b){const T=yield ec(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:fi(T.getKey("auth")),p256dh:fi(T.getKey("p256dh"))},U=yield oo(b.firebaseDependencies);if(U){if(vd(U.subscriptionOptions,M))return Date.now()>=U.createTime+$t?Vo(b,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Pu(b.firebaseDependencies,U.token)}catch(Q){console.warn(Q)}return Da(b.firebaseDependencies,M)}return Da(b.firebaseDependencies,M)})).apply(this,arguments)}function Nn(b){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,k.Z)(function*(b){const T=yield oo(b.firebaseDependencies);T&&(yield Pu(b.firebaseDependencies,T.token),yield ao(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Vo(b,T){return gi.apply(this,arguments)}function gi(){return(gi=(0,k.Z)(function*(b,T){try{const M=yield Pf(b.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield qt(b.firebaseDependencies,U),M}catch(M){throw yield Nn(b),M}})).apply(this,arguments)}function Da(b,T){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,k.Z)(function*(b,T){const U={token:yield St(b,T),createTime:Date.now(),subscriptionOptions:T};return yield qt(b,U),U.token})).apply(this,arguments)}function ec(b,T){return tc.apply(this,arguments)}function tc(){return(tc=(0,k.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xr(T)})})).apply(this,arguments)}function vd(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function Sa(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Rn(b,T){if(!T.notification)return;b.notification={};const M=T.notification.title;M&&(b.notification.title=M);const U=T.notification.body;U&&(b.notification.body=U);const Q=T.notification.image;Q&&(b.notification.image=Q)}(T,b),function Gi(b,T){!T.data||(b.data=T.data)}(T,b),function nc(b,T){var M,U,Q,ae,De;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;b.fcmOptions={};const je=null!==(Q=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==Q?Q:null===(ae=T.notification)||void 0===ae?void 0:ae.click_action;je&&(b.fcmOptions.link=je);const dt=null===(De=T.fcmOptions)||void 0===De?void 0:De.analytics_label;dt&&(b.fcmOptions.analyticsLabel=dt)}(T,b),T}function uo(b){return"object"==typeof b&&!!b&&Ca in b}function cs(b,T){const M=[];for(let U=0;U<b.length;U++)M.push(b.charAt(U)),U<T.length&&M.push(T.charAt(U));return M.join("")}function Aa(b){return Sn.create("missing-app-config-values",{valueName:b})}cs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cm{constructor(T,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function lm(b){if(!b||!b.options)throw Aa("App Configuration Object");if(!b.name)throw Aa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const U of T)if(!M[U])throw Aa(U);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function rc(b){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,k.Z)(function*(b){var T;try{b.swRegistration=yield navigator.serviceWorker.register($i,{scope:ss}),b.swRegistration.update().catch(()=>{})}catch(M){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=M)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function xa(b,T){return ic.apply(this,arguments)}function ic(){return(ic=(0,k.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield rc(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Ma(b,T){return sc.apply(this,arguments)}function sc(){return(sc=(0,k.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=os)})).apply(this,arguments)}function Bu(){return(Bu=(0,k.Z)(function*(b,T){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield Ma(b,T?.vapidKey),yield xa(b,T?.serviceWorkerRegistration),ku(b)})).apply(this,arguments)}function oc(b,T,M){return ac.apply(this,arguments)}function ac(){return(ac=(0,k.Z)(function*(b,T,M){const U=uc(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Ca],message_name:M[Tu],message_time:M[Ql],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function uc(b){switch(b){case as.NOTIFICATION_CLICKED:return"notification_open";case as.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function lo(){return(lo=(0,k.Z)(function*(b,T){const M=T.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===as.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Sa(M)):b.onMessageHandler.next(Sa(M)));const U=M.data;uo(U)&&"1"===U[Mf]&&(yield oc(b,M.messageType,U))})).apply(this,arguments)}const co="@firebase/messaging",rr=b=>{const T=new cm(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function wd(b,T){return lo.apply(this,arguments)}(T,M)),T},ei=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:U=>function Uu(b,T){return Bu.apply(this,arguments)}(T,U)}};function Ed(){return lc.apply(this,arguments)}function lc(){return(lc=(0,k.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function In(){(0,se._registerComponent)(new de.wA("messaging",rr,"PUBLIC")),(0,se._registerComponent)(new de.wA("messaging-internal",ei,"PRIVATE")),(0,se.registerVersion)(co,"0.9.19"),(0,se.registerVersion)(co,"0.9.19","esm2017")}();const Bo="analytics",bd="firebase_id",fo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gu="https://www.googletagmanager.com/gtag/js",On=new le.Yd("@firebase/analytics");function Wu(b){return Promise.all(b.map(T=>T.catch(M=>M)))}function zu(b,T){const M=document.createElement("script");M.src=`${Gu}?l=${b}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Ff(b,T,M,U,Q,ae){return jo.apply(this,arguments)}function jo(){return(jo=(0,k.Z)(function*(b,T,M,U,Q,ae){const De=U[Q];try{if(De)yield T[De];else{const dt=(yield Wu(M)).find(vt=>vt.measurementId===Q);dt&&(yield T[dt.appId])}}catch(je){On.error(je)}b("config",Q,ae)})).apply(this,arguments)}function Ho(b,T,M,U,Q){return po.apply(this,arguments)}function po(){return(po=(0,k.Z)(function*(b,T,M,U,Q){try{let ae=[];if(Q&&Q.send_to){let De=Q.send_to;Array.isArray(De)||(De=[De]);const je=yield Wu(M);for(const dt of De){const vt=je.find(pt=>pt.measurementId===dt),Mt=vt&&T[vt.appId];if(!Mt){ae=[];break}ae.push(Mt)}}0===ae.length&&(ae=Object.values(T)),yield Promise.all(ae),b("event",U,Q||{})}catch(ae){On.error(ae)}})).apply(this,arguments)}function Td(b){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(Gu)&&M.src.includes(b))return M;return null}const gr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Pa=new class Wi{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ad(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function ka(b){return dc.apply(this,arguments)}function dc(){return(dc=(0,k.Z)(function*(b){var T;const{appId:M,apiKey:U}=b,Q={method:"GET",headers:Ad(U)},ae=fo.replace("{app-id}",M),De=yield fetch(ae,Q);if(200!==De.status&&304!==De.status){let je="";try{const dt=yield De.json();null!==(T=dt.error)&&void 0!==T&&T.message&&(je=dt.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:De.status,responseMessage:je})}return De.json()})).apply(this,arguments)}function jn(b){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,k.Z)(function*(b,T=Pa,M){const{appId:U,apiKey:Q,measurementId:ae}=b.options;if(!U)throw gr.create("no-app-id");if(!Q){if(ae)return{measurementId:ae,appId:U};throw gr.create("no-api-key")}const De=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new Yu;return setTimeout((0,k.Z)(function*(){je.abort()}),void 0!==M?M:6e4),Ku({appId:U,apiKey:Q,measurementId:ae},De,je,T)})).apply(this,arguments)}function Ku(b,T,M){return go.apply(this,arguments)}function go(){return(go=(0,k.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:M},U,Q=Pa){var ae,De;const{appId:je,measurementId:dt}=b;try{yield Fa(U,T)}catch(vt){if(dt)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${null===(ae=vt)||void 0===ae?void 0:ae.message}]`),{appId:je,measurementId:dt};throw vt}try{const vt=yield ka(b);return Q.deleteThrottleMetadata(je),vt}catch(vt){const Mt=vt;if(!Zu(Mt)){if(Q.deleteThrottleMetadata(je),dt)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${Mt?.message}]`),{appId:je,measurementId:dt};throw vt}const pt=503===Number(null===(De=Mt?.customData)||void 0===De?void 0:De.httpStatus)?(0,re.$s)(M,Q.intervalMillis,30):(0,re.$s)(M,Q.intervalMillis),Dn={throttleEndTimeMillis:Date.now()+pt,backoffCount:M+1};return Q.setThrottleMetadata(je,Dn),On.debug(`Calling attemptFetch again in ${pt} millis`),Ku(b,Dn,U,Q)}})).apply(this,arguments)}function Fa(b,T){return new Promise((M,U)=>{const Q=Math.max(T-Date.now(),0),ae=setTimeout(M,Q);b.addEventListener(()=>{clearTimeout(ae),U(gr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Zu(b){if(!(b instanceof re.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Yu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Vs,Va;function Us(){return(Us=(0,k.Z)(function*(b,T,M,U,Q){if(Q&&Q.global)b("event",M,U);else{const ae=yield T;b("event",M,Object.assign(Object.assign({},U),{send_to:ae}))}})).apply(this,arguments)}function yo(b){Va=b}function pc(b){Vs=b}function hs(){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,k.Z)(function*(){var b;if(!(0,re.hl)())return On.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(T){return On.warn(gr.create("indexeddb-unavailable",{errorInfo:null===(b=T)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Wo(){return(Wo=(0,k.Z)(function*(b,T,M,U,Q,ae,De){var je;const dt=jn(b);dt.then(yr=>{M[yr.measurementId]=yr.appId,b.options.measurementId&&yr.measurementId!==b.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${yr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yr=>On.error(yr)),T.push(dt);const vt=hs().then(yr=>{if(yr)return U.getId()}),[Mt,pt]=yield Promise.all([dt,vt]);Td(ae)||zu(ae,Mt.measurementId),Va&&(Q("consent","default",Va),yo(void 0)),Q("js",new Date);const Dn=null!==(je=De?.config)&&void 0!==je?je:{};return Dn.origin="firebase",Dn.update=!0,null!=pt&&(Dn[bd]=pt),Q("config",Mt.measurementId,Dn),Vs&&(Q("set",Vs),pc(void 0)),Mt.measurementId})).apply(this,arguments)}class Xu{constructor(T){this.app=T}_delete(){return delete ti[this.app.options.appId],Promise.resolve()}}let ti={},Bs=[];const zo={};let Ko,_o,qo="dataLayer",Ua=!1;function S_(b,T,M){!function dm(){const b=[];if((0,re.ru)()&&b.push("This is a browser extension environment."),(0,re.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((U,Q)=>`(${Q+1}) ${U}`).join(" "),M=gr.create("invalid-analytics-context",{errorInfo:T});On.warn(M.message)}}();const U=b.options.appId;if(!U)throw gr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw gr.create("no-api-key");On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ti[U])throw gr.create("already-exists",{id:U});if(!Ua){!function Dd(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(qo);const{wrappedGtag:ae,gtagCore:De}=function Na(b,T,M,U,Q){let ae=function(...De){window[U].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ae=window[Q]),window[Q]=function qu(b,T,M,U){function ae(){return(ae=(0,k.Z)(function*(De,je,dt){try{"event"===De?yield Ho(b,T,M,je,dt):"config"===De?yield Ff(b,T,M,U,je,dt):"consent"===De?b("consent","update",dt):b("set",je)}catch(vt){On.error(vt)}})).apply(this,arguments)}return function Q(De,je,dt){return ae.apply(this,arguments)}}(ae,b,T,M),{gtagCore:ae,wrappedGtag:window[Q]}}(ti,Bs,zo,qo,"gtag");_o=ae,Ko=De,Ua=!0}return ti[U]=function Go(b,T,M,U,Q,ae,De){return Wo.apply(this,arguments)}(b,Bs,zo,T,Ko,qo,M),new Xu(b)}function x_(){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,k.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Vf="@firebase/analytics";!function ni(){(0,se._registerComponent)(new de.wA(Bo,(T,{options:M})=>S_(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new de.wA("analytics-internal",function b(T){try{const M=T.getProvider(Bo).getImmediate();return{logEvent:(U,Q,ae)=>function dn(b,T,M,U){b=(0,re.m9)(b),function xd(b,T,M,U,Q){return Us.apply(this,arguments)}(_o,ti[b.app.options.appId],T,M,U).catch(Q=>On.error(Q))}(M,U,Q,ae)}}catch(M){throw gr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(Vf,"0.8.3"),(0,se.registerVersion)(Vf,"0.8.3","esm2017")}();var ki=L(4408),Zo=L(7565);const zi=new class mi extends Zo.v{}(class mc extends ki.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,M,U):(T.flush(this),0)}});var at=L(4986),nl=L(8505),Yo=L(9468),Ba=L(5363);const $r=new m.GfV("7.4.1"),ja="__angularfire_symbol__analyticsIsSupportedValue",fs="__angularfire_symbol__analyticsIsSupported",qi="__angularfire_symbol__remoteConfigIsSupportedValue",Gr="__angularfire_symbol__remoteConfigIsSupported",yc="__angularfire_symbol__messagingIsSupportedValue",rl="__angularfire_symbol__messagingIsSupported";function $a(b,T,M){if(T){if(1===T.length)return T[0];const ae=T.filter(De=>De.app===M);if(1===ae.length)return ae[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[fs]||(globalThis[fs]=x_().then(b=>globalThis[ja]=b).catch(()=>globalThis[ja]=!1)),globalThis[rl]||(globalThis[rl]=Ed().then(b=>globalThis[yc]=b).catch(()=>globalThis[yc]=!1)),globalThis[Gr]||(globalThis[Gr]=Du().then(b=>globalThis[qi]=b).catch(()=>globalThis[qi]=!1));const ri=(b,T)=>{const M=T?[T]:(0,ee.C6)(),U=[];return M.forEach(Q=>{Q.container.getProvider(b).instances.forEach(De=>{U.includes(De)||U.push(De)})}),U};function Qo(){}class yn{constructor(T,M=zi){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,U){const Q=this.zone;return this.delegate.schedule(function(De){Q.runGuarded(()=>{T.apply(this,[De])})},M,U)}}class Ki{constructor(T){this.zone=T,this.task=null}call(T,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo)),M.pipe((0,nl.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sl=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new yn(Zone.current)),this.insideAngular=M.run(()=>new yn(Zone.current,at.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function js(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function ps(b){return js(),function _c(b){return function(M){return(M=M.lift(new Ki(b.ngZone))).pipe((0,Yo.R)(b.outsideAngular),(0,Ba.Q)(b.insideAngular))}}(js())(b)}},2090:(ut,Te,L)=>{L.d(Te,{$s:()=>Xe,BH:()=>Bt,DV:()=>Yr,Dv:()=>dr,G6:()=>Ce,GJ:()=>As,L:()=>he,LL:()=>Yt,Pz:()=>Xt,Sg:()=>Ke,UG:()=>Ie,UI:()=>Po,US:()=>de,Wj:()=>Tt,Wl:()=>ln,Yr:()=>ve,ZB:()=>G,ZR:()=>wn,aH:()=>ft,b$:()=>pe,cI:()=>Rt,dS:()=>tn,eu:()=>He,g5:()=>k,gK:()=>Bn,gQ:()=>xn,h$:()=>le,hl:()=>Be,hu:()=>ee,jU:()=>tt,lb:()=>rs,m9:()=>kt,ne:()=>qn,p$:()=>$,pd:()=>ji,r3:()=>Mi,ru:()=>ye,tV:()=>fe,uI:()=>Ne,ug:()=>Ni,vZ:()=>Ze,w1:()=>st,w9:()=>Ur,xO:()=>Xn,xb:()=>di,z$:()=>Ve,zI:()=>j,zd:()=>hi});const ee=function(W,B){if(!W)throw k(B)},k=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},se=function(W){const B=[];let Z=0;for(let Ee=0;Ee<W.length;Ee++){let J=W.charCodeAt(Ee);J<128?B[Z++]=J:J<2048?(B[Z++]=J>>6|192,B[Z++]=63&J|128):55296==(64512&J)&&Ee+1<W.length&&56320==(64512&W.charCodeAt(Ee+1))?(J=65536+((1023&J)<<10)+(1023&W.charCodeAt(++Ee)),B[Z++]=J>>18|240,B[Z++]=J>>12&63|128,B[Z++]=J>>6&63|128,B[Z++]=63&J|128):(B[Z++]=J>>12|224,B[Z++]=J>>6&63|128,B[Z++]=63&J|128)}return B},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,B){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let J=0;J<W.length;J+=3){const Ge=W[J],ct=J+1<W.length,Qt=ct?W[J+1]:0,fn=J+2<W.length,zt=fn?W[J+2]:0;let Ut=(15&Qt)<<2|zt>>6,hr=63&zt;fn||(hr=64,ct||(Ut=64)),Ee.push(Z[Ge>>2],Z[(3&Ge)<<4|Qt>>4],Z[Ut],Z[hr])}return Ee.join("")},encodeString(W,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(W):this.encodeByteArray(se(W),B)},decodeString(W,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(W):function(W){const B=[];let Z=0,Ee=0;for(;Z<W.length;){const J=W[Z++];if(J<128)B[Ee++]=String.fromCharCode(J);else if(J>191&&J<224){const Ge=W[Z++];B[Ee++]=String.fromCharCode((31&J)<<6|63&Ge)}else if(J>239&&J<365){const fn=((7&J)<<18|(63&W[Z++])<<12|(63&W[Z++])<<6|63&W[Z++])-65536;B[Ee++]=String.fromCharCode(55296+(fn>>10)),B[Ee++]=String.fromCharCode(56320+(1023&fn))}else{const Ge=W[Z++],ct=W[Z++];B[Ee++]=String.fromCharCode((15&J)<<12|(63&Ge)<<6|63&ct)}}return B.join("")}(this.decodeStringToByteArray(W,B))},decodeStringToByteArray(W,B){this.init_();const Z=B?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let J=0;J<W.length;){const Ge=Z[W.charAt(J++)],Qt=J<W.length?Z[W.charAt(J)]:0;++J;const zt=J<W.length?Z[W.charAt(J)]:64;++J;const $e=J<W.length?Z[W.charAt(J)]:64;if(++J,null==Ge||null==Qt||null==zt||null==$e)throw Error();Ee.push(Ge<<2|Qt>>4),64!==zt&&(Ee.push(Qt<<4&240|zt>>2),64!==$e&&Ee.push(zt<<6&192|$e))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},le=function(W){const B=se(W);return de.encodeByteArray(B,!0)},he=function(W){return le(W).replace(/\./g,"")},fe=function(W){try{return de.decodeString(W,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function $(W){return G(void 0,W)}function G(W,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return B}for(const Z in B)!B.hasOwnProperty(Z)||!Y(Z)||(W[Z]=G(W[Z],B[Z]));return W}function Y(W){return"__proto__"!==W}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function ye(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function st(){const W=Ve();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function ve(){return!1}function Ce(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function He(){return new Promise((W,B)=>{try{let Z=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(Ee);J.onsuccess=()=>{J.result.close(),Z||self.indexedDB.deleteDatabase(Ee),W(!0)},J.onupgradeneeded=()=>{Z=!1},J.onerror=()=>{var Ge;B((null===(Ge=J.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(Z){B(Z)}})}function j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ne=()=>{try{return function me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=W&&fe(W[1]);return B&&JSON.parse(B)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},ft=()=>{var W;return null===(W=ne())||void 0===W?void 0:W.config},Xt=W=>{var B;return null===(B=ne())||void 0===B?void 0:B[`_${W}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,Z)=>{this.resolve=B,this.reject=Z})}wrapCallback(B){return(Z,Ee)=>{Z?this.reject(Z):this.resolve(Ee),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(Z):B(Z,Ee))}}}function Ke(W,B){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=B||"demo-project",J=W.iat||0,Ge=W.sub||W.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:J,exp:J+3600,auth_time:J,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},W);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ct)),""].join(".")}class wn extends Error{constructor(B,Z,Ee){super(Z),this.code=B,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(B,Z,Ee){this.service=B,this.serviceName=Z,this.errors=Ee}create(B,...Z){const Ee=Z[0]||{},J=`${this.service}/${B}`,Ge=this.errors[B],ct=Ge?function en(W,B){return W.replace(Lr,(Z,Ee)=>{const J=B[Ee];return null!=J?String(J):`<${Ee}?>`})}(Ge,Ee):"Error";return new wn(J,`${this.serviceName}: ${ct} (${J}).`,Ee)}}const Lr=/\{\$([^}]+)}/g;function Rt(W){return JSON.parse(W)}function ln(W){return JSON.stringify(W)}const ns=function(W){let B={},Z={},Ee={},J="";try{const Ge=W.split(".");B=Rt(fe(Ge[0])||""),Z=Rt(fe(Ge[1])||""),J=Ge[2],Ee=Z.d||{},delete Z.d}catch{}return{header:B,claims:Z,data:Ee,signature:J}},Ur=function(W){const Z=ns(W).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},As=function(W){const B=ns(W).claims;return"object"==typeof B&&!0===B.admin};function Mi(W,B){return Object.prototype.hasOwnProperty.call(W,B)}function Yr(W,B){if(Object.prototype.hasOwnProperty.call(W,B))return W[B]}function di(W){for(const B in W)if(Object.prototype.hasOwnProperty.call(W,B))return!1;return!0}function Po(W,B,Z){const Ee={};for(const J in W)Object.prototype.hasOwnProperty.call(W,J)&&(Ee[J]=B.call(Z,W[J],J,W));return Ee}function Ze(W,B){if(W===B)return!0;const Z=Object.keys(W),Ee=Object.keys(B);for(const J of Z){if(!Ee.includes(J))return!1;const Ge=W[J],ct=B[J];if(Ar(Ge)&&Ar(ct)){if(!Ze(Ge,ct))return!1}else if(Ge!==ct)return!1}for(const J of Ee)if(!Z.includes(J))return!1;return!0}function Ar(W){return null!==W&&"object"==typeof W}function Xn(W){const B=[];for(const[Z,Ee]of Object.entries(W))Array.isArray(Ee)?Ee.forEach(J=>{B.push(encodeURIComponent(Z)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(Z)+"="+encodeURIComponent(Ee));return B.length?"&"+B.join("&"):""}function hi(W){const B={};return W.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[J,Ge]=Ee.split("=");B[decodeURIComponent(J)]=decodeURIComponent(Ge)}}),B}function ji(W){const B=W.indexOf("?");if(!B)return"";const Z=W.indexOf("#",B);return W.substring(B,Z>0?Z:void 0)}class xn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,Z){Z||(Z=0);const Ee=this.W_;if("string"==typeof B)for(let $e=0;$e<16;$e++)Ee[$e]=B.charCodeAt(Z)<<24|B.charCodeAt(Z+1)<<16|B.charCodeAt(Z+2)<<8|B.charCodeAt(Z+3),Z+=4;else for(let $e=0;$e<16;$e++)Ee[$e]=B[Z]<<24|B[Z+1]<<16|B[Z+2]<<8|B[Z+3],Z+=4;for(let $e=16;$e<80;$e++){const Ut=Ee[$e-3]^Ee[$e-8]^Ee[$e-14]^Ee[$e-16];Ee[$e]=4294967295&(Ut<<1|Ut>>>31)}let zt,Ue,J=this.chain_[0],Ge=this.chain_[1],ct=this.chain_[2],Qt=this.chain_[3],fn=this.chain_[4];for(let $e=0;$e<80;$e++){$e<40?$e<20?(zt=Qt^Ge&(ct^Qt),Ue=1518500249):(zt=Ge^ct^Qt,Ue=1859775393):$e<60?(zt=Ge&ct|Qt&(Ge|ct),Ue=2400959708):(zt=Ge^ct^Qt,Ue=3395469782);const Ut=(J<<5|J>>>27)+zt+fn+Ue+Ee[$e]&4294967295;fn=Qt,Qt=ct,ct=4294967295&(Ge<<30|Ge>>>2),Ge=J,J=Ut}this.chain_[0]=this.chain_[0]+J&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+ct&4294967295,this.chain_[3]=this.chain_[3]+Qt&4294967295,this.chain_[4]=this.chain_[4]+fn&4294967295}update(B,Z){if(null==B)return;void 0===Z&&(Z=B.length);const Ee=Z-this.blockSize;let J=0;const Ge=this.buf_;let ct=this.inbuf_;for(;J<Z;){if(0===ct)for(;J<=Ee;)this.compress_(B,J),J+=this.blockSize;if("string"==typeof B){for(;J<Z;)if(Ge[ct]=B.charCodeAt(J),++ct,++J,ct===this.blockSize){this.compress_(Ge),ct=0;break}}else for(;J<Z;)if(Ge[ct]=B[J],++ct,++J,ct===this.blockSize){this.compress_(Ge),ct=0;break}}this.inbuf_=ct,this.total_+=Z}digest(){const B=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let J=this.blockSize-1;J>=56;J--)this.buf_[J]=255&Z,Z/=256;this.compress_(this.buf_);let Ee=0;for(let J=0;J<5;J++)for(let Ge=24;Ge>=0;Ge-=8)B[Ee]=this.chain_[J]>>Ge&255,++Ee;return B}}function qn(W,B){const Z=new gn(W,B);return Z.subscribe.bind(Z)}class gn{constructor(B,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{B(this)}).catch(Ee=>{this.error(Ee)})}next(B){this.forEachObserver(Z=>{Z.next(B)})}error(B){this.forEachObserver(Z=>{Z.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,Z,Ee){let J;if(void 0===B&&void 0===Z&&void 0===Ee)throw new Error("Missing Observer.");J=function ot(W,B){if("object"!=typeof W||null===W)return!1;for(const Z of B)if(Z in W&&"function"==typeof W[Z])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:Z,complete:Ee},void 0===J.next&&(J.next=an),void 0===J.error&&(J.error=an),void 0===J.complete&&(J.complete=an);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Ge}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,B)}sendOne(B,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{Z(this.observers[B])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function an(){}const dr=function(W,B,Z,Ee){let J;if(Ee<B?J="at least "+B:Ee>Z&&(J=0===Z?"none":"no more than "+Z),J)throw new Error(W+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+J+".")};function Bn(W,B){return`${W} failed: ${B} argument `}function Tt(W,B,Z,Ee){if((!Ee||Z)&&"function"!=typeof Z)throw new Error(Bn(W,B)+"must be a valid function.")}function rs(W,B,Z,Ee){if((!Ee||Z)&&("object"!=typeof Z||null===Z))throw new Error(Bn(W,B)+"must be a valid context object.")}const tn=function(W){const B=[];let Z=0;for(let Ee=0;Ee<W.length;Ee++){let J=W.charCodeAt(Ee);if(J>=55296&&J<=56319){const Ge=J-55296;Ee++,ee(Ee<W.length,"Surrogate pair missing trail surrogate."),J=65536+(Ge<<10)+(W.charCodeAt(Ee)-56320)}J<128?B[Z++]=J:J<2048?(B[Z++]=J>>6|192,B[Z++]=63&J|128):J<65536?(B[Z++]=J>>12|224,B[Z++]=J>>6&63|128,B[Z++]=63&J|128):(B[Z++]=J>>18|240,B[Z++]=J>>12&63|128,B[Z++]=J>>6&63|128,B[Z++]=63&J|128)}return B},Ni=function(W){let B=0;for(let Z=0;Z<W.length;Z++){const Ee=W.charCodeAt(Z);Ee<128?B++:Ee<2048?B+=2:Ee>=55296&&Ee<=56319?(B+=4,Z++):B+=3}return B};function Xe(W,B=1e3,Z=2){const Ee=B*Math.pow(Z,W),J=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+J)}function kt(W){return W&&W._delegate?W._delegate:W}},8584:(ut,Te,L)=>{var m=L(4650);let ee=null;function k(){return ee}const le=new m.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function fe(){return(0,m.LFG)(G)}()},providedIn:"platform"}),n})();const $=new m.OlP("Location Initialized");let G=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Y()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Y()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ve(){return new G((0,m.LFG)(le))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Je)},providedIn:"root"}),n})();const pe=new m.OlP("appBaseHref");let Je=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(pe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),st=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(pe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(Be(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Ne,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(m.LFG(ye))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ve(){return new xe((0,m.LFG)(ye))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function wa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Ea{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let io=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ea(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),Os(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Os(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Os(n,e){n.context.$implicit=e.item}let fr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class zl{constructor(){this.$implicit=null,this.ngIf=null}}function pr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Fo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Cr(n){return"server"===n}let Su=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Of((0,m.LFG)(le),window)}),n})();class Of{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=pi(this.window.history)||pi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function pi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class oo{}class lo extends class wd extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new lo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ju(){return co=co||document.querySelector("base"),co?co.getAttribute("href"):null}();return null==t?null:function ei(n){rr=rr||document.createElement("a"),rr.setAttribute("href",n);const e=rr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){co=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wa(document.cookie,e)}}let rr,co=null;const In=new m.OlP("TRANSITION_ID"),lc=[{provide:m.ip1,useFactory:function Ed(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[In,le,m.zs3],multi:!0}];let cc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Hu=new m.OlP("EventManagerPlugins");let Id=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Hu),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class $u{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ho=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Uo=(()=>{class n extends ho{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Cd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Cd))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Cd(n){k().remove(n)}const Bo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bd=/%COMP%/g;function zu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?zu(n,i,t):(i=i.replace(bd,n),t.push(i))}return t}function Dd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let jo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ho(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Td(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Sd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=zu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Id),m.LFG(Uo),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ho{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Bo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Na(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Na(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Bo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Bo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Dd(r)):this.eventManager.addEventListener(e,t,Dd(r))}}function Na(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Td extends Ho{constructor(e,t,r,i){super(e),this.component=r;const a=zu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function On(n){return"_ngcontent-%COMP%".replace(bd,n)}(i+"-"+r.id),this.hostAttr=function Wu(n){return"_nghost-%COMP%".replace(bd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Sd extends Ho{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=zu(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gr=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ra=["alt","control","meta","shift"],Oa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Pa=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),Ra.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=l,y}static matchEventFullKeyCode(t,r){let i=Oa[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ra.forEach(l=>{l!==i&&(0,Wi[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Yu=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Ku(){lo.makeCurrent()},multi:!0},{provide:le,useFactory:function Fa(){return(0,m.RDi)(document),document},deps:[]}]),Vs=new m.OlP(""),xd=[{provide:m.rWj,useClass:class kf{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(y){l=l||y,a--,0==a&&r(l)};i.forEach(function(y){y.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Us=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function go(){return new m.qLn},deps:[]},{provide:Hu,useClass:gr,multi:!0,deps:[le,m.R0b,m.Lbi]},{provide:Hu,useClass:Pa,multi:!0,deps:[le]},{provide:jo,useClass:jo,deps:[Id,Uo,m.AFp]},{provide:m.FYo,useExisting:jo},{provide:ho,useExisting:Uo},{provide:Uo,useClass:Uo,deps:[le]},{provide:Id,useClass:Id,deps:[Hu,m.R0b]},{provide:oo,useClass:cc,deps:[]},[]];let hc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:In,useExisting:m.AFp},lc]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Vs,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Us,...xd],imports:[Fo,m.hGG]}),n})(),ds=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function $o(){return new ds((0,m.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var dn=L(8996),br=L(9751);const{isArray:Vf}=Array,{getPrototypeOf:tl,prototype:ni,keys:ki}=Object;function mc(n){if(1===n.length){const e=n[0];if(Vf(e))return{args:e,keys:null};if(function Zo(n){return n&&"object"==typeof n&&tl(n)===ni}(e)){const t=ki(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var mi=L(8421),zi=L(7669),ir=L(5403),at=L(4004);const{isArray:nl}=Array;function Ba(n){return(0,at.U)(e=>function Yo(n,e){return nl(e)?n(...e):n(e)}(n,e))}function $r(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let fs=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),qi=(()=>{class n extends fs{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Gr=new m.OlP("NgValueAccessor"),Ha={provide:Gr,useExisting:(0,m.Gpc)(()=>il),multi:!0},Nd=new m.OlP("CompositionEventMode");let il=(()=>{class n extends fs{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fm(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Nd,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[m._Bn([Ha]),m.qOj]}),n})();const yn=new m.OlP("NgValidators"),Ki=new m.OlP("NgAsyncValidators");function T(n){return null!=n}function M(n){return(0,m.QGY)(n)?(0,dn.D)(n):n}function U(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Q(n,e){return e.map(t=>t(n))}function De(n){return n.map(e=>function ae(n){return!n.validate}(e)?e:t=>e.validate(t))}function dt(n){return null!=n?function je(n){if(!n)return null;const e=n.filter(T);return 0==e.length?null:function(t){return U(Q(t,e))}}(De(n)):null}function Mt(n){return null!=n?function vt(n){if(!n)return null;const e=n.filter(T);return 0==e.length?null:function(t){return function ja(...n){const e=(0,zi.jO)(n),{args:t,keys:r}=mc(n),i=new br.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let y=l,w=l;for(let D=0;D<l;D++){let S=!1;(0,mi.Xf)(t[D]).subscribe((0,ir.x)(a,O=>{S||(S=!0,w--),h[D]=O},()=>y--,void 0,()=>{(!y||!S)&&(w||a.next(r?$r(r,h):h),a.complete())}))}});return e?i.pipe(Ba(e)):i}(Q(t,e).map(M)).pipe((0,at.U)(U))}}(De(n)):null}function pt(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Hs(n){return n?Array.isArray(n)?n:[n]:[]}function gs(n,e){return Array.isArray(n)?n.includes(e):n===e}function $s(n,e){const t=Hs(e);return Hs(n).forEach(i=>{gs(t,i)||t.push(i)}),t}function wo(n,e){return Hs(e).filter(t=>!gs(n,t))}class ms{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class kn extends ms{get formDirective(){return null}get path(){return null}}class ii extends ms{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gs{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Bf=(()=>{class n extends Gs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ii,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[m.qOj]}),n})(),pm=(()=>{class n extends Gs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(kn,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[m.qOj]}),n})();const qa="VALID",Ec="INVALID",Ka="PENDING",al="DISABLED";function ul(n){return(Cc(n)?n.validators:n)||null}function ym(n){return Array.isArray(n)?dt(n):n||null}function Ic(n,e){return(Cc(e)?e.asyncValidators:n)||null}function _m(n){return Array.isArray(n)?Mt(n):n||null}function Cc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ll{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ym(this._rawValidators),this._composedAsyncValidatorFn=_m(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===qa}get invalid(){return this.status===Ec}get pending(){return this.status==Ka}get disabled(){return this.status===al}get enabled(){return this.status!==al}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ym(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=_m(e)}addValidators(e){this.setValidators($s(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($s(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wo(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wo(e,this._rawAsyncValidators))}hasValidator(e){return gs(this._rawValidators,e)}hasAsyncValidator(e){return gs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ka,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=al,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qa,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qa||this.status===Ka)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?al:qa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ka,this._hasOwnPendingAsyncValidator=!0;const t=M(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?al:this.errors?Ec:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ka)?Ka:this._anyControlsHaveStatus(Ec)?Ec:qa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class kd extends ll{constructor(e,t,r){super(ul(t),Ic(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function ys(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new m.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function vm(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[t])throw new m.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function cl(n,e){Eo(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Io(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Gf(n,e)})}(n,e),function Ld(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Za(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Gf(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function LE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Eo(n,e){const t=function Dn(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(pt(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function yr(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(pt(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Fd(e._rawValidators,i),Fd(e._rawAsyncValidators,i)}function Gf(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Kf={provide:kn,useExisting:(0,m.Gpc)(()=>Ya)},hl=(()=>Promise.resolve())();let Ya=(()=>{class n extends kn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.vpe,this.form=new kd({},dt(t),Mt(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){hl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),cl(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){hl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){hl.then(()=>{const r=this._findContainer(t.path),i=new kd({});(function Wf(n,e){Eo(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){hl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){hl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function zf(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(yn,10),m.Y36(Ki,10))},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&m.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Kf]),m.qOj]}),n})();function Bd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function fl(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Em=class extends ll{constructor(e=null,t,r){super(ul(t),Ic(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=fl(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Bd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Bd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){fl(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},$_={provide:ii,useExisting:(0,m.Gpc)(()=>Zf)},Dc=(()=>Promise.resolve())();let Zf=(()=>{class n extends ii{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new Em,this._registered=!1,this.update=new m.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function qf(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===il?t=a:function BE(n){return Object.getPrototypeOf(n.constructor)===qi}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function wm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){cl(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Dc.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,m.D6c)(r);Dc.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function $f(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(kn,9),m.Y36(yn,10),m.Y36(Ki,10),m.Y36(Gr,10),m.Y36(m.sBO,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([$_]),m.qOj,m.TTD]}),n})(),Qa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Jf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),op=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Jf]}),n})(),Q_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[op]}),n})();function rt(...n){const e=(0,zi.yG)(n);return(0,dn.D)(n,e)}var Wr=L(5577),xm=L(576);function Jo(n,e){return(0,xm.m)(e)?(0,Wr.z)(n,e,1):(0,Wr.z)(n,1)}var ai=L(4482);function Qi(n,e){return(0,ai.e)((t,r)=>{let i=0;t.subscribe((0,ir.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}class Qd{}class zE{}class tu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof tu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new tu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof tu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class qE{encodeKey(e){return KE(e)}encodeValue(e){return KE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const xT=/%(\d[a-f0-9])/gi,MT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function KE(n){return encodeURIComponent(n).replace(xT,(e,t)=>MT[t]??e)}function Jd(n){return`${n}`}class yl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new qE,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function AT(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],y=t.get(l)||[];y.push(h),t.set(l,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Jd):[Jd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new yl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Jd(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Jd(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class NT{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function YE(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function QE(n){return typeof Blob<"u"&&n instanceof Blob}function yi(n){return typeof FormData<"u"&&n instanceof FormData}class Xd{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ZE(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new tu),this.context||(this.context=new NT),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new yl,this.urlWithParams=t}serializeBody(){return null===this.body?null:YE(this.body)||QE(this.body)||yi(this.body)||function ev(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof yl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||yi(this.body)?null:QE(this.body)?this.body.type||null:YE(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,w=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((S,O)=>S.set(O,e.setHeaders[O]),y)),e.setParams&&(w=Object.keys(e.setParams).reduce((S,O)=>S.set(O,e.setParams[O]),w)),new Xd(t,r,a,{params:w,headers:y,context:D,reportProgress:h,responseType:i,withCredentials:l})}}var sr=(()=>((sr=sr||{})[sr.Sent=0]="Sent",sr[sr.UploadProgress=1]="UploadProgress",sr[sr.ResponseHeader=2]="ResponseHeader",sr[sr.DownloadProgress=3]="DownloadProgress",sr[sr.Response=4]="Response",sr[sr.User=5]="User",sr))();class zr{constructor(e,t=200,r="OK"){this.headers=e.headers||new tu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ac extends zr{constructor(e={}){super(e),this.type=sr.ResponseHeader}clone(e={}){return new Ac({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ap extends zr{constructor(e={}){super(e),this.type=sr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ap({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class JE extends zr{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function tv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let XE=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Xd)a=t;else{let y,w;y=i.headers instanceof tu?i.headers:new tu(i.headers),i.params&&(w=i.params instanceof yl?i.params:new yl({fromObject:i.params})),a=new Xd(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=rt(a).pipe(Jo(y=>this.handler.handle(y)));if(t instanceof Xd||"events"===i.observe)return l;const h=l.pipe(Qi(y=>y instanceof ap));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,at.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return h.pipe((0,at.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return h.pipe((0,at.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return h.pipe((0,at.U)(y=>y.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new yl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,tv(i,r))}post(t,r,i={}){return this.request("POST",t,tv(i,r))}put(t,r,i={}){return this.request("PUT",t,tv(i,r))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qd))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class eI{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const nv=new m.OlP("HTTP_INTERCEPTORS");let RT=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const PT=/^\)\]\}',?\n/;let kT=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new br.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,H)=>i.setRequestHeader(V,H.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const V=i.statusText||"OK",H=new tu(i.getAllResponseHeaders()),ge=function DR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Ac({headers:H,status:i.status,statusText:V,url:ge}),l},y=()=>{let{headers:V,status:H,statusText:ge,url:be}=h(),Ye=null;204!==H&&(Ye=typeof i.response>"u"?i.responseText:i.response),0===H&&(H=Ye?200:0);let gt=H>=200&&H<300;if("json"===t.responseType&&"string"==typeof Ye){const Dt=Ye;Ye=Ye.replace(PT,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(Nt){Ye=Dt,gt&&(gt=!1,Ye={error:Nt,text:Ye})}}gt?(r.next(new ap({body:Ye,headers:V,status:H,statusText:ge,url:be||void 0})),r.complete()):r.error(new JE({error:Ye,headers:V,status:H,statusText:ge,url:be||void 0}))},w=V=>{const{url:H}=h(),ge=new JE({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:H||void 0});r.error(ge)};let D=!1;const S=V=>{D||(r.next(h()),D=!0);let H={type:sr.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(H.total=V.total),"text"===t.responseType&&!!i.responseText&&(H.partialText=i.responseText),r.next(H)},O=V=>{let H={type:sr.UploadProgress,loaded:V.loaded};V.lengthComputable&&(H.total=V.total),r.next(H)};return i.addEventListener("load",y),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",O)),i.send(a),r.next({type:sr.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",y),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",O)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(oo))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Mm=new m.OlP("XSRF_COOKIE_NAME"),tI=new m.OlP("XSRF_HEADER_NAME");class Co{}let rv=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=wa(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le),m.LFG(m.Lbi),m.LFG(Mm))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),lp=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Co),m.LFG(tI))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),FT=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(nv,[]);this.chain=r.reduceRight((i,a)=>new eI(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(zE),m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),cp=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:lp,useClass:RT}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Mm,useValue:t.cookieName}:[],t.headerName?{provide:tI,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[lp,{provide:nv,useExisting:lp,multi:!0},{provide:Co,useClass:rv},{provide:Mm,useValue:"XSRF-TOKEN"},{provide:tI,useValue:"X-XSRF-TOKEN"}]}),n})(),VT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[XE,{provide:Qd,useClass:FT},kT,{provide:zE,useExisting:kT}],imports:[cp.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var bo=L(7579);class zs extends bo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const nu=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var vl=L(4671),rI=L(9672);function iI(...n){const e=(0,zi.yG)(n),t=(0,zi.jO)(n),{args:r,keys:i}=mc(n);if(0===r.length)return(0,dn.D)([],e);const a=new br.y(function iv(n,e,t=vl.y){return r=>{sI(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let y=0;y<i;y++)sI(e,()=>{const w=(0,dn.D)(n[y],e);let D=!1;w.subscribe((0,ir.x)(r,S=>{a[y]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>$r(i,l):vl.y));return t?a.pipe(Ba(t)):a}function sI(n,e,t){n?(0,rI.f)(t,n,e):e()}var dp=L(8189);function sv(...n){return function UT(){return(0,dp.J)(1)}()((0,dn.D)(n,(0,zi.yG)(n)))}function oI(n){return new br.y(e=>{(0,mi.Xf)(n()).subscribe(e)})}var BT=L(9635);function eh(n,e){const t=(0,xm.m)(n)?n:()=>n,r=i=>i.error(t());return new br.y(e?i=>e.schedule(r,0,i):r)}var ru=L(515),ov=L(727);function hp(){return(0,ai.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ir.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class aI extends br.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ai.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ov.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ir.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ov.w0.EMPTY)}return e}refCount(){return hp()(this)}}function Mr(n,e){return(0,ai.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,ir.x)(r,y=>{i?.unsubscribe();let w=0;const D=a++;(0,mi.Xf)(n(y,D)).subscribe(i=(0,ir.x)(r,S=>r.next(e?e(y,S,D,w++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function th(n){return n<=0?()=>ru.E:(0,ai.e)((e,t)=>{let r=0;e.subscribe((0,ir.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function fp(...n){const e=(0,zi.yG)(n);return(0,ai.e)((t,r)=>{(e?sv(n,t,e):sv(n,t)).subscribe(r)})}function Xo(n){return(0,ai.e)((e,t)=>{let r=!1;e.subscribe((0,ir.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function av(n=uI){return(0,ai.e)((e,t)=>{let r=!1;e.subscribe((0,ir.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function uI(){return new nu}function iu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qi((i,a)=>n(i,a,r)):vl.y,th(1),t?Xo(e):av(()=>new nu))}var Fi=L(8505);function Do(n){return(0,ai.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,ir.x)(t,void 0,void 0,l=>{a=(0,mi.Xf)(n(l,Do(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function jT(n,e,t,r,i){return(a,l)=>{let h=t,y=e,w=0;a.subscribe((0,ir.x)(l,D=>{const S=w++;y=h?n(y,D,S):(h=!0,D),r&&l.next(y)},i&&(()=>{h&&l.next(y),l.complete()})))}}function wl(n,e){return(0,ai.e)(jT(n,e,arguments.length>=2,!0))}function Nm(n){return n<=0?()=>ru.E:(0,ai.e)((e,t)=>{let r=[];e.subscribe((0,ir.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function uv(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qi((i,a)=>n(i,a,r)):vl.y,Nm(1),t?Xo(e):av(()=>new nu))}function nh(n){return(0,ai.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const jt="primary",rh=Symbol("RouteTitle");class cv{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xc(n){return new cv(n)}function dv(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ea(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!hv(n[i],e[i]))return!1;return!0}function hv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function cI(n){return Array.prototype.concat.apply([],n)}function dI(n){return n.length>0?n[n.length-1]:null}function Nr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function su(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,dn.D)(Promise.resolve(n)):rt(n)}const $T={exact:function qs(n,e,t){if(!Nc(n.segments,e.segments)||!Rm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!qs(n.children[r],e.children[r],t))return!1;return!0},subset:pv},fv={exact:function GT(n,e){return ea(n,e)},subset:function WT(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hv(n[t],e[t]))},ignored:()=>!0};function pI(n,e,t){return $T[t.paths](n.root,e.root,t.matrixParams)&&fv[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pv(n,e,t){return gI(n,e,e.segments,t)}function gI(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Nc(i,t)||e.hasChildren()||!Rm(i,t,r))}if(n.segments.length===t.length){if(!Nc(n.segments,t)||!Rm(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!pv(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Nc(n.segments,i)&&Rm(n.segments,i,r)&&n.children[jt])&&gI(n.children[jt],e,a,r)}}function Rm(n,e,t){return e.every((r,i)=>fv[t](n[i].parameters,r.parameters))}class Mc{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xc(this.queryParams)),this._queryParamMap}toString(){return mI.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Nr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gp(this)}}class ih{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xc(this.parameters)),this._parameterMap}toString(){return ZT(this)}}function Nc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new Om},providedIn:"root"}),n})();class Om{parse(e){const t=new MR(e);return new Mc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${mp(e.root,!0)}`,r=function wI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${yp(t)}=${yp(i)}`).join("&"):`${yp(t)}=${yp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function KT(n){return encodeURI(n)}(e.fragment)}`:""}`}}const mI=new Om;function gp(n){return n.segments.map(e=>ZT(e)).join("/")}function mp(n,e){if(!n.hasChildren())return gp(n);if(e){const t=n.children[jt]?mp(n.children[jt],!1):"",r=[];return Nr(n.children,(i,a)=>{a!==jt&&r.push(`${a}:${mp(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function qT(n,e){let t=[];return Nr(n.children,(r,i)=>{i===jt&&(t=t.concat(e(r,i)))}),Nr(n.children,(r,i)=>{i!==jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===jt?[mp(n.children[jt],!1)]:[`${i}:${mp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${gp(n)}/${t[0]}`:`${gp(n)}/(${t.join("//")})`}}function yI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yp(n){return yI(n).replace(/%3B/gi,";")}function Pm(n){return yI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function km(n){return decodeURIComponent(n)}function _I(n){return km(n.replace(/\+/g,"%20"))}function ZT(n){return`${Pm(n.path)}${function vI(n){return Object.keys(n).map(e=>`;${Pm(e)}=${Pm(n[e])}`).join("")}(n.parameters)}`}const Rc=/^[^\/()?;=#]+/;function Fm(n){const e=n.match(Rc);return e?e[0]:""}const gv=/^[^=?&#]+/,YT=/^[^&#]+/;class MR{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new Gt(e,t)),r}parseSegment(){const e=Fm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new ih(km(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Fm(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Fm(this.remaining);i&&(r=i,this.capture(r))}e[km(t)]=km(r)}parseQueryParam(e){const t=function mv(n){const e=n.match(gv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function xR(n){const e=n.match(YT);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=_I(t),a=_I(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Fm(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=jt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[jt]:new Gt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function EI(n){return n.segments.length>0?new Gt([],{[jt]:n}):n}function Lm(n){const e={};for(const r of Object.keys(n.children)){const a=Lm(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function II(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function sh(n){return n instanceof Mc}function Vm(n,e,t,r,i){if(0===t.length)return ah(e.root,e.root,e.root,r,i);const a=function TI(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new DI(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Nr(a.outlets,(y,w)=>{h[w]="string"==typeof y?y.split("/"):y}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,y)=>{0==y&&"."===h||(0==y&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new DI(t,e,r)}(t);return a.toRoot()?ah(e.root,e.root,new Gt([],{}),r,i):function l(y){const w=function JT(n,e,t,r){if(n.isAbsolute)return new uh(e.root,!0,0);if(-1===r)return new uh(t,t===e.root,0);return function _v(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new uh(r,!1,i-a)}(t,r+(vp(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,y),D=w.processChildren?Um(w.segmentGroup,w.index,a.commands):wp(w.segmentGroup,w.index,a.commands);return ah(e.root,w.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function vp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function oh(n){return"object"==typeof n&&null!=n&&n.outlets}function ah(n,e,t,r,i){let l,a={};r&&Nr(r,(y,w)=>{a[w]=Array.isArray(y)?y.map(D=>`${D}`):`${y}`}),l=n===e?t:bI(n,e,t);const h=EI(Lm(l));return new Mc(h,a,i)}function bI(n,e,t){const r={};return Nr(n.children,(i,a)=>{r[a]=i===e?t:bI(i,e,t)}),new Gt(n.segments,r)}class DI{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vp(r[0]))throw new m.vHH(4003,!1);const i=r.find(oh);if(i&&i!==dI(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function wp(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return Um(n,e,t);const r=function vv(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(oh(h))break;const y=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!Ev(y,w,l))return a;r+=2}else{if(!Ev(y,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Gt(n.segments.slice(0,r.pathIndex),{});return a.children[jt]=new Gt(n.segments.slice(r.pathIndex),n.children),Um(a,0,i)}return r.match&&0===i.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?wv(n,e,t):r.match?Um(n,0,i):wv(n,e,t)}function Um(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function AI(n){return oh(n[0])?n[0].outlets:{[jt]:n}}(t),i={};return Nr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=wp(n.children[l],e,a))}),Nr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Gt(n.segments,i)}}function wv(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(oh(a)){const y=NR(a.outlets);return new Gt(r,y)}if(0===i&&vp(t[0])){r.push(new ih(n.segments[e].path,Oc(t[0]))),i++;continue}const l=oh(a)?a.outlets[jt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&vp(h)?(r.push(new ih(l,Oc(h))),i+=2):(r.push(new ih(l,{})),i++)}return new Gt(r,{})}function NR(n){const e={};return Nr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wv(new Gt([],{}),0,t))}),e}function Oc(n){const e={};return Nr(n,(t,r)=>e[r]=`${t}`),e}function Ev(n,e,t){return n==t.path&&ea(e,t.parameters)}class ta{constructor(e,t){this.id=e,this.url=t}}class lh extends ta{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ui extends ta{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ep extends ta{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xI extends ta{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Iv extends ta{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ou extends ta{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cv extends ta{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class MI extends ta{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bv extends ta{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RR{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class NI{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OR{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bm{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jm{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dv{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hm{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class XT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Av(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Av(e,this._root).map(t=>t.value)}}function Sv(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sv(n,t);if(r)return r}return null}function Av(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Av(n,t);if(r.length)return r.unshift(e),r}return[]}class au{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ch(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xv extends XT{constructor(e,t){super(e),this.snapshot=t,OI(this,e)}toString(){return this.snapshot.toString()}}function eS(n,e){const t=function tS(n,e){const l=new $m([],{},{},"",{},jt,e,null,n.root,-1,{});return new Gm("",new au(l,[]))}(n,e),r=new zs([new ih("",{})]),i=new zs({}),a=new zs({}),l=new zs({}),h=new zs(""),y=new dh(r,i,l,h,a,jt,e,t.root);return y.snapshot=t.root,new xv(new au(y,[]),t)}class dh{constructor(e,t,r,i,a,l,h,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,at.U)(w=>w[rh]))??rt(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>xc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>xc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function RI(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class $m{constructor(e,t,r,i,a,l,h,y,w,D,S,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.[rh],this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=D,this._correctedLastPathIndex=O??D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gm extends XT{constructor(e,t){super(t),this.url=e,OI(this,t)}toString(){return nS(this._root)}}function OI(n,e){e.value._routerState=n,e.children.forEach(t=>OI(n,t))}function nS(n){const e=n.children.length>0?` { ${n.children.map(nS).join(", ")} } `:"";return`${n.value}${e}`}function PI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ea(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ea(e.params,t.params)||n.params.next(t.params),function pp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ea(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ea(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kI(n,e){const t=ea(n.params,e.params)&&function zT(n,e){return Nc(n,e)&&n.every((t,r)=>ea(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kI(n.parent,e.parent))}function Wm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function kR(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wm(n,r,i);return Wm(n,r)})}(n,e,t);return new au(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Wm(n,h)),l}}const r=function FR(n){return new dh(new zs(n.url),new zs(n.params),new zs(n.queryParams),new zs(n.fragment),new zs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Wm(n,a));return new au(r,i)}}const FI="ngNavigationCancelingError";function rS(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=sh(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uu(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function uu(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[FI]=!0,r.cancellationCode=e,t&&(r.url=t),r}function zm(n){return LI(n)&&sh(n.url)}function LI(n){return n&&n[FI]}class VI{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Pc,this.attachRef=null}}let Pc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new VI,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ip=!1;let Cp=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=i||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Ip);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Ip);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Ip);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,Ip);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,y=new iS(t,h,i.injector);if(r&&function El(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,y)}else this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Pc),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class iS{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===dh?this.route:e===Pc?this.childContexts:this.parent.get(e,t)}}let qm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Cp],encapsulation:2}),n})();function UI(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function bp(n){const e=n.children&&n.children.map(bp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=qm),t}function Li(n){return n.outlet||jt}function Rv(n,e){const t=n.filter(r=>Li(r)===e);return t.push(...n.filter(r=>Li(r)!==e)),t}function gh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Pv{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),PI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ch(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Nr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ch(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ch(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ch(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Dv(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Bm(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(PI(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),PI(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=gh(i.snapshot),y=h?.get(m._Vd)??null;l.attachRef=null,l.route=i,l.resolver=y,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class kv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class mh{constructor(e,t){this.component=e,this.route=t}}function oS(n,e,t){const r=n._root;return _h(r,e?e._root:null,t,[r.value])}function yh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function _h(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ch(e);return n.children.forEach(l=>{(function aS(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const y=function BI(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Nc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nc(n.url,e.url)||!ea(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kI(n,e)||!ea(n.queryParams,e.queryParams);default:return!kI(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new kv(r)):(a.data=l.data,a._resolvedData=l._resolvedData),_h(n,e,a.component?h?h.children:null:t,r,i),y&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new mh(h.outlet.component,l))}else l&&vh(e,h,i),i.canActivateChecks.push(new kv(r)),_h(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Nr(a,(l,h)=>vh(l,t.getContext(h),i)),i}function vh(n,e,t){const r=ch(n),i=n.value;Nr(r,(a,l)=>{vh(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new mh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Dp(n){return"function"==typeof n}function Lv(n){return n instanceof nu||"EmptyError"===n?.name}const Km=Symbol("INITIAL_VALUE");function kc(){return Mr(n=>iI(n.map(e=>e.pipe(th(1),fp(Km)))).pipe((0,at.U)(e=>{for(const t of e)if(!0!==t){if(t===Km)return Km;if(!1===t||t instanceof Mc)return t}return!0}),Qi(e=>e!==Km),th(1)))}function WI(n){return(0,BT.z)((0,Fi.b)(e=>{if(sh(e))throw rS(0,e)}),(0,at.U)(e=>!0===e))}const zI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Uv(n,e,t,r,i){const a=Bv(n,e,t);return a.matched?function mS(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?rt(i.map(l=>{const h=yh(l,n);return su(function Fv(n){return n&&Dp(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(kc(),WI()):rt(!0)}(r=UI(e,r),e,t).pipe((0,at.U)(l=>!0===l?a:{...zI})):rt(a)}function Bv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...zI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||dv)(t,n,e);if(!i)return{...zI};const a={};Nr(i.posParams,(h,y)=>{a[y]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Zm(n,e,t,r,i="corrected"){if(t.length>0&&function _S(n,e,t){return t.some(r=>Fc(n,e,r)&&Li(r)!==jt)}(n,t,r)){const l=new Gt(e,function jv(n,e,t,r){const i={};i[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Li(a)!==jt){const l=new Gt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Li(a)]=l}return i}(n,e,r,new Gt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function vS(n,e,t){return t.some(r=>Fc(n,e,r))}(n,t,r)){const l=new Gt(n.segments,function yS(n,e,t,r,i,a){const l={};for(const h of r)if(Fc(n,t,h)&&!i[Li(h)]){const y=new Gt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Li(h)]=y}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Gt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Fc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ym(n,e,t,r){return!!(Li(n)===r||r!==jt&&Fc(e,t,n))&&("**"===n.path||Bv(e,n,t).matched)}function Tp(n,e,t){return 0===e.length&&!n.children[t]}const Hv=!1;class wh{constructor(e){this.segmentGroup=e||null}}class wS{constructor(e){this.urlTree=e}}function Eh(n){return eh(new wh(n))}function $v(n){return eh(new wS(n))}class lu{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Zm(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,jt).pipe((0,at.U)(a=>this.createUrlTree(Lm(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Do(a=>{if(a instanceof wS)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof wh?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,jt).pipe((0,at.U)(i=>this.createUrlTree(Lm(i),e.queryParams,e.fragment))).pipe(Do(i=>{throw i instanceof wh?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,Hv)}createUrlTree(e,t,r){const i=EI(e);return new Mc(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(a=>new Gt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,dn.D)(i).pipe(Jo(a=>{const l=r.children[a],h=Rv(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,at.U)(y=>({segment:y,outlet:a})))}),wl((a,l)=>(a[l.outlet]=l.segment,a),{}),uv())}expandSegment(e,t,r,i,a,l){return(0,dn.D)(r).pipe(Jo(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Do(w=>{if(w instanceof wh)return rt(null);throw w}))),iu(h=>!!h),Do((h,y)=>{if(Lv(h))return Tp(t,i,a)?rt(new Gt([],{})):Eh(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return Ym(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Eh(t):Eh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$v(a):this.lineralizeSegments(r,a).pipe((0,Wr.z)(l=>{const h=new Gt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:y,remainingSegments:w,positionalParamSegments:D}=Bv(t,i,a);if(!h)return Eh(t);const S=this.applyRedirectCommands(y,i.redirectTo,D);return i.redirectTo.startsWith("/")?$v(S):this.lineralizeSegments(i,S).pipe((0,Wr.z)(O=>this.expandSegment(e,t,r,O.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=UI(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,at.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Gt(i,{})))):rt(new Gt(i,{}))):Uv(t,r,i,e).pipe(Mr(({matched:l,consumedSegments:h,remainingSegments:y})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Wr.z)(D=>{const S=D.injector??e,O=D.routes,{segmentGroup:V,slicedSegments:H}=Zm(t,h,y,O),ge=new Gt(V.segments,V.children);if(0===H.length&&ge.hasChildren())return this.expandChildren(S,O,ge).pipe((0,at.U)(Dt=>new Gt(h,Dt)));if(0===O.length&&0===H.length)return rt(new Gt(h,{}));const be=Li(r)===a;return this.expandSegment(S,ge,O,H,be?jt:a,!0).pipe((0,at.U)(gt=>new Gt(h.concat(gt.segments),gt.children)))})):Eh(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Vv(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?rt(!0):rt(i.map(l=>{const h=yh(l,n);return su(function jI(n){return n&&Dp(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(kc(),WI())}(e,t,r).pipe((0,Wr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Fi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function KI(n){return eh(uu(Hv,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[jt])return eh(new m.vHH(4e3,Hv));i=i.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Mc(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Nr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Nr(t.children,(h,y)=>{l[y]=this.createSegmentGroup(e,h,r,i)}),new Gt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,Hv);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Sp{}class ZI{constructor(e,t,r,i,a,l,h,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=y}recognize(){const e=Zm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jt).pipe((0,at.U)(t=>{if(null===t)return null;const r=new $m([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new au(r,t),a=new Gm(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Mv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,dn.D)(Object.keys(r.children)).pipe(Jo(i=>{const a=r.children[i],l=Rv(t,i);return this.processSegmentGroup(e,l,a,i)}),wl((i,a)=>i&&a?(i.push(...a),i):null),function lv(n,e=!1){return(0,ai.e)((t,r)=>{let i=0;t.subscribe((0,ir.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),Xo(null),uv(),(0,at.U)(i=>{if(null===i)return null;const a=YI(i);return function IS(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,dn.D)(t).pipe(Jo(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),iu(l=>!!l),Do(l=>{if(Lv(l))return Tp(r,i,a)?rt([]):rt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Ym(t,r,i,a))return rt(null);let l;if("**"===t.path){const h=i.length>0?dI(i).parameters:{},y=bS(r)+i.length;l=rt({snapshot:new $m(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,XI(t),Li(t),t.component??t._loadedComponent??null,t,QI(r),y,eC(t),y),consumedSegments:[],remainingSegments:[]})}else l=Uv(r,t,i,e).pipe((0,at.U)(({matched:h,consumedSegments:y,remainingSegments:w,parameters:D})=>{if(!h)return null;const S=bS(r)+y.length;return{snapshot:new $m(y,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,XI(t),Li(t),t.component??t._loadedComponent??null,t,QI(r),S,eC(t),S),consumedSegments:y,remainingSegments:w}}));return l.pipe(Mr(h=>{if(null===h)return rt(null);const{snapshot:y,consumedSegments:w,remainingSegments:D}=h;e=t._injector??e;const S=t._loadedInjector??e,O=function CS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:H}=Zm(r,w,D,O.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution);if(0===H.length&&V.hasChildren())return this.processChildren(S,O,V).pipe((0,at.U)(be=>null===be?null:[new au(y,be)]));if(0===O.length&&0===H.length)return rt([new au(y,[])]);const ge=Li(t)===a;return this.processSegment(S,O,V,H,ge?jt:a).pipe((0,at.U)(be=>null===be?null:[new au(y,be)]))}))}}function Ap(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function YI(n){const e=[],t=new Set;for(const r of n){if(!Ap(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=YI(r.children);e.push(new au(r.value,i))}return e.filter(r=>!t.has(r))}function QI(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bS(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function XI(n){return n.data||{}}function eC(n){return n.resolve||{}}function nC(n){return"string"==typeof n.title||null===n.title}function Kv(n){return Mr(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,at.U)(()=>e)):rt(e)})}let rC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===jt);return r}getResolvedTitleForRoute(t){return t.data[rh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(iC)},providedIn:"root"}),n})(),iC=(()=>{class n extends rC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ds))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Vc{}class xp extends class $R{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Jm=new m.OlP("",{providedIn:"root",factory:()=>({})}),Yv=new m.OlP("ROUTES");let Ks=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=su(t.loadComponent()).pipe((0,Fi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),nh(()=>{this.componentLoaders.delete(t)})),i=new aI(r,()=>new bo.x).pipe(hp());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,at.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,w,D=!1;Array.isArray(h)?w=h:(y=h.create(t).injector,w=cI(y.get(Yv,[],m.XFs.Self|m.XFs.Optional)));return{routes:w.map(bp),injector:y}}),nh(()=>{this.childrenLoaders.delete(r)})),l=new aI(a,()=>new bo.x).pipe(hp());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return su(t()).pipe((0,Wr.z)(r=>r instanceof m.YKP||Array.isArray(r)?rt(r):(0,dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Mp{}class _i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ey(n){throw n}function Zs(n,e,t){return e.parse("/")}const Qv={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ih={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Uc(){const n=(0,m.f3M)(Ot),e=(0,m.f3M)(Pc),t=(0,m.f3M)(xe),r=(0,m.f3M)(m.zs3),i=(0,m.f3M)(m.Sil),a=(0,m.f3M)(Yv,{optional:!0})??[],l=(0,m.f3M)(Jm,{optional:!0})??{},h=(0,m.f3M)(iC),y=(0,m.f3M)(rC,{optional:!0}),w=(0,m.f3M)(Mp,{optional:!0}),D=(0,m.f3M)(Vc,{optional:!0}),S=new or(null,n,e,t,r,i,cI(a));return w&&(S.urlHandlingStrategy=w),D&&(S.routeReuseStrategy=D),S.titleStrategy=y??h,function Ch(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let or=(()=>{class n{constructor(t,r,i,a,l,h,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bo.x,this.errorHandler=ey,this.malformedUriErrorHandler=Zs,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>rt(void 0),this.urlHandlingStrategy=new _i,this.routeReuseStrategy=new xp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Ks),this.configLoader.onLoadEndListener=O=>this.triggerEvent(new NI(O)),this.configLoader.onLoadStartListener=O=>this.triggerEvent(new RR(O)),this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const S=l.get(m.R0b);this.isNgZoneEnabled=S instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function fI(){return new Mc(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=eS(this.currentUrlTree,this.rootComponentType),this.transitions=new zs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qi(i=>0!==i.id),(0,at.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Mr(i=>{let a=!1,l=!1;return rt(i).pipe((0,Fi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Mr(h=>{const y=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Bc(h.source)&&(this.browserUrlTree=h.extractedUrl),rt(h).pipe(Mr(S=>{const O=this.transitions.getValue();return r.next(new lh(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),O!==this.transitions.getValue()?ru.E:Promise.resolve(S)}),function Qm(n,e,t,r){return Mr(i=>function Gv(n,e,t,r,i){return new lu(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,at.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Fi.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function tC(n,e,t,r,i,a){return(0,Wr.z)(l=>function Wv(n,e,t,r,i,a,l="emptyOnly",h="legacy"){return new ZI(n,e,t,r,i,l,h,a).recognize().pipe(Mr(y=>null===y?function ES(n){return new br.y(e=>e.error(n))}(new Sp):rt(y)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,at.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Fi.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const O=new Iv(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(O)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:V,source:H,restoredState:ge,extras:be}=h,Ye=new lh(O,this.serializeUrl(V),H,ge);r.next(Ye);const gt=eS(V,this.rootComponentType).snapshot;return rt(i={...h,targetSnapshot:gt,urlAfterRedirects:V,extras:{...be,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),ru.E}),(0,Fi.b)(h=>{const y=new ou(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(y)}),(0,at.U)(h=>i={...h,guards:oS(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function hS(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?rt({...t,guardsResult:!0}):function HI(n,e,t,r){return(0,dn.D)(n).pipe((0,Wr.z)(i=>function na(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?rt(a.map(h=>{const y=gh(e)??i,w=yh(h,y);return su(function lS(n){return n&&Dp(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):y.runInContext(()=>w(n,e,t,r))).pipe(iu())})).pipe(kc()):rt(!0)}(i.component,i.route,t,e,r)),iu(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Wr.z)(h=>h&&function vs(n){return"boolean"==typeof n}(h)?function fS(n,e,t,r){return(0,dn.D)(e).pipe(Jo(i=>sv(function $I(n,e){return null!==n&&e&&e(new OR(n)),rt(!0)}(i.route.parent,r),function pS(n,e){return null!==n&&e&&e(new jm(n)),rt(!0)}(i.route,r),function gS(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function BR(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>oI(()=>rt(l.guards.map(y=>{const w=gh(l.node)??t,D=yh(y,w);return su(function jR(n){return n&&Dp(n.canActivateChild)}(D)?D.canActivateChild(r,n):w.runInContext(()=>D(r,n))).pipe(iu())})).pipe(kc())));return rt(a).pipe(kc())}(n,i.path,t),function GI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(a=>oI(()=>{const l=gh(e)??t,h=yh(a,l);return su(function uS(n){return n&&Dp(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(iu())}));return rt(i).pipe(kc())}(n,i.route,t))),iu(i=>!0!==i,!0))}(r,a,n,e):rt(h)),(0,at.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Fi.b)(h=>{if(i.guardsResult=h.guardsResult,sh(h.guardsResult))throw rS(0,h.guardsResult);const y=new Cv(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(y)}),Qi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),Kv(h=>{if(h.guards.canActivateChecks.length)return rt(h).pipe((0,Fi.b)(y=>{const w=new MI(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),Mr(y=>{let w=!1;return rt(y).pipe(function zv(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);let a=0;return(0,dn.D)(i).pipe(Jo(l=>function DS(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!nC(i)&&(a[rh]=i.title),function qv(n,e,t,r){const i=function TS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return rt({});const a={};return(0,dn.D)(i).pipe((0,Wr.z)(l=>function SS(n,e,t,r){const i=gh(e)??r,a=yh(n,i);return su(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(iu(),(0,Fi.b)(h=>{a[l]=h}))),Nm(1),function lI(n){return(0,at.U)(()=>n)}(a),Do(l=>Lv(l)?ru.E:eh(l)))}(a,n,e,r).pipe((0,at.U)(l=>(n._resolvedData=l,n.data=Mv(n,t).resolve,i&&nC(i)&&(n.data[rh]=i.title),null)))}(l.route,r,n,e)),(0,Fi.b)(()=>a++),Nm(1),(0,Wr.z)(l=>a===i.length?rt(t):ru.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Fi.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,Fi.b)(y=>{const w=new bv(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),Kv(h=>{const y=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Fi.b)(S=>{w.component=S}),(0,at.U)(()=>{})));for(const S of w.children)D.push(...y(S));return D};return iI(y(h.targetSnapshot.root)).pipe(Xo(),th(1))}),Kv(()=>this.afterPreactivation()),(0,at.U)(h=>{const y=function PR(n,e,t){const r=Wm(n,e._root,t?t._root:void 0);return new xv(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:y}}),(0,Fi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new Pv(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Fi.b)({next(){a=!0},complete(){a=!0}}),nh(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Do(h=>{if(l=!0,LI(h)){zm(h)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Ep(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(y),zm(h)){const w=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Bc(i.source)};this.scheduleNavigation(w,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new xI(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return ru.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(bp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:y}=r,w=i||this.routerState.root,D=y?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Vm(w,this.currentUrlTree,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=sh(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function bh(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Qv}:!1===r?{...Ih}:r,sh(t))return pI(this.currentUrlTree,t,i);const a=this.parseUrl(t);return pI(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ui(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,y,w;l?(h=l.resolve,y=l.reject,w=l.promise):w=new Promise((O,V)=>{h=O,y=V});const D=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:D,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Ep(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return Uc()},providedIn:"root"}),n})();function Bc(n){return"imperative"!==n}let cu=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new bo.x,this.subscription=t.events.subscribe(a=>{a instanceof ui&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){return!!(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(or),m.Y36(dh),m.Y36(ye))},n.\u0275dir=m.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)("href",r.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})();class Jv{}let oC=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Qi(t=>t instanceof ui),Jo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,dn.D)(i).pipe((0,dp.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const a=i.pipe((0,Wr.z)(l=>null===l?rt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,dn.D)([a,l]).pipe((0,dp.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(or),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(Jv),m.LFG(Ks))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ty=new m.OlP("");let Xv=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ui&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Hm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Th(n,e){return{\u0275kind:n,\u0275providers:e}}function ny(n){return[{provide:Yv,multi:!0,useValue:n}]}function uC(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(or),i=n.get(ry);1===n.get(Rp)&&r.initialNavigation(),n.get(oy,null,m.XFs.Optional)?.setUpPreloading(),n.get(ty,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const ry=new m.OlP("",{factory:()=>new bo.x}),Rp=new m.OlP("",{providedIn:"root",factory:()=>1});const oy=new m.OlP("");function OS(n){return Th(0,[{provide:oy,useExisting:oC},{provide:Jv,useExisting:n}])}const ew=new m.OlP("ROUTER_FORROOT_GUARD"),tw=[xe,{provide:Ot,useClass:Om},{provide:or,useFactory:Uc},Pc,{provide:dh,useFactory:function aC(n){return n.routerState.root},deps:[or]},Ks];function cC(){return new m.PXZ("Router",or)}let nw=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[tw,[],ny(t),{provide:ew,useFactory:hC,deps:[[or,new m.FiY,new m.tp0]]},{provide:Jm,useValue:r||{}},r?.useHash?{provide:ye,useClass:st}:{provide:ye,useClass:Je},{provide:ty,useFactory:()=>{const n=(0,m.f3M)(or),e=(0,m.f3M)(Su),t=(0,m.f3M)(Jm);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Xv(n,e,t)}},r?.preloadingStrategy?OS(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:cC},r?.initialNavigation?fC(r):[],[{provide:iw,useFactory:uC},{provide:m.tb,multi:!0,useExisting:iw}]]}}static forChild(t){return{ngModule:n,providers:[ny(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ew,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[qm]}),n})();function hC(n){return"guarded"}function fC(n){return["disabled"===n.initialNavigation?Th(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(or);return()=>{e.setUpLocationChangeListener()}}},{provide:Rp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Th(2,[{provide:Rp,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get($,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(or),h=e.get(ry);(function i(a){e.get(or).events.pipe(Qi(h=>h instanceof ui||h instanceof Ep||h instanceof xI),(0,at.U)(h=>h instanceof ui||h instanceof Ep&&(0===h.code||1===h.code)&&null),Qi(h=>null!==h),th(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||h.closed?rt(void 0):h),l.initialNavigation()}))}}]).\u0275providers:[]]}const iw=new m.OlP("");let FS=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-header"]],decls:12,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark","navbar-expand-lg"],[1,"container-fluid"],[1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLink","/",1,"nav-link"],["routerLink","Todo",1,"nav-link"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),m._uU(3,"ToDo App"),m.qZA(),m.TgZ(4,"button",3),m._UZ(5,"span",4),m.qZA(),m.TgZ(6,"div",5)(7,"div",6)(8,"a",7),m._uU(9,"Home"),m.qZA(),m.TgZ(10,"a",8),m._uU(11,"Todos"),m.qZA()()()()())},dependencies:[cu]}),n})(),LS=(()=>{class n{constructor(){this.title="To_Do_List"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&m._UZ(0,"app-header")(1,"router-outlet")},dependencies:[Cp,FS],styles:[".text-block[_ngcontent-%COMP%]{position:static;bottom:20px;right:20px;background-color:#202ae8;color:#fff;padding-left:20px;padding-right:20px}"]}),n})(),gC=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:0,consts:[[1,"centered"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"h1"),m._uU(2,"Welcome to my Todos App"),m.qZA()())},styles:[".centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]}),n})();var ay=L(4986),Fn=L(5813);function uy(){return(0,ai.e)((n,e)=>{let t,r=!1;n.subscribe((0,ir.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function sw(n,e=vl.y){return n=n??mC,(0,ai.e)((t,r)=>{let i,a=!0;t.subscribe((0,ir.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function mC(n,e){return n===e}var lt,vi=L(2011),ow=(L(9545),L(3942)),_e=L(5861),ia=L(9681),du=L(4859),To=L(1877),P=L(2090),US=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tn={},aw=aw||{},Pt=US||self;function Op(){}function ly(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ah(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Cl="closure_uid_"+(1e9*Math.random()>>>0),BS=0;function jS(n,e,t){return n.call.apply(n.bind,arguments)}function _C(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function wi(n,e,t){return(wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jS:_C).apply(null,arguments)}function Pp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ei(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function hu(){this.s=this.s,this.o=this.o}var sa={};hu.prototype.s=!1,hu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function yC(n){return Object.prototype.hasOwnProperty.call(n,Cl)&&n[Cl]||(n[Cl]=++BS)}(this);delete sa[n]}},hu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function lw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function So(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ly(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function An(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}An.prototype.h=function(){this.defaultPrevented=!0};var Ao=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",Op,e),Pt.removeEventListener("test",Op,e)}catch{}return n}();function kp(n){return/^[\s\xa0]*$/.test(n)}var cw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function dw(n,e){return n<e?-1:n>e?1:0}function cy(){var n=Pt.navigator;return n&&(n=n.userAgent)?n:""}function oa(n){return-1!=cy().indexOf(n)}function hw(n){return hw[" "](n),n}hw[" "]=Op;var dy,n,Fp=oa("Opera"),xh=oa("Trident")||oa("MSIE"),pw=oa("Edge"),gw=pw||xh,mw=oa("Gecko")&&!(-1!=cy().toLowerCase().indexOf("webkit")&&!oa("Edge"))&&!(oa("Trident")||oa("MSIE"))&&!oa("Edge"),wC=-1!=cy().toLowerCase().indexOf("webkit")&&!oa("Edge");function Lp(){var n=Pt.document;return n?n.documentMode:void 0}e:{var hy="",fy=(n=cy(),mw?/rv:([^\);]+)(\)|;)/.exec(n):pw?/Edge\/([\d\.]+)/.exec(n):xh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):wC?/WebKit\/(\S+)/.exec(n):Fp?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(fy&&(hy=fy?fy[1]:""),xh){var Vp=Lp();if(null!=Vp&&Vp>parseFloat(hy)){dy=String(Vp);break e}}dy=hy}var yw={};var IC=Pt.document&&xh&&(Lp()||parseInt(dy,10))||void 0;function Mh(n,e){if(An.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(mw){e:{try{hw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:CC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Mh.X.h.call(this)}}Ei(Mh,An);var CC={2:"touch",3:"pen",4:"mouse"};Mh.prototype.h=function(){Mh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Nh="closure_listenable_"+(1e6*Math.random()|0),bC=0;function DC(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++bC,this.ba=this.ea=!1}function gy(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function vw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function TC(n){const e={};for(const t in n)e[t]=n[t];return e}const SC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<SC.length;a++)t=SC[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function my(n){this.src=n,this.g={},this.h=0}function ww(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=vC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(gy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ew(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}my.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ew(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new DC(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Iw="closure_lm_"+(1e6*Math.random()|0),Cw={};function xC(n,e,t,r,i){if(r&&r.once)return NC(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)xC(n,e[a],t,r,i);return null}return t=vy(t),n&&n[Nh]?n.N(e,t,Ah(r)?!!r.capture:!!r,i):MC(n,e,t,!1,r,i)}function MC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Ah(i)?!!i.capture:!!i,h=yy(n);if(h||(n[Iw]=h=new my(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function HS(){const e=PC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ao||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(OC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function NC(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)NC(n,e[a],t,r,i);return null}return t=vy(t),n&&n[Nh]?n.O(e,t,Ah(r)?!!r.capture:!!r,i):MC(n,e,t,!0,r,i)}function RC(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)RC(n,e[a],t,r,i);else r=Ah(r)?!!r.capture:!!r,t=vy(t),n&&n[Nh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ew(a=n.g[e],t,r,i))&&(gy(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=yy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ew(e,t,r,i)),(t=-1<n?e[n]:null)&&bw(t))}function bw(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Nh])ww(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(OC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=yy(e))?(ww(t,n),0==t.h&&(t.src=null,e[Iw]=null)):gy(n)}}}function OC(n){return n in Cw?Cw[n]:Cw[n]="on"+n}function PC(n,e){if(n.ba)n=!0;else{e=new Mh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&bw(n),n=t.call(r,e)}return n}function yy(n){return(n=n[Iw])instanceof my?n:null}var _y="__closure_events_fn_"+(1e9*Math.random()>>>0);function vy(n){return"function"==typeof n?n:(n[_y]||(n[_y]=function(e){return n.handleEvent(e)}),n[_y])}function Rr(){hu.call(this),this.i=new my(this),this.P=this,this.I=null}function qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new An(e,n);else if(e instanceof An)e.target=e.target||n;else{var i=e;AC(e=new An(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Up(l,r,!0,e)&&i}if(i=Up(l=e.g=n,r,!0,e)&&i,i=Up(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Up(l=e.g=t[a],r,!1,e)&&i}function Up(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,y=l.ha||l.src;l.ea&&ww(n.i,l),i=!1!==h.call(y,r)&&i}}return i&&!r.defaultPrevented}Ei(Rr,hu),Rr.prototype[Nh]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){RC(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gy(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var wy=Pt.JSON.stringify;function kC(){var n=GS;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bl,Dw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new jc,n=>n.reset());class jc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $S(n){Pt.setTimeout(()=>{throw n},0)}function LC(n,e){bl||function zR(){var n=Pt.Promise.resolve(void 0);bl=function(){n.then(VC)}}(),Bp||(bl(),Bp=!0),GS.add(n,e)}var Bp=!1,GS=new class FC{constructor(){this.h=this.g=null}add(e,t){const r=Dw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function VC(){for(var n;n=kC();){try{n.h.call(n.g)}catch(t){$S(t)}var e=Dw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Bp=!1}function jp(n,e){Rr.call(this),this.h=n||1,this.g=e||Pt,this.j=wi(this.lb,this),this.l=Date.now()}function UC(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function wt(n,e,t){if("function"==typeof n)t&&(n=wi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function BC(n){n.g=wt(()=>{n.g=null,n.i&&(n.i=!1,BC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ei(jp,Rr),(lt=jp.prototype).ca=!1,lt.R=null,lt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),qr(this,"tick"),this.ca&&(UC(this),this.start()))}},lt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){jp.X.M.call(this),UC(this),delete this.g};class WS extends hu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:BC(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hp(n){hu.call(this),this.h=n,this.g={}}Ei(Hp,hu);var Hc=[];function jC(n,e,t,r){Array.isArray(t)||(t&&(Hc[0]=t.toString()),t=Hc);for(var i=0;i<t.length;i++){var a=xC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function $p(n){vw(n.g,function(e,t){this.g.hasOwnProperty(t)&&bw(e)},n),n.g={}}function $c(){this.g=!0}function Gc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function zS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return wy(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Hp.prototype.M=function(){Hp.X.M.call(this),$p(this)},Hp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$c.prototype.Aa=function(){this.g=!1},$c.prototype.info=function(){};var Dl={},Tw=null;function Gp(){return Tw=Tw||new Rr}function Sw(n){An.call(this,Dl.Pa,n)}function Wp(n){const e=Gp();qr(e,new Sw(e,n))}function $C(n,e){An.call(this,Dl.STAT_EVENT,n),this.stat=e}function Vi(n){const e=Gp();qr(e,new $C(e,n))}function Rh(n,e){An.call(this,Dl.Qa,n),this.size=e}function zp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}Dl.Pa="serverreachability",Ei(Sw,An),Dl.STAT_EVENT="statevent",Ei($C,An),Dl.Qa="timingevent",Ei(Rh,An);var Ey={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},GC={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Oh(){}function xw(){}Oh.prototype.h=null;var zc,Ph={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Mw(){An.call(this,"d")}function Wc(){An.call(this,"c")}function Iy(){}function qp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Hp(this),this.O=zC,this.T=new jp(n=gw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new WC}function WC(){this.i=null,this.g="",this.h=!1}Ei(Mw,An),Ei(Wc,An),Ei(Iy,Oh),Iy.prototype.g=function(){return new XMLHttpRequest},Iy.prototype.i=function(){return{}},zc=new Iy;var zC=45e3,Cy={},Kp={};function Nw(n,e,t){n.K=1,n.v=Tl(fu(e)),n.s=t,n.P=!0,Rw(n,null)}function Rw(n,e){n.F=Date.now(),by(n),n.A=fu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),eb(t.i,"t",r),n.C=0,t=n.l.H,n.h=new WC,n.g=vb(n.l,t?e:null,!n.s),0<n.N&&(n.L=new WS(wi(n.La,n,n.g),n.N)),jC(n.S,n.g,"readystatechange",n.ib),e=n.H?TC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Wp(1),function ar(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),y=0;y<h.length;y++){var w=h[y].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function qC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function KC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=KR(n,t),i==Kp){4==e&&(n.o=4,Vi(14),r=!1),Gc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Cy){n.o=4,Vi(15),Gc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Gc(n.j,n.m,i,null),Pw(n,i)}qC(n)&&i!=Kp&&i!=Cy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),gb(e),e.K=!0,Vi(11))):(Gc(n.j,n.m,t,"[Invalid Chunked Response]"),aa(n),kh(n))}function KR(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Kp:(t=Number(e.substring(t,r)),isNaN(t)?Cy:(r+=1)+t>e.length?Kp:(e=e.substr(r,t),n.C=r+t,e))}function by(n){n.V=Date.now()+n.O,qS(n,n.O)}function qS(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zp(wi(n.gb,n),e)}function Ow(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function kh(n){0==n.l.G||n.I||mb(n.l,n)}function aa(n){Ow(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,UC(n.T),$p(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Pw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Bw(t.h,n)))if(!n.J&&Bw(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ny(t),tg(t)}My(t),Vi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=zp(wi(t.cb,t),6e3));if(1>=nb(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Bh(t,11)}else if((n.J||t.g==n)&&Ny(t),!kp(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const D=w[3];null!=D&&(t.ma=D,t.j.info("VER="+t.ma));const S=w[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const O=w[5];null!=O&&"number"==typeof O&&0<O&&(t.J=r=1.5*O,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const H=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var a=r.h;a.g||-1==H.indexOf("spdy")&&-1==H.indexOf("quic")&&-1==H.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(jw(a,a.h),a.h=null))}if(r.D){const ge=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ge&&(r.za=ge,Hn(r.F,r.D,ge))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=_b(r,r.H?r.ka:null,r.V),l.J){rb(r.h,l);var h=l,y=r.J;y&&h.setTimeout(y),h.B&&(Ow(h),by(h)),r.g=l}else pb(r);0<t.i.length&&ng(t)}else"stop"!=w[0]&&"close"!=w[0]||Bh(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Bh(t,7):eg(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Wp(4)}catch{}}function Fh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ly(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ZC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ly(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function KS(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ly(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(lt=qp.prototype).setTimeout=function(n){this.O=n},lt.ib=function(n){n=n.target;const e=this.L;e&&3==ua(n)?e.l():this.La(n)},lt.La=function(n){try{if(n==this.g)e:{const D=ua(this.g);var e=this.g.Ea();const S=this.g.aa();if(!(3>D)&&(3!=D||gw||this.g&&(this.h.h||this.g.fa()||xy(this.g)))){this.I||4!=D||7==e||Wp(8==e||0>=S?3:2),Ow(this);var t=this.g.aa();this.Y=t;t:if(qC(this)){var r=xy(this.g);n="";var i=r.length,a=4==ua(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){aa(this),kh(this);var l="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function qR(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,D,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,y=this.g;if((h=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kp(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Vi(12),aa(this),kh(this);break e}Gc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pw(this,t)}this.P?(KC(this,D,l),gw&&this.i&&3==D&&(jC(this.S,this.T,"tick",this.hb),this.T.start())):(Gc(this.j,this.m,l,null),Pw(this,l)),4==D&&aa(this),this.i&&!this.I&&(4==D?mb(this.l,this):(this.i=!1,by(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Vi(12)):(this.o=0,Vi(13)),aa(this),kh(this)}}}catch{}},lt.hb=function(){if(this.g){var n=ua(this.g),e=this.g.fa();this.C<e.length&&(Ow(this),KC(this,n,e),this.i&&4!=n&&by(this))}},lt.cancel=function(){this.I=!0,aa(this)},lt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function HC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Wp(3),Vi(17)),aa(this),this.o=2,kh(this)):qS(this,this.V-n)};var YC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof qc){this.h=void 0!==e?e:n.h,Dy(this,n.j),this.s=n.s,this.g=n.g,Zp(this,n.m),this.l=n.l,e=n.i;var t=new Qp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),QC(this,t),this.o=n.o}else n&&(t=String(n).match(YC))?(this.h=!!e,Dy(this,t[1]||"",!0),this.s=Yp(t[2]||""),this.g=Yp(t[3]||"",!0),Zp(this,t[4]),this.l=Yp(t[5]||"",!0),QC(this,t[6]||"",!0),this.o=Yp(t[7]||"")):(this.h=!!e,this.i=new Qp(null,this.h))}function fu(n){return new qc(n)}function Dy(n,e,t){n.j=t?Yp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function QC(n,e,t){e instanceof Qp?(n.i=e,function Vw(n,e){e&&!n.j&&(pu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Lw(this,r),eb(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Lh(e,JS)),n.i=new Qp(e,n.h))}function Hn(n,e,t){n.i.set(e,t)}function Tl(n){return Hn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,YS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function YS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lh(e,kw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Lh(e,kw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Lh(t,"/"==t.charAt(0)?JC:QS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lh(t,Fw)),n.join("")};var kw=/[#\/\?@]/g,QS=/[#\?:]/g,JC=/[#\?]/g,JS=/[#\?@]/g,Fw=/#/g;function Qp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pu(n){n.g||(n.g=new Map,n.h=0,n.i&&function ZS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Lw(n,e){pu(n),e=Vh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function XC(n,e){return pu(n),e=Vh(n,e),n.g.has(e)}function eb(n,e,t){Lw(n,e),0<t.length&&(n.i=null,n.g.set(Vh(n,e),lw(t)),n.h+=t.length)}function Vh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Uw(n){this.l=n||eA,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ga&&Pt.g.Ga()&&Pt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=Qp.prototype).add=function(n,e){pu(this),this.i=null,n=Vh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){pu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},lt.oa=function(){pu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},lt.W=function(n){pu(this);let e=[];if("string"==typeof n)XC(this,n)&&(e=e.concat(this.g.get(Vh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},lt.set=function(n,e){return pu(this),this.i=null,XC(this,n=Vh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var eA=10;function tb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function nb(n){return n.h?1:n.g?n.g.size:0}function Bw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function jw(n,e){n.g?n.g.add(e):n.h=e}function rb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ib(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return lw(n.i)}function Hw(){}function sb(){this.g=new Hw}function ob(n,e,t){const r=t||"";try{Fh(n,function(i,a){let l=i;Ah(i)&&(l=wy(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ty(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Uh(n){this.l=n.ac||null,this.j=n.jb||!1}function Sy(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=$w,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Uw.prototype.cancel=function(){if(this.i=ib(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Hw.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},Hw.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},Ei(Uh,Oh),Uh.prototype.g=function(){return new Sy(this.l,this.j)},Uh.prototype.i=function(n){return function(){return n}}({}),Ei(Sy,Rr);var $w=0;function ab(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Kc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zc(n)}function Zc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=Sy.prototype).open=function(n,e){if(this.readyState!=$w)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zc(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kc(this)),this.readyState=$w},lt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zc(this)),this.g&&(this.readyState=3,Zc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ab(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},lt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Kc(this):Zc(this),3==this.readyState&&ab(this)}},lt.Va=function(n){this.g&&(this.response=this.responseText=n,Kc(this))},lt.Ua=function(n){this.g&&(this.response=n,Kc(this))},lt.ga=function(){this.g&&Kc(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Sy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ub=Pt.JSON.parse;function $n(n){Rr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lb,this.K=this.L=!1}Ei($n,Rr);var lb="",nA=/^https?$/i,Gw=["POST","PUT"];function Ww(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Yc(n),Ay(n)}function Yc(n){n.D||(n.D=!0,qr(n,"complete"),qr(n,"error"))}function zw(n){if(n.h&&typeof aw<"u"&&(!n.C[1]||4!=ua(n)||2!=n.aa()))if(n.v&&4==ua(n))wt(n.Ha,0,n);else if(qr(n,"readystatechange"),4==ua(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(YC)[1]||null;if(!i&&Pt.self&&Pt.self.location){var a=Pt.self.location.protocol;i=a.substr(0,a.length-1)}r=!nA.test(i?i.toLowerCase():"")}t=r}if(t)qr(n,"complete"),qr(n,"success");else{n.m=6;try{var l=2<ua(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Yc(n)}}finally{Ay(n)}}}function Ay(n,e){if(n.g){iA(n);const t=n.g,r=n.C[0]?Op:null;n.g=null,n.C=null,e||qr(n,"ready");try{t.onreadystatechange=r}catch{}}}function iA(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function ua(n){return n.g?n.g.readyState:0}function xy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case lb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function cb(n){let e="";return vw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Jp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=cb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Hn(n,e,t))}function Xp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qw(n){this.Ca=0,this.i=[],this.j=new $c,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Xp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Xp("baseRetryDelayMs",5e3,n),this.bb=Xp("retryDelaySeedMs",1e4,n),this.$a=Xp("forwardChannelMaxRetries",2,n),this.ta=Xp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Uw(n&&n.concurrentRequestLimit),this.Fa=new sb,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function eg(n){if(Kw(n),3==n.G){var e=n.U++,t=fu(n.F);Hn(t,"SID",n.I),Hn(t,"RID",e),Hn(t,"TYPE","terminate"),rg(n,t),(e=new qp(n,n.j,e,void 0)).K=2,e.v=Tl(fu(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vb(e.l,null),e.g.da(e.v)),e.F=Date.now(),by(e)}yb(n)}function tg(n){n.g&&(gb(n),n.g.cancel(),n.g=null)}function Kw(n){tg(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),Ny(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function ng(n){tb(n.h)||n.m||(n.m=!0,LC(n.Ja,n),n.C=0)}function hb(n,e){var t;t=e?e.m:n.U++;const r=fu(n.F);Hn(r,"SID",n.I),Hn(r,"RID",t),Hn(r,"AID",n.T),rg(n,r),n.o&&n.s&&Jp(r,n.o,n.s),t=new qp(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=fb(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),jw(n.h,t),Nw(t,r,e)}function rg(n,e){n.ia&&vw(n.ia,function(t,r){Hn(e,r,t)}),n.l&&Fh({},function(t,r){Hn(e,r,t)})}function fb(n,e,t){t=Math.min(n.i.length,t);var r=n.l?wi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let y=0;y<t;y++){let w=i[y].h;const D=i[y].g;if(w-=a,0>w)a=Math.max(0,i[y].h-100),h=!1;else try{ob(D,l,"req"+w+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function pb(n){n.g||n.u||(n.Z=1,LC(n.Ia,n),n.A=0)}function My(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=zp(wi(n.Ia,n),sA(n,n.A)),n.A++,0))}function gb(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Zw(n){n.g=new qp(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=fu(n.sa);Hn(e,"RID","rpc"),Hn(e,"SID",n.I),Hn(e,"CI",n.L?"0":"1"),Hn(e,"AID",n.T),Hn(e,"TYPE","xmlhttp"),rg(n,e),n.o&&n.s&&Jp(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Tl(fu(e)),t.s=null,t.P=!0,Rw(t,n)}function Ny(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function mb(n,e){var t=null;if(n.g==e){Ny(n),gb(n),n.g=null;var r=2}else{if(!Bw(n.h,e))return;t=e.D,rb(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;qr(r=Gp(),new Rh(r,t,e,i)),ng(n)}else pb(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function db(n,e){return!(nb(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=zp(wi(n.Ja,n,e),sA(n,n.C)),n.C++,0)))}(n,e)||2==r&&My(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Bh(n,5);break;case 4:Bh(n,10);break;case 3:Bh(n,6);break;default:Bh(n,2)}}function sA(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Bh(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=wi(n.kb,n);t||(t=new qc("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||Dy(t,"https"),Tl(t)),function tA(n,e){const t=new $c;if(Pt.Image){const r=new Image;r.onload=Pp(Ty,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Pp(Ty,t,r,"TestLoadImage: error",!1,e),r.onabort=Pp(Ty,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Pp(Ty,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vi(2);n.G=0,n.l&&n.l.va(e),yb(n),Kw(n)}function yb(n){if(n.G=0,n.la=[],n.l){const e=ib(n.h);(0!=e.length||0!=n.i.length)&&(So(n.la,e),So(n.la,n.i),n.h.i.length=0,lw(n.i),n.i.length=0),n.l.ua()}}function _b(n,e,t){var r=t instanceof qc?fu(t):new qc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Zp(r,r.m);else{var i=Pt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new qc(null,void 0);r&&Dy(a,r),e&&(a.g=e),i&&Zp(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Hn(r,t,e),Hn(r,"VER",n.ma),rg(n,r),r}function vb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $n(t&&n.Da&&!n.ra?new Uh({jb:!0}):n.ra)).Ka(n.H),e}function wb(){}function Ry(){if(xh&&!(10<=Number(IC)))throw Error("Environmental error: no available transport.")}function ws(n,e){Rr.call(this),this.g=new qw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!kp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new jh(this)}function Eb(n){Mw.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ib(){Wc.call(this),this.status=1}function jh(n){this.g=n}(lt=$n.prototype).Ka=function(n){this.L=n},lt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zc.g(),this.C=function Aw(n){return n.h||(n.h=n.i())}(this.u?this.u:zc),this.g.onreadystatechange=wi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Ww(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Pt.FormData&&n instanceof Pt.FormData,!(0<=vC(Gw,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{iA(this),0<this.B&&((this.K=function rA(n){return xh&&function EC(){return function fw(n){var e=yw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=cw(String(dy)).split("."),t=cw("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=dw(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||dw(0==i[2].length,0==a[2].length)||dw(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wi(this.qa,this)):this.A=wt(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Ww(this,a)}},lt.qa=function(){typeof aw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qr(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qr(this,"complete"),qr(this,"abort"),Ay(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ay(this,!0)),$n.X.M.call(this)},lt.Ha=function(){this.s||(this.F||this.v||this.l?zw(this):this.fb())},lt.fb=function(){zw(this)},lt.aa=function(){try{return 2<ua(this)?this.g.status:-1}catch{return-1}},lt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ub(e)}},lt.Ea=function(){return this.m},lt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=qw.prototype).ma=8,lt.G=1,lt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new qp(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=TC(a),AC(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=fb(this,i,e),Hn(t=fu(this.F),"RID",n),Hn(t,"CVER",22),this.D&&Hn(t,"X-HTTP-Session-Id",this.D),rg(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(cb(a)))+"&"+e:this.o&&Jp(t,this.o,a)),jw(this.h,i),this.Ya&&Hn(t,"TYPE","init"),this.O?(Hn(t,"$req",e),Hn(t,"SID","null"),i.Z=!0,Nw(i,t,null)):Nw(i,t,e),this.G=2}}else 3==this.G&&(n?hb(this,n):0==this.i.length||tb(this.h)||hb(this))},lt.Ia=function(){if(this.u=null,Zw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=zp(wi(this.eb,this),n)}},lt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vi(10),tg(this),Zw(this))},lt.cb=function(){null!=this.v&&(this.v=null,tg(this),My(this),Vi(19))},lt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Vi(2)):(this.j.info("Failed to ping google.com"),Vi(1))},(lt=wb.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Ra=function(){},Ry.prototype.g=function(n,e){return new ws(n,e)},Ei(ws,Rr),ws.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=_b(n,null,n.V),ng(n)},ws.prototype.close=function(){eg(this.g)},ws.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=wy(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&ng(e)},ws.prototype.M=function(){this.g.l=null,delete this.j,eg(this.g),delete this.g,ws.X.M.call(this)},Ei(Eb,Mw),Ei(Ib,Wc),Ei(jh,wb),jh.prototype.xa=function(){qr(this.g,"a")},jh.prototype.wa=function(n){qr(this.g,new Eb(n))},jh.prototype.va=function(n){qr(this.g,new Ib(n))},jh.prototype.ua=function(){qr(this.g,"b")},Ry.prototype.createWebChannel=Ry.prototype.g,ws.prototype.send=ws.prototype.u,ws.prototype.open=ws.prototype.m,ws.prototype.close=ws.prototype.close,Ey.NO_ERROR=0,Ey.TIMEOUT=8,Ey.HTTP_ERROR=6,GC.COMPLETE="complete",xw.EventType=Ph,Ph.OPEN="a",Ph.CLOSE="b",Ph.ERROR="c",Ph.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,$n.prototype.listenOnce=$n.prototype.O,$n.prototype.getLastError=$n.prototype.Oa,$n.prototype.getLastErrorCode=$n.prototype.Ea,$n.prototype.getStatus=$n.prototype.aa,$n.prototype.getResponseJson=$n.prototype.Sa,$n.prototype.getResponseText=$n.prototype.fa,$n.prototype.send=$n.prototype.da,$n.prototype.setWithCredentials=$n.prototype.Ka;var oA=Tn.createWebChannelTransport=function(){return new Ry},aA=Tn.getStatEventTarget=function(){return Gp()},Yw=Tn.ErrorCode=Ey,ig=Tn.EventType=GC,Cb=Tn.Event=Dl,Qw=Tn.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},bb=Tn.FetchXmlHttpFactory=Uh,sg=Tn.WebChannel=xw,Db=Tn.XhrIo=$n;const Tb="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let og="9.12.1";const Sl=new To.Yd("@firebase/firestore");function Jw(){return Sl.logLevel}function Oe(n,...e){if(Sl.logLevel<=To.in.DEBUG){const t=e.map(Xw);Sl.debug(`Firestore (${og}): ${n}`,...t)}}function wr(n,...e){if(Sl.logLevel<=To.in.ERROR){const t=e.map(Xw);Sl.error(`Firestore (${og}): ${n}`,...t)}}function xo(n,...e){if(Sl.logLevel<=To.in.WARN){const t=e.map(Xw);Sl.warn(`Firestore (${og}): ${n}`,...t)}}function Xw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${og}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function ht(n,e){n||nt()}function ze(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Sb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Oy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class Py{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cA{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,_e.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},y=w=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht("string"==typeof r.accessToken),new Sb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(null===e||"string"==typeof e),new Kr(e)}}class dA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ab{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new dA(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t0{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht("string"==typeof t.token),this.A=t.token,new e0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function Al(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ky(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Ln(0,0))}static max(){return new bt(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qc{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends Qc{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const pA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ur extends Qc{construct(e,t,r){return new ur(e,t,r)}static isValidIdentifier(e){return pA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ur(t)}static emptyPath(){return new ur([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(sn.fromString(e))}static fromName(e){return new qe(sn.fromString(e).popFirst(5))}static empty(){return new qe(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new sn(e.slice()))}}class ag{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ug(n){return n.fields.find(e=>2===e.kind)}function xl(n){return n.fields.filter(e=>2!==e.kind)}ag.UNKNOWN_ID=-1;class lg{constructor(e,t){this.fieldPath=e,this.kind=t}}class cg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cg(0,Es.min())}}function n0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new Es(i,qe.empty(),e)}function r0(n){return new Es(n.readTime,n.key,-1)}class Es{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Es(bt.min(),qe.empty(),-1)}static max(){return new Es(bt.max(),qe.empty(),-1)}}function Fy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const Nb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ii{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Is(n){return s0.apply(this,arguments)}function s0(){return s0=(0,_e.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Nb)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),s0.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},y=>r(y))}),l=!0,a===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let y=0;y<a;y++){const w=y;t(e[w]).next(D=>{l[w]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new oe((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class o0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Hh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Ly(r.target.error);this.P.reject(new Hh(e,i))}}static open(e,t,r,i){try{return new o0(t,e.transaction(i,r))}catch(a){throw new Hh(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mA(t)}}class la{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===la.D((0,P.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),gu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,P.hl)())return!1;if(la.N())return!0;const e=(0,P.z$)(),t=la.D(e),r=0<t&&t<10,i=la.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Hh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Re(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Re(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Hh(e,h))},a.onupgradeneeded=l=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const y=o0.open(a.db,e,l?"readonly":"readwrite",r),w=i(y).next(D=>(y.V(),D)).catch(D=>(y.abort(D),oe.reject(D))).toPromise();return w.catch(()=>{}),yield y.v,w}catch(y){const w=y,D="FirebaseError"!==w.name&&h<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),a.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rb{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return gu(this.U.delete())}}class Hh extends Re{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ys(n){return"IndexedDbTransactionError"===n.name}class mA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gu(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),gu(this.store.add(e))}get(e){return gu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),gu(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),gu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new oe((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=a=>{const l=Ly(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new oe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const y=new Rb(h),w=t(h.primaryKey,h.value,y);if(w instanceof oe){const D=w.catch(S=>(y.done(),oe.reject(S)));r.push(D)}y.isDone?i():null===y.G?h.continue():h.continue(y.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gu(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ly(r.target.error);t(i)}})}let Ob=!1;function Ly(n){const e=la.D((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ob||(Ob=!0,setTimeout(()=>{throw r},0)),r}}return n}class yA{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ys(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Is(r)}yield t.nt(6e4)}))}}class _A{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return oe.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Oe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>(Oe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=r0(a);Fy(l,r)>0&&(r=l)}),new Es(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Vy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ml(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function a0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ji.at=-1;class Vn{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new Vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new Vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ci.RED,this.left=i??Ci.EMPTY,this.right=a??Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ci(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pb(this.data.getIterator())}getIteratorFrom(e){return new Pb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class Pb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jc(n){return n.hasNext()?n.getNext():void 0}class Zr{constructor(e){this.fields=e,e.sort(ur.comparator)}static empty(){return new Zr([])}unionWith(e){let t=new _n(ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const u0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xc(n){if(ht(!!n),"string"==typeof n){let e=0;const t=u0.exec(n);if(ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gh(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function l0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function kb(n){const e=n.mapValue.fields.__previous_value__;return l0(e)?kb(e):e}function dg(n){const e=Xc(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class Fb{constructor(e,t,r,i,a,l,h,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=y}}class mu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new mu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}function hg(n){return null==n}function Wh(n){return 0===n&&1/n==-1/0}function c0(n){return"number"==typeof n&&Number.isInteger(n)&&!Wh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Nl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uy={nullValue:"NULL_VALUE"};function Rl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?l0(n)?4:IA(n)?9007199254740991:10:nt()}function ca(n,e){if(n===e)return!0;const t=Rl(n);if(t!==Rl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dg(n).isEqual(dg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Xc(r.timestampValue),l=Xc(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Gh(n.bytesValue).isEqual(Gh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return lr(r.geoPointValue.latitude)===lr(i.geoPointValue.latitude)&&lr(r.geoPointValue.longitude)===lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return lr(r.integerValue)===lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=lr(r.doubleValue),l=lr(i.doubleValue);return a===l?Wh(a)===Wh(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Al(n.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Vy(a)!==Vy(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!ca(a[h],l[h])))return!1;return!0}(n,e);default:return nt()}var i}function zh(n,e){return void 0!==(n.values||[]).find(t=>ca(t,e))}function yu(n,e){if(n===e)return 0;const t=Rl(n),r=Rl(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=lr(i.integerValue||i.doubleValue),h=lr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return d0(n.timestampValue,e.timestampValue);case 4:return d0(dg(n),dg(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Gh(i),h=Gh(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let y=0;y<l.length&&y<h.length;y++){const w=Lt(l[y],h[y]);if(0!==w)return w}return Lt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Lt(lr(i.latitude),lr(a.latitude));return 0!==l?l:Lt(lr(i.longitude),lr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let y=0;y<l.length&&y<h.length;++y){const w=yu(l[y],h[y]);if(w)return w}return Lt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Nl.mapValue&&a===Nl.mapValue)return 0;if(i===Nl.mapValue)return 1;if(a===Nl.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),y=a.fields||{},w=Object.keys(y);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=Lt(h[D],w[D]);if(0!==S)return S;const O=yu(l[h[D]],y[w[D]]);if(0!==O)return O}return Lt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw nt()}}function d0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=Xc(n),r=Xc(e),i=Lt(t.seconds,r.seconds);return 0!==i?i:Lt(t.nanos,r.nanos)}function ed(n){return h0(n)}function h0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Xc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gh(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=h0(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${h0(r.fields[h])}`;return a+"}"}(n.mapValue):nt();var e}function td(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lb(n){return!!n&&"integerValue"in n}function qh(n){return!!n&&"arrayValue"in n}function wA(n){return!!n&&"nullValue"in n}function EA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function f0(n){return!!n&&"mapValue"in n}function By(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ml(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=By(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=By(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IA(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ZR(n){return"nullValue"in n?Uy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?td(mu.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function YR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?td(mu.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Nl:nt()}function CA(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fg(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!f0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=By(t)}setAll(e){let t=ur.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=By(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());f0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];f0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ml(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new bi(By(this.value))}}function p0(n){const e=[];return Ml(n.fields,(t,r)=>{const i=new ur([t]);if(f0(r)){const a=p0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Zr(e)}class vn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new vn(e,0,bt.min(),bt.min(),bi.empty(),0)}static newFoundDocument(e,t,r){return new vn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new vn(e,2,t,bt.min(),bi.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,bt.min(),bi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vb{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ht=null}}function g0(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Vb(n,e,t,r,i,a,l)}function Kh(n){const e=ze(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+ed(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),hg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ed(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ed(r)).join(",")),e.ht=t}return e.ht}function Zh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!NA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ca(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_0(n.startAt,e.startAt)&&_0(n.endAt,e.endAt)}function jy(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function pg(n,e){return n.filters.filter(t=>t instanceof li&&t.field.isEqual(e))}function bA(n,e,t){let r=Uy,i=!0;for(const a of pg(n,e)){let l=Uy,h=!0;switch(a.op){case"<":case"<=":l=ZR(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=Uy}CA({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];CA({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function DA(n,e,t){let r=Nl,i=!0;for(const a of pg(n,e)){let l=Nl,h=!0;switch(a.op){case">=":case">":l=YR(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Nl}fg({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];fg({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class li extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new TA(e,t,r):"array-contains"===t?new QR(e,r):"in"===t?new JR(e,r):"not-in"===t?new xA(e,r):"array-contains-any"===t?new MA(e,r):new li(e,t,r)}static lt(e,t,r){return"in"===t?new Hy(e,r):new SA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(yu(t,this.value)):null!==t&&Rl(this.value)===Rl(t)&&this.ft(yu(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class TA extends li{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.ft(t)}}class Hy extends li{constructor(e,t){super(e,"in",t),this.keys=AA(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SA extends li{constructor(e,t){super(e,"not-in",t),this.keys=AA(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AA(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class QR extends li{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qh(t)&&zh(t.arrayValue,this.value)}}class JR extends li{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zh(this.value.arrayValue,t)}}class xA extends li{constructor(e,t){super(e,"not-in",t)}matches(e){if(zh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zh(this.value.arrayValue,t)}}class MA extends li{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zh(this.value.arrayValue,r))}}class Ol{constructor(e,t){this.position=e,this.inclusive=t}}class gg{constructor(e,t="asc"){this.field=e,this.dir=t}}function NA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function y0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?qe.comparator(qe.fromName(l.referenceValue),t.key):yu(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function _0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ca(n.position[t],e.position[t]))return!1;return!0}class Pl{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=y,this._t=null,this.wt=null}}function Qs(n,e,t,r,i,a,l,h){return new Pl(n,e,t,r,i,a,l,h)}function Yh(n){return new Pl(n)}function $y(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function v0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Xi(n){for(const e of n.filters)if(e.dt())return e.field;return null}function w0(n){return null!==n.collectionGroup}function kl(n){const e=ze(n);if(null===e._t){e._t=[];const t=Xi(e),r=v0(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new gg(t)),e._t.push(new gg(ur.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new gg(ur.keyField(),a))}}}return e._t}function Ui(n){const e=ze(n);if(!e.wt)if("F"===e.limitType)e.wt=g0(e.path,e.collectionGroup,kl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of kl(e))t.push(new gg(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ol(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ol(e.startAt.position,e.startAt.inclusive):null;e.wt=g0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Gy(n,e,t){return new Pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nd(n,e){return Zh(Ui(n),Ui(e))&&n.limitType===e.limitType}function E0(n){return`${Kh(Ui(n))}|lt:${n.limitType}`}function Wy(n){return`Query(target=${function m0(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ed(r.value)}`;var r}).join(", ")}]`),hg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ed(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ed(t)).join(",")),`Target(${e})`}(Ui(n))}; limitType=${n.limitType})`}function I0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=y0(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,kl(t),r)||t.endAt&&!function(i,a,l){const h=y0(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,kl(t),r)));var t,r}function C0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function b0(n){return(e,t)=>{let r=!1;for(const i of kl(n)){const a=RA(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function RA(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),y=l.data.field(i);return null!==h&&null!==y?yu(h,y):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function D0(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function Ub(n){return{integerValue:""+n}}function zy(n,e){return c0(e)?Ub(e):D0(n,e)}class Mo{constructor(){this._=void 0}}function Bb(n,e,t){return n instanceof Qh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Jh?jb(n,e):n instanceof rd?Hb(n,e):function(r,i){const a=da(r,i),l=S0(a)+S0(r.yt);return Lb(a)&&Lb(r.yt)?Ub(l):D0(r.It,l)}(n,e)}function T0(n,e,t){return n instanceof Jh?jb(n,e):n instanceof rd?Hb(n,e):t}function da(n,e){return n instanceof Xh?Lb(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qh extends Mo{}class Jh extends Mo{constructor(e){super(),this.elements=e}}function jb(n,e){const t=OA(e);for(const r of n.elements)t.some(i=>ca(i,r))||t.push(r);return{arrayValue:{values:t}}}class rd extends Mo{constructor(e){super(),this.elements=e}}function Hb(n,e){let t=OA(e);for(const r of n.elements)t=t.filter(i=>!ca(i,r));return{arrayValue:{values:t}}}class Xh extends Mo{constructor(e,t){super(),this.It=e,this.yt=t}}function S0(n){return lr(n.integerValue||n.doubleValue)}function OA(n){return qh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ef{constructor(e,t){this.field=e,this.transform=t}}class $b{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mg{}function A0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new rf(n.key,Yn.none()):new _u(n.key,n.data,Yn.none());{const t=n.data,r=bi.empty();let i=new _n(ur.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new ha(n.key,r,new Zr(i.toArray()),Yn.none())}}function Gb(n,e,t){n instanceof _u?function(r,i,a){const l=r.value.clone(),h=x0(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ha?function(r,i,a){if(!tf(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=x0(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(zb(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nf(n,e,t,r){return n instanceof _u?function(i,a,l,h){if(!tf(i.precondition,a))return l;const y=i.value.clone(),w=M0(i.fieldTransforms,h,a);return y.setAll(w),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof ha?function(i,a,l,h){if(!tf(i.precondition,a))return l;const y=M0(i.fieldTransforms,h,a),w=a.data;return w.setAll(zb(i)),w.setAll(y),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,tf(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function Wb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=da(r.transform,i||null);null!=a&&(null===t&&(t=bi.empty()),t.set(r.field,a))}return t||null}function yg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Al(t,r,(i,a)=>function PA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Jh&&r instanceof Jh||t instanceof rd&&r instanceof rd?Al(t.elements,r.elements,ca):t instanceof Xh&&r instanceof Xh?ca(t.yt,r.yt):t instanceof Qh&&r instanceof Qh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class _u extends mg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ha extends mg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function zb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function x0(n,e,t){const r=new Map;ht(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,T0(l,h,t[i]))}return r}function M0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,Bb(a,l,e))}return r}class rf extends mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N0 extends mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XR{constructor(e){this.count=e}}var Pr,nn;function qb(n){switch(n){default:return nt();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Kb(n){if(void 0===n)return wr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Pr.OK:return ue.OK;case Pr.CANCELLED:return ue.CANCELLED;case Pr.UNKNOWN:return ue.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return ue.INTERNAL;case Pr.UNAVAILABLE:return ue.UNAVAILABLE;case Pr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Pr.NOT_FOUND:return ue.NOT_FOUND;case Pr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Pr.ABORTED:return ue.ABORTED;case Pr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Pr.DATA_LOSS:return ue.DATA_LOSS;default:return nt()}}(nn=Pr||(Pr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ml(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return a0(this.inner)}size(){return this.innerSize}}const eO=new Vn(qe.comparator);function Cs(){return eO}const kA=new Vn(qe.comparator);function qy(...n){let e=kA;for(const t of n)e=e.insert(t.key,t);return e}function FA(n){let e=kA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fa(){return vg()}function _g(){return vg()}function vg(){return new Fl(n=>n.toString(),(n,e)=>n.isEqual(e))}const LA=new Vn(qe.comparator),Zb=new _n(qe.comparator);function xt(...n){let e=Zb;for(const t of n)e=e.add(t);return e}const Yb=new _n(Lt);function sf(){return Yb}class id{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new id(bt.min(),i,sf(),Cs(),xt())}}class wg{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wg(r,t,xt(),xt(),xt())}}class af{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Ky{constructor(e,t){this.targetId=e,this.At=t}}class Eg{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class VA{constructor(){this.Rt=0,this.bt=BA(),this.Pt=Tr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=xt(),t=xt(),r=xt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new wg(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=BA()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class tO{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Cs(),this.qt=UA(),this.Kt=new _n(Lt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(jy(a))if(0===r){const l=new qe(a.path);this.jt(t,l,vn.newNoDocument(l,bt.min()))}else ht(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const h=this.Xt(l);if(h){if(a.current&&jy(h.target)){const y=new qe(h.target.path);null!==this.Ut.get(y)||this.ee(l,y)||this.jt(l,y,vn.newNoDocument(y,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=xt();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(y=>{const w=this.Xt(y);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new id(e,t,this.Kt,this.Ut,r);return this.Ut=Cs(),this.qt=UA(),this.Kt=new _n(Lt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new VA,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new _n(Lt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new VA),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function UA(){return new Vn(qe.comparator)}function BA(){return new Vn(qe.comparator)}const Qb={asc:"ASCENDING",desc:"DESCENDING"},jA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class HA{constructor(e,t){this.databaseId=e,this.gt=t}}function Ig(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jb(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Xb(n,e){return Ig(n,e.toTimestamp())}function kr(n){return ht(!!n),bt.fromTimestamp(function(e){const t=Xc(e);return new Ln(t.seconds,t.nanos)}(n))}function Zy(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function eD(n){const e=sn.fromString(n);return ht(s(e)),e}function Cg(n,e){return Zy(n.databaseId,e.path)}function No(n,e){const t=eD(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(Yy(t))}function bg(n,e){return Zy(n.databaseId,e)}function $A(n){const e=eD(n);return 4===e.length?sn.emptyPath():Yy(e)}function uf(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yy(n){return ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tD(n,e,t){return{name:Cg(n,e),fields:t.value.mapValue.fields}}function nD(n,e,t){const r=No(n,e.name),i=kr(e.updateTime),a=new bi({mapValue:{fields:e.fields}}),l=vn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Dg(n,e){let t;if(e instanceof _u)t={update:tD(n,e.key,e.value)};else if(e instanceof rf)t={delete:Cg(n,e.key)};else if(e instanceof ha)t={update:tD(n,e.key,e.data),updateMask:uO(e.fieldMask)};else{if(!(e instanceof N0))return nt();t={verify:Cg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Qh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Jh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof rd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xh)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Xb(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nt()),t;var i}function R0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Yn.updateTime(kr(i.updateTime)):void 0!==i.exists?Yn.exists(i.exists):Yn.none():Yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(ht("REQUEST_TIME"===l.setToServerValue),h=new Qh):"appendMissingElements"in l?h=new Jh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new rd(l.removeAllFromArray.values||[]):"increment"in l?h=new Xh(a,l.increment):nt();const y=ur.fromServerFormat(l.fieldPath);return new ef(y,h)}(n,i)):[];var i;if(e.update){const i=No(n,e.update.name),a=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Zr((e.updateMask.fieldPaths||[]).map(w=>ur.fromServerFormat(w)));return new ha(i,a,l,t,r)}return new _u(i,a,t,r)}if(e.delete){const i=No(n,e.delete);return new rf(i,t)}if(e.verify){const i=No(n,e.verify);return new N0(i,t)}return nt()}function WA(n,e){return{documents:[bg(n,e.path)]}}function rD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=bg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const w=y.map(D=>function(S){if("=="===S.op){if(EA(S.value))return{unaryFilter:{field:Tg(S.field),op:"IS_NAN"}};if(wA(S.value))return{unaryFilter:{field:Tg(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(EA(S.value))return{unaryFilter:{field:Tg(S.field),op:"IS_NOT_NAN"}};if(wA(S.value))return{unaryFilter:{field:Tg(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tg(S.field),op:sO(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(w=>{return{field:Tg((D=w).field),direction:KA(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.gt||hg(w)?w:{value:w});var w,h,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function zA(n){let e=$A(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ht(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=qA(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new gg(Sg((S=D).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,hg(S)?null:S}(t.limit));let y=null;var D;t.startAt&&(y=new Ol((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Ol(D.values||[],!D.before)}(t.endAt)),Qs(e,i,l,a,h,"F",y,w)}function qA(n){return n?void 0!==n.unaryFilter?[aO(n)]:void 0!==n.fieldFilter?[oO(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>qA(e)).reduce((e,t)=>e.concat(t)):nt():[]}function KA(n){return Qb[n]}function sO(n){return jA[n]}function Tg(n){return{fieldPath:n.canonicalString()}}function Sg(n){return ur.fromServerFormat(n.fieldPath)}function oO(n){return li.create(Sg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function aO(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Sg(n.unaryFilter.field);return li.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Sg(n.unaryFilter.field);return li.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sg(n.unaryFilter.field);return li.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Sg(n.unaryFilter.field);return li.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function uO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function s(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function o(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=c(e)),e=u(n.get(t),e);return c(e)}function u(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function c(n){return n+"\x01\x01"}function d(n){const e=n.length;if(ht(e>=2),2===e)return ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&nt(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let y;0===i.length?y=h:(i+=h,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:nt()}a=l+2}return new sn(r)}const p=["userId","batchId"];function v(n,e){return[n,o(e)]}function I(n,e,t){return[n,o(e),t]}const C={},A=["prefixPath","collectionGroup","readTime","documentId"],N=["prefixPath","collectionGroup","documentId"],F=["collectionGroup","readTime","prefixPath","documentId"],z=["canonicalId","targetId"],te=["targetId","path"],we=["path","targetId"],Fe=["collectionId","parent"],We=["indexId","uid"],it=["uid","sequenceNumber"],Et=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Me=["indexId","uid","orderedDocumentKey"],At=["userId","collectionPath","documentId"],hn=["userId","collectionPath","largestBatchId"],Gn=["userId","collectionGroup","largestBatchId"],Ll=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O0=[...Ll,"documentOverlays"],Qy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jy=Qy,P0=[...Jy,"indexConfiguration","indexState","indexEntries"];class Ag extends Ii{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Sr(n,e){const t=ze(n);return la.M(t.ie,e)}class xg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Gb(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_g();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const y=A0(l,h);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xt())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,(t,r)=>yg(t,r))&&Al(this.baseMutations,e.baseMutations,(t,r)=>yg(t,r))}}class Mg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length);let i=LA;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Mg(e,t,r,i)}}class Ng{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lf{constructor(e,t,r,i,a=bt.min(),l=bt.min(),h=Tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new lf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new lf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new lf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lO{constructor(e){this.re=e}}function cO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:iD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Cg(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Ig(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Rg(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:Rg(e.version)}}var i,a;return r}function iD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Rg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Og(n){const e=new Ln(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Pg(n,e){const t=(e.baseMutations||[]).map(a=>R0(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>R0(n.re,a)),i=Ln.fromMillis(e.localWriteTimeMs);return new xg(e.batchId,i,t,r)}function k0(n){const e=Og(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Og(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(ht(1===(i=n.query).documents.length),r=Ui(Yh($A(i.documents[0])))):r=Ui(zA(n.query)),new lf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Tr.fromBase64String(n.resumeToken))}function dO(n,e){const t=Rg(e.snapshotVersion),r=Rg(e.lastLimboFreeSnapshotVersion);let i;i=jy(e.target)?WA(n.re,e.target):rD(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kh(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ZA(n){const e=zA({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gy(e,e.limit,"L"):e}function YA(n,e){return new Ng(e.largestBatchId,R0(n.re,e.overlayMutation))}function hO(n,e){const t=e.path.lastSegment();return[n,o(e.path.popLast()),t]}function fO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Rg(r.readTime),documentKey:o(r.documentKey.path),largestBatchId:r.largestBatchId}}class aL{getBundleMetadata(e,t){return pO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Og(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return pO(e).put({bundleId:(r=t).id,createTime:Rg(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return gO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:ZA(i.bundledQuery),readTime:Og(i.readTime)};var i})}saveNamedQuery(e,t){return gO(e).put({name:(r=t).name,readTime:Rg(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function pO(n){return Sr(n,"bundles")}function gO(n){return Sr(n,"namedQueries")}class sD{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new sD(e,t.uid||"")}getOverlay(e,t){return F0(e).get(hO(this.userId,t)).next(r=>r?YA(this.It,r):null)}getOverlays(e,t){const r=fa();return oe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Ng(t,l);i.push(this.ue(e,h))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(o(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(F0(e).Y("collectionPathOverlayIndex",h))}),oe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=fa(),a=o(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return F0(e).W("collectionPathOverlayIndex",l).next(h=>{for(const y of h){const w=YA(this.It,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=fa();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return F0(e).Z({index:"collectionGroupOverlayIndex",range:h},(y,w,D)=>{const S=YA(this.It,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}ue(e,t){return F0(e).put(function(r,i,a){const[l,h,y]=hO(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Dg(r.re,a.mutation)}}(this.It,this.userId,t))}}function F0(n){return Sr(n,"documentOverlays")}class kg{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(lr(e.integerValue));else if("doubleValue"in e){const r=lr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Wh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Gh(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?IA(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):nt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function uL(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function mO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=uL(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}kg.Te=new kg;class lL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=mO(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=mO(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class cL{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class dL{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class L0{constructor(){this.Be=new lL,this.Le=new cL(this.Be),this.Ue=new dL(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Fg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fg(this.indexId,this.documentKey,this.arrayValue,r)}}function Lg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=yO(n.arrayValue,e.arrayValue),0!==t?t:(t=yO(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function yO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hL{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=ug(e);if(void 0!==t&&!this.ze(t))return!1;const r=xl(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class fL{constructor(){this.Ye=new QA}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Es.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class QA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(sn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(sn.comparator)).toArray()}}const oD=new Uint8Array(0);class pL{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new QA,this.Ze=new Fl(r=>Kh(r),(r,i)=>Zh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:o(i)};return _O(e).put(a)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ky(t),""],!1,!0);return _O(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(d(l.parent))}return r})}addFieldIndex(e,t){const r=aD(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=U0(e);return a.next(h=>{l.put(fO(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=aD(e),i=U0(e),a=V0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=V0(e);let i=!0;const a=new Map;return oe.forEach(this.tn(t),l=>this.en(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=xt();const h=[];return oe.forEach(a,(y,w)=>{var D;Oe("IndexedDbIndexManager",`Using index ${D=y,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(Dt=>`${Dt.fieldPath}:${Dt.kind}`).join(",")}`} to execute ${Kh(t)}`);const S=function(Dt,Nt){const Vt=ug(Nt);if(void 0===Vt)return null;for(const Wt of pg(Dt,Vt.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(w,y),O=function(Dt,Nt){const Vt=new Map;for(const Wt of xl(Nt))for(const ci of pg(Dt,Wt.fieldPath))switch(ci.op){case"==":case"in":Vt.set(Wt.fieldPath.canonicalString(),ci.value);break;case"not-in":case"!=":return Vt.set(Wt.fieldPath.canonicalString(),ci.value),Array.from(Vt.values())}return null}(w,y),V=function(Dt,Nt){const Vt=[];let Wt=!0;for(const ci of xl(Nt)){const NE=0===ci.kind?bA(Dt,ci.fieldPath,Dt.startAt):DA(Dt,ci.fieldPath,Dt.startAt);Vt.push(NE.value),Wt&&(Wt=NE.inclusive)}return new Ol(Vt,Wt)}(w,y),H=function(Dt,Nt){const Vt=[];let Wt=!0;for(const ci of xl(Nt)){const NE=0===ci.kind?DA(Dt,ci.fieldPath,Dt.endAt):bA(Dt,ci.fieldPath,Dt.endAt);Vt.push(NE.value),Wt&&(Wt=NE.inclusive)}return new Ol(Vt,Wt)}(w,y),ge=this.nn(y,w,V),be=this.nn(y,w,H),Ye=this.sn(y,w,O),gt=this.rn(y.indexId,S,ge,V.inclusive,be,H.inclusive,Ye);return oe.forEach(gt,Dt=>r.J(Dt,t.limit).next(Nt=>{Nt.forEach(Vt=>{const Wt=qe.fromSegments(Vt.documentKey);l.has(Wt)||(l=l.add(Wt),h.push(Wt))})}))}).next(()=>h)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,h){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),w=y/(null!=t?t.length:1),D=[];for(let S=0;S<y;++S){const O=t?this.on(t[S/w]):oD,V=this.un(e,O,r[S%w],i),H=this.cn(e,O,a[S%w],l),ge=h.map(be=>this.un(e,O,be,!0));D.push(...this.createRange(V,H,ge))}return D}un(e,t,r,i){const a=new Fg(e,qe.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Fg(e,qe.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new hL(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.We(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new _n(ur.comparator),y=!1;for(const w of l.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:h=h.add(D.field))}for(const w of l.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new L0;for(const i of xl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);kg.Te.ce(a,l)}return r.$e()}on(e){const t=new L0;return kg.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new L0;return kg.Te.ce(td(this.databaseId,t),r.qe(function(i){const a=xl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new L0);let a=0;for(const l of xl(e)){const h=r[a++];for(const y of i)if(this.ln(t,l.fieldPath)&&qh(h))i=this.fn(i,l,h);else{const w=y.qe(l.kind);kg.Te.ce(h,w)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const y=new L0;y.seed(h.$e()),kg.Te.ce(l,y.qe(t.kind)),a.push(y)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof li&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=aD(e),i=U0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return oe.forEach(a,h=>i.get([h.indexId,this.uid]).next(y=>{l.push(function(w,D){const S=D?new cg(D.sequenceNumber,new Es(Og(D.readTime),new qe(d(D.documentKey)),D.largestBatchId)):cg.empty(),O=w.fields.map(([V,H])=>new lg(ur.fromServerFormat(V),H));return new ag(w.indexId,w.collectionGroup,O,S)}(h,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=aD(e),a=U0(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>oe.forEach(h,y=>a.put(fO(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),oe.forEach(h,y=>this.wn(e,i,y).next(w=>{const D=this.mn(a,y);return w.isEqual(D)?oe.resolve():this.gn(e,a,y,w,D)}))))})}yn(e,t,r,i){return V0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return V0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=V0(e);let a=new _n(Lg);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,h)=>{a=a.add(new Fg(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new _n(Lg);const i=this.an(t,e);if(null==i)return r;const a=ug(t);if(null!=a){const l=e.data.field(a.fieldPath);if(qh(l))for(const h of l.arrayValue.values||[])r=r.add(new Fg(t.indexId,e.key,this.on(h),i))}else r=r.add(new Fg(t.indexId,e.key,oD,i));return r}gn(e,t,r,i,a){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,y,w,D,S){const O=h.getIterator(),V=y.getIterator();let H=Jc(O),ge=Jc(V);for(;H||ge;){let be=!1,Ye=!1;if(H&&ge){const gt=w(H,ge);gt<0?Ye=!0:gt>0&&(be=!0)}else null!=H?Ye=!0:be=!0;be?(D(ge),ge=Jc(V)):Ye?(S(H),H=Jc(O)):(H=Jc(O),ge=Jc(V))}}(i,a,Lg,h=>{l.push(this.yn(e,t,r,h))},h=>{l.push(this.pn(e,t,r,h))}),oe.waitFor(l)}_n(e){let t=1;return U0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Lg(l,h)).filter((l,h,y)=>!h||0!==Lg(l,y[h-1]));const i=[];i.push(e);for(const l of r){const h=Lg(l,e),y=Lg(l,t);if(0===h)i[0]=e.Ke();else if(h>0&&y<0)i.push(l),i.push(l.Ke());else if(y>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,oD,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,oD,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vO)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||nt())).next(vO)}}function _O(n){return Sr(n,"collectionParents")}function V0(n){return Sr(n,"indexEntries")}function aD(n){return Sr(n,"indexConfiguration")}function U0(n){return Sr(n,"indexState")}function vO(n){ht(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Fy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Es(e.readTime,e.documentKey,t)}const wO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Js(e,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function EO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const y=r.Z({range:l},(D,S,O)=>(h++,O.delete()));a.push(y.next(()=>{ht(1===h)}));const w=[];for(const D of t.mutations){const S=I(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return oe.waitFor(a).next(()=>w)}function uD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Js.DEFAULT_COLLECTION_PERCENTILE=10,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Js.DEFAULT=new Js(41943040,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Js.DISABLED=new Js(-1,0,0);class lD{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){ht(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new lD(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cf(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Xy(e),l=cf(e);return l.add({}).next(h=>{ht("number"==typeof h);const y=new xg(h,t,r,i),w=function(O,V,H){const ge=H.baseMutations.map(Ye=>Dg(O.re,Ye)),be=H.mutations.map(Ye=>Dg(O.re,Ye));return{userId:V,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:ge,mutations:be}}(this.It,this.userId,y),D=[];let S=new _n((O,V)=>Lt(O.canonicalString(),V.canonicalString()));for(const O of i){const V=I(this.userId,O.key.path,h);S=S.add(O.key.path.popLast()),D.push(l.put(w)),D.push(a.put(V,C))}return S.forEach(O=>{D.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.In[h]=y.keys()}),oe.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return cf(e).get(t).next(r=>r?(ht(r.userId===this.userId),Pg(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return cf(e).Z({index:"userMutationsIndex",range:i},(l,h,y)=>{h.userId===this.userId&&(ht(h.batchId>=r),a=Pg(this.It,h)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return cf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cf(e).W("userMutationsIndex",t).next(r=>r.map(i=>Pg(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=v(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Xy(e).Z({range:i},(l,h,y)=>{const[w,D,S]=l,O=d(D);if(w===this.userId&&t.path.isEqual(O))return cf(e).get(S).next(V=>{if(!V)throw nt();ht(V.userId===this.userId),a.push(Pg(this.It,V))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Lt);const i=[];return t.forEach(a=>{const l=v(this.userId,a.path),h=IDBKeyRange.lowerBound(l),y=Xy(e).Z({range:h},(w,D,S)=>{const[O,V,H]=w,ge=d(V);O===this.userId&&a.path.isEqual(ge)?r=r.add(H):S.done()});i.push(y)}),oe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=v(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new _n(Lt);return Xy(e).Z({range:l},(y,w,D)=>{const[S,O,V]=y,H=d(O);S===this.userId&&r.isPrefixOf(H)?H.length===i&&(h=h.add(V)):D.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(cf(e).get(a).next(l=>{if(null===l)throw nt();ht(l.userId===this.userId),r.push(Pg(this.It,l))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return EO(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Xy(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const y=d(a[1]);i.push(y)}else h.done()}).next(()=>{ht(0===i.length)})})}containsKey(e,t){return IO(e,this.userId,t)}Rn(e){return CO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function IO(n,e,t){const r=v(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Xy(n).Z({range:a,X:!0},(h,y,w)=>{const[D,S,O]=h;D===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function cf(n){return Sr(n,"mutations")}function Xy(n){return Sr(n,"documentMutations")}function CO(n){return Sr(n,"mutationQueues")}class Vg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Vg(0)}static vn(){return new Vg(-1)}}class gL{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Vg(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>bt.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>e_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(ht(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return e_(e).Z((l,h)=>{const y=k0(h);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>oe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return e_(e).Z((r,i)=>{const a=k0(i);t(a)})}Vn(e){return bO(e).get("targetGlobalKey").next(t=>(ht(null!==t),t))}Sn(e,t){return bO(e).put("targetGlobalKey",t)}Dn(e,t){return e_(e).put(dO(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Kh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return e_(e).Z({range:i,index:"queryTargetsIndex"},(l,h,y)=>{const w=k0(h);Zh(t,w.target)&&(a=w,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=df(e);return t.forEach(l=>{const h=o(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=df(e);return oe.forEach(t,a=>{const l=o(a.path);return oe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=df(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=df(e);let a=xt();return i.Z({range:r,X:!0},(l,h,y)=>{const w=d(l[1]),D=new qe(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=o(t.path),i=IDBKeyRange.bound([r],[ky(r)],!1,!0);let a=0;return df(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],y,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}se(e,t){return e_(e).get(t).next(r=>r?k0(r):null)}}function e_(n){return Sr(n,"targets")}function bO(n){return Sr(n,"targetGlobal")}function df(n){return Sr(n,"targetDocuments")}function DO([n,e],[t,r]){const i=Lt(n,t);return 0===i?Lt(e,r):i}class mL{constructor(e){this.xn=e,this.buffer=new _n(DO),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();DO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ys(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Is(r)}yield t.Fn(3e5)}))}}class _L{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Ji.at);const r=new mL(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(wO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wO):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,h,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),Jw()<=To.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(y-h)+`ms\n\tRemoved ${S} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class vL{constructor(e,t){this.db=e,this.garbageCollector=new _L(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return cD(e,r)}removeReference(e,t,r){return cD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cD(e,t)}Gn(e,t){return function(r,i){let a=!1;return CO(r).tt(l=>IO(r,l,i).next(h=>(h&&(a=!0),oe.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const y=this.Gn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,bt.min()),df(e).delete([0,o(l.path)])))});i.push(y)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cD(e,t)}Kn(e,t){const r=df(e);let i,a=Ji.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:y,sequenceNumber:w})=>{0===l?(a!==Ji.at&&t(new qe(d(i)),a),a=w,i=y):a=Ji.at}).next(()=>{a!==Ji.at&&t(new qe(d(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cD(n,e){return df(n).put((r=n.currentSequenceNumber,{targetId:0,path:o(e.path),sequenceNumber:r}));var r}class TO{constructor(){this.changes=new Fl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wL{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ug(e).put(r)}removeEntry(e,t,r){return Ug(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],iD(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=vn.newInvalidDocument(t);return Ug(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(B0(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:vn.newInvalidDocument(t)};return Ug(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(B0(t))},(i,a)=>{r={document:this.jn(t,a),size:uD(a)}}).next(()=>r)}getEntries(e,t){let r=Cs();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Cs(),i=new Vn(qe.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,uD(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let i=new _n(MO);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(B0(i.first()),B0(i.last())),l=i.getIterator();let h=l.getNext();return Ug(e).Z({index:"documentKeyIndex",range:a},(y,w,D)=>{const S=qe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&MO(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?D.j(B0(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),iD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ug(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Cs();for(const y of l){const w=this.jn(qe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Cs();const l=xO(t,r),h=xO(t,Es.max());return Ug(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(y,w,D)=>{const S=this.jn(qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new EL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return AO(e).get("remoteDocumentGlobalKey").next(t=>(ht(!!t),t))}Qn(e,t){return AO(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function oL(n,e){let t;if(e.document)t=nD(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=Og(e.noDocument.readTime);t=vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=qe.fromSegments(e.unknownDocument.path),i=Og(e.unknownDocument.version);t=vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ln(r[0],r[1]);return bt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return vn.newInvalidDocument(e)}}function SO(n){return new wL(n)}class EL extends TO{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Fl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _n((a,l)=>Lt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const y=cO(this.Yn.It,l);i=i.add(a.path.popLast()),r+=uD(y)-h.size,t.push(this.Yn.addEntry(e,a,y))}else if(r-=h.size,this.trackRemovals){const y=cO(this.Yn.It,l.convertToNoDocument(bt.min()));t.push(this.Yn.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function AO(n){return Sr(n,"remoteDocumentGlobal")}function Ug(n){return Sr(n,"remoteDocumentsV14")}function B0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xO(n,e){const t=e.documentKey.path.toArray();return[n,iD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function MO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Lt(t[a],r[a]),i)return i;return i=Lt(t.length,r.length),i||(i=Lt(t[t.length-2],r[r.length-2]),i||Lt(t[t.length-1],r[r.length-1]))}class IL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class NO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&nf(r.mutation,i,Zr.empty(),Ln.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xt()){const i=fa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=qy();return a.forEach((h,y)=>{l=l.insert(h,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=fa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Cs();const l=vg(),h=vg();return t.forEach((y,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof ha)?a=a.insert(w.key,w):void 0!==D&&(l.set(w.key,D.mutation.getFieldMask()),nf(D.mutation,w,D.mutation.getFieldMask(),Ln.now()))}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((w,D)=>l.set(w,D)),t.forEach((w,D)=>{var S;return h.set(w,new IL(D,null!==(S=l.get(w))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=vg();let i=new Vn((l,h)=>l-h),a=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let D=r.get(y)||Zr.empty();D=h.applyToLocalView(w,D),r.set(y,D);const S=(i.get(h.batchId)||xt()).add(y);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),w=y.key,D=y.value,S=_g();D.forEach(O=>{if(!a.has(O)){const V=A0(t.get(O),r.get(O));null!==V&&S.set(O,V),a=a.add(O)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,S))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):w0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):oe.resolve(fa());let h=-1,y=a;return l.next(w=>oe.forEach(w,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(D)?oe.resolve():this.getBaseDocument(e,D,S).next(O=>{y=y.insert(D,O)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,y,w,xt())).next(D=>({batchId:h,changes:FA(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=qy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=qy();return this.indexManager.getCollectionParents(e,i).next(l=>oe.forEach(l,h=>{const y=(w=t,D=h.child(i),new Pl(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,y)=>{const w=y.getKey();null===i.get(w)&&(i=i.insert(w,vn.newInvalidDocument(w)))});let l=qy();return i.forEach((h,y)=>{const w=a.get(h);void 0!==w&&nf(w.mutation,y,Zr.empty(),Ln.now()),I0(t,y)&&(l=l.insert(h,y))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(vn.newInvalidDocument(t))}}class CL{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:ZA(r.bundledQuery),readTime:kr(r.readTime)}),oe.resolve();var r}}class bL{constructor(){this.overlays=new Vn(qe.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fa();return oe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=fa(),a=t.length+1,l=new qe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const y=h.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Vn((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=fa(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=fa(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return oe.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ng(t,r));let a=this.es.get(t);void 0===a&&(a=xt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class JA{constructor(){this.ns=new _n(Di.ss),this.rs=new _n(Di.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Di(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Di(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new sn([])),r=new Di(t,e),i=new Di(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new sn([])),r=new Di(t,e),i=new Di(t,e+1);let a=xt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Di(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Di{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||Lt(e._s,t._s)}static os(e,t){return Lt(e._s,t._s)||qe.comparator(e.key,t.key)}}class DL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _n(Di.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new xg(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new Di(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Di(t,0),i=new Di(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Lt);return t.forEach(i=>{const a=new Di(i,0),l=new Di(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const l=new Di(new qe(a),0);let h=new _n(Lt);return this.gs.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(y._s)),!0)},l),oe.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ht(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,i=>{const a=new Di(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Di(t,0),i=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TL{constructor(e){this.Es=e,this.docs=new Vn(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=Cs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():vn.newInvalidDocument(i))}),oe.resolve(r)}getAllFromCollection(e,t,r){let i=Cs();const a=new qe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:y}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||Fy(r0(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){nt()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new SL(this)}getSize(e){return oe.resolve(this.size)}}class SL extends TO{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class AL{constructor(e){this.persistence=e,this.Rs=new Fl(t=>Kh(t),Zh),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new JA,this.targetCount=0,this.vs=Vg.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Vg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),oe.waitFor(a).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class RO{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ji(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new AL(this),this.indexManager=new fL,this.remoteDocumentCache=new TL(r=>this.referenceDelegate.xs(r)),this.It=new lO(t),this.Ns=new CL(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new DL(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new xL(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class xL extends Ii{constructor(e){super(),this.currentSequenceNumber=e}}class dD{constructor(e){this.persistence=e,this.Fs=new JA,this.$s=null}static Bs(e){return new dD(e)}get Ls(){if(this.$s)return this.$s;throw nt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const i=qe.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,bt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class ML{constructor(e){this.It=e}$(e,t,r,i){const a=new o0("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",p,{unique:!0}),h.createObjectStore("documentMutations"),OO(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),OO(e)),l=l.next(()=>function(h){const y=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,y){return y.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",p,{unique:!0});const D=y.store("mutations"),S=w.map(O=>D.put(O));return oe.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const y=h.createObjectStore("documentOverlays",{keyPath:At});y.createIndex("collectionPathOverlayIndex",hn,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",Gn,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const y=h.createObjectStore("remoteDocumentsV14",{keyPath:A});y.createIndex("documentKeyIndex",N),y.createIndex("collectionGroupIndex",F)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:We}).createIndex("sequenceNumberIndex",it,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Et}).createIndex("documentKeyIndex",Me,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=uD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>oe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>oe.forEach(h,y=>{ht(y.userId===a.userId);const w=Pg(this.It,y);return EO(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const y=new sn(l),w=[0,o(y)];a.push(t.get(w).next(D=>D?oe.resolve():t.put({targetId:0,path:o(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Fe});const r=t.store("collectionParents"),i=new QA,a=l=>{if(i.add(l)){const h=l.lastSegment(),y=l.popLast();return r.put({collectionId:h,parent:o(y)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const y=new sn(l);return a(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,y],w)=>{const D=d(h);return a(D.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=k0(i),l=dO(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),y=(w=l,w.document?new qe(sn.fromString(w.document.name).popFirst(5)):w.noDocument?qe.fromSegments(w.noDocument.path):w.unknownDocument?qe.fromSegments(w.unknownDocument.path):nt()).path.toArray();var w;const D={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>oe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=SO(this.It),a=new RO(dD.Bs,this.It.re);return r.W().next(l=>{const h=new Map;return l.forEach(y=>{var w;let D=null!==(w=h.get(y.userId))&&void 0!==w?w:xt();Pg(this.It,y).keys().forEach(S=>D=D.add(S)),h.set(y.userId,D)}),oe.forEach(h,(y,w)=>{const D=new Kr(w),S=sD.oe(this.It,D),O=a.getIndexManager(D),V=lD.oe(D,this.It,O,a.referenceDelegate);return new NO(i,V,S,O).recalculateAndSaveOverlaysForDocumentKeys(new Ag(t,Ji.at),y).next()})})}}function OO(n){n.createObjectStore("targetDocuments",{keyPath:te}).createIndex("documentTargetsIndex",we,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",z,{unique:!0}),n.createObjectStore("targetGlobal")}const XA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ex{constructor(e,t,r,i,a,l,h,y,w,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=w,this.Ys=D,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=O=>Promise.resolve(),!ex.C())throw new Re(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vL(this,i),this.ii=t+"main",this.It=new lO(y),this.ri=new la(this.ii,this.Xs,new ML(this.It)),this.Cs=new gL(this.referenceDelegate,this.It),this.remoteDocumentCache=SO(this.It),this.Ns=new aL,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===D&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,XA);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ji(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ys(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return j0(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return hD(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Sr(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(y=>-1===l.indexOf(y));return oe.forEach(h,y=>i.delete(y.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):j0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,XA);return!1}}return!(!this.networkEnabled||!this.inForeground)||hD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ag(t,Ji.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>hD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return lD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pL(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return sD.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?P0:14===l?Jy:13===l?Qy:12===l?O0:11===l?Ll:void nt();var l;let h;return this.ri.runTransaction(e,i,a,y=>(h=new Ag(y,this.Ss?this.Ss.next():Ji.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(ue.FAILED_PRECONDITION,Nb);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(y=>(h.raiseOnCommittedEvent(),y))}Vi(e){return j0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ue.FAILED_PRECONDITION,XA)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return j0(e).put("owner",t)}static C(){return la.C()}_i(e){const t=j0(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function j0(n){return Sr(n,"owner")}function hD(n){return Sr(n,"clientMetadata")}function tx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class nx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=xt(),i=xt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new nx(e,t.fromCache,r,i)}}class PO{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if($y(t))return oe.resolve(null);let r=Ui(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Gy(t,null,"F"),r=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=xt(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.Fi(t,h);return this.$i(t,w,l,y.readTime)?this.ki(e,Gy(t,null,"F")):this.Bi(e,w,t,y)}))})))}Oi(e,t,r,i){return $y(t)||i.isEqual(bt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(Jw()<=To.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wy(t)),this.Bi(e,l,t,n0(i,-1)))})}Fi(e,t){let r=new _n(b0(e));return t.forEach((i,a)=>{I0(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return Jw()<=To.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Wy(t)),this.Ni.getDocumentsMatchingQuery(e,t,Es.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class NL{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Vn(Lt),this.qi=new Fl(a=>Kh(a),Zh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function kO(n,e,t,r){return new NL(n,e,t,r)}function FO(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,_e.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let y=xt();for(const w of i){l.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of a){h.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.localDocuments.getDocuments(r,y).next(w=>({ji:w,removedBatchIds:l,addedBatchIds:h}))})})}),rx.apply(this,arguments)}function RL(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,y,w){const D=y.batch,S=D.keys();let O=oe.resolve();return S.forEach(V=>{O=O.next(()=>w.getEntry(h,V)).next(H=>{const ge=y.docVersions.get(V);ht(null!==ge),H.version.compareTo(ge)<0&&(D.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),w.addEntry(H)))})}),O.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=xt();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(h=h.add(l.batch.mutations[y].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function LO(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function OL(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((D,S)=>{const O=i.get(S);if(!O)return;h.push(t.Cs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,D.addedDocuments,S)));let V=O.withSequenceNumber(a.currentSequenceNumber);var H,ge,be;e.targetMismatches.has(S)?V=V.withResumeToken(Tr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):D.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(D.resumeToken,r)),i=i.insert(S,V),ge=V,be=D,(0===(H=O).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||be.addedDocuments.size+be.modifiedDocuments.size+be.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,V))});let y=Cs(),w=xt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(VO(a,l,e.documentUpdates).next(D=>{y=D.Wi,w=D.zi})),!r.isEqual(bt.min())){const D=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return oe.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,w)).next(()=>y)}).then(a=>(t.Ui=i,a))}function VO(n,e,t){let r=xt(),i=xt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Cs();return t.forEach((h,y)=>{const w=a.get(h);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),y.isNoDocument()&&y.version.isEqual(bt.min())?(e.removeEntry(h,y.readTime),l=l.insert(h,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),l=l.insert(h,y)):Oe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",y.version)}),{Wi:l,zi:i}})}function PL(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function t_(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,oe.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new lf(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function n_(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ys(l))throw l;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),ix.apply(this,arguments)}function fD(n,e,t){const r=ze(n);let i=bt.min(),a=xt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,y,w){const D=ze(h),S=D.qi.get(w);return void 0!==S?oe.resolve(D.Ui.get(S)):D.Cs.getTargetData(y,w)}(r,l,Ui(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(y=>{a=y})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:bt.min(),t?a:xt())).next(h=>(jO(r,C0(e),h),{documents:h,Hi:a})))}function UO(n,e){const t=ze(n),r=ze(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function BO(n,e){const t=ze(n),r=t.Ki.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,n0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(jO(t,e,i),i))}function jO(n,e,t){let r=n.Ki.get(e)||bt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function sx(){return sx=(0,_e.Z)(function*(n,e,t,r){const i=ze(n);let a=xt(),l=Cs();for(const w of t){const D=e.Ji(w.metadata.name);w.document&&(a=a.add(D));const S=e.Yi(w);S.setReadTime(e.Xi(w.metadata.readTime)),l=l.insert(D,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield t_(i,(w=r,Ui(Yh(sn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>VO(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.Cs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Cs.addMatchingKeys(w,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.Wi,D.zi)).next(()=>D.Wi)))}),sx.apply(this,arguments)}function FL(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,_e.Z)(function*(n,e,t=xt()){const r=yield t_(n,Ui(ZA(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=kr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(Tr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),ox.apply(this,arguments)}function HO(n,e){return`firestore_clients_${n}_${e}`}function $O(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ax(n,e){return`firestore_targets_${n}_${e}`}class pD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Re(i.error.code,i.error.message))),l?new pD(e,t,i.state,a):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class H0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Re(r.error.code,r.error.message))),a?new H0(e,r.state,i):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=sf();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=c0(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new gD(e,a):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ux{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ux(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lx{constructor(){this.activeTargetIds=sf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cx{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Vn(Lt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=HO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new lx),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(HO(e.persistenceKey,i));if(a){const l=gD.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ax(this.persistenceKey,e));if(r){const i=H0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ax(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Ji.at;if(null!=a)try{const h=JSON.parse(a);ht("number"==typeof h),l=h}catch(h){wr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Ji.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new pD(this.currentUser,e,t,r),a=$O(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=$O(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=ax(this.persistenceKey,e),a=new H0(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return gD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return pD.Zi(new Kr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return H0.Zi(i,t)}yr(e){return ux.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{a.has(y)||h.push(y)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=sf();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class GO{constructor(){this.Lr=new lx,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new lx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LL{qr(e){}shutdown(){}}class WO{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const VL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UL{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class BL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Oe("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(y=>(Oe("RestConnection","Received: ",y),y),y=>{throw xo("RestConnection",`${e} failed with error: `,y,"url: ",l,"request:",r),y})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+og,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${VL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new Db;h.setWithCredentials(!0),h.listenOnce(ig.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Yw.NO_ERROR:const w=h.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case Yw.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),l(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Yw.HTTP_ERROR:const D=h.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const O=function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(H)>=0?H:ue.UNKNOWN}(S.status);l(new Re(O,S.message))}else l(new Re(ue.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);h.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=oA(),l=aA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new bb({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const y=i.join("");Oe("Connection","Creating WebChannel: "+y,h);const w=a.createWebChannel(y,h);let D=!1,S=!1;const O=new UL({Hr:H=>{S?Oe("Connection","Not sending because WebChannel is closed:",H):(D||(Oe("Connection","Opening WebChannel transport."),w.open(),D=!0),Oe("Connection","WebChannel sending:",H),w.send(H))},Jr:()=>w.close()}),V=(H,ge,be)=>{H.listen(ge,Ye=>{try{be(Ye)}catch(gt){setTimeout(()=>{throw gt},0)}})};return V(w,sg.EventType.OPEN,()=>{S||Oe("Connection","WebChannel transport opened.")}),V(w,sg.EventType.CLOSE,()=>{S||(S=!0,Oe("Connection","WebChannel transport closed"),O.io())}),V(w,sg.EventType.ERROR,H=>{S||(S=!0,xo("Connection","WebChannel transport errored:",H),O.io(new Re(ue.UNAVAILABLE,"The operation could not be completed")))}),V(w,sg.EventType.MESSAGE,H=>{var ge;if(!S){const be=H.data[0];ht(!!be);const Ye=be,gt=Ye.error||(null===(ge=Ye[0])||void 0===ge?void 0:ge.error);if(gt){Oe("Connection","WebChannel received error:",gt);const Dt=gt.status;let Nt=function(Wt){const ci=Pr[Wt];if(void 0!==ci)return Kb(ci)}(Dt),Vt=gt.message;void 0===Nt&&(Nt=ue.INTERNAL,Vt="Unknown error status: "+Dt+" with message "+gt.message),S=!0,O.io(new Re(Nt,Vt)),w.close()}else Oe("Connection","WebChannel received:",be),O.ro(be)}}),V(l,Cb.STAT_EVENT,H=>{H.stat===Qw.PROXY?Oe("Connection","Detected buffering proxy"):H.stat===Qw.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.so()},0),O}}function zO(){return typeof window<"u"?window:null}function mD(){return typeof document<"u"?document:null}function $0(n){return new HA(n,!0)}class dx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class qO{constructor(e,t,r,i,a,l,h,y){this.Hs=e,this.vo=r,this.Vo=i,this.So=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new dx(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,_e.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_e.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Re(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.No.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}jo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jL extends qO{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function rO(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:nt(),i=e.targetChange.targetIds||[],a=function(y,w){return y.gt?(ht(void 0===w||"string"==typeof w),Tr.fromBase64String(w||"")):(ht(void 0===w||w instanceof Uint8Array),Tr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(y){const w=void 0===y.code?ue.UNKNOWN:Kb(y.code);return new Re(w,y.message||"")}(l);t=new Eg(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=No(n,r.document.name),a=kr(r.document.updateTime),l=new bi({mapValue:{fields:r.document.fields}}),h=vn.newFoundDocument(i,a,l);t=new af(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=No(n,r.document),a=r.readTime?kr(r.readTime):bt.min(),l=vn.newNoDocument(i,a);t=new af([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=No(n,r.document);t=new af([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,a=new XR(r.count||0);t=new Ky(r.targetId,a)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return bt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?bt.min():a.readTime?kr(a.readTime):bt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=uf(this.It),t.addTarget=function(i,a){let l;const h=a.target;return l=jy(h)?{documents:WA(i,h)}:{query:rD(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Jb(i,a.resumeToken):a.snapshotVersion.compareTo(bt.min())>0&&(l.readTime=Ig(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function iO(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=uf(this.It),t.removeTarget=e,this.Lo(t)}}class HL extends qO{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function GA(n,e){return n&&n.length>0?(ht(void 0!==e),n.map(t=>function(r,i){let a=kr(r.updateTime?r.updateTime:i);return a.isEqual(bt.min())&&(a=kr(i)),new $b(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.tu(r,t)}return ht(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=uf(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Dg(this.It,r))};this.Lo(t)}}class $L extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=i,this.su=!1}iu(){if(this.su)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ue.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.So._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(ue.UNKNOWN,a.toString())})}terminate(){this.su=!0}}class WL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(wr(t),this.uu=!1):Oe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class zL{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.qr(h=>{r.enqueueAndForget((0,_e.Z)(function*(){var y;sd(l)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,_e.Z)(function*(w){const D=ze(w);D.wu.add(4),yield r_(D),D.yu.set("Unknown"),D.wu.delete(4),yield G0(D)}),function(w){return y.apply(this,arguments)})(l))}))}),this.yu=new WL(r,i)}}function G0(n){return fx.apply(this,arguments)}function fx(){return fx=(0,_e.Z)(function*(n){if(sd(n))for(const e of n.mu)yield e(!0)}),fx.apply(this,arguments)}function r_(n){return px.apply(this,arguments)}function px(){return px=(0,_e.Z)(function*(n){for(const e of n.mu)yield e(!1)}),px.apply(this,arguments)}function yD(n,e){const t=ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),yx(t)?mx(t):s_(t).Oo()&&gx(t,e))}function W0(n,e){const t=ze(n),r=s_(t);t._u.delete(e),r.Oo()&&KO(t,e),0===t._u.size&&(r.Oo()?r.$o():sd(t)&&t.yu.set("Unknown"))}function gx(n,e){n.pu.Mt(e.targetId),s_(n).Ho(e)}function KO(n,e){n.pu.Mt(e),s_(n).Jo(e)}function mx(n){n.pu=new tO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),s_(n).start(),n.yu.cu()}function yx(n){return sd(n)&&!s_(n).ko()&&n._u.size>0}function sd(n){return 0===ze(n).wu.size}function ZO(n){n.pu=void 0}function qL(n){return _x.apply(this,arguments)}function _x(){return _x=(0,_e.Z)(function*(n){n._u.forEach((e,t)=>{gx(n,e)})}),_x.apply(this,arguments)}function KL(n,e){return vx.apply(this,arguments)}function vx(){return vx=(0,_e.Z)(function*(n,e){ZO(n),yx(n)?(n.yu.lu(e),mx(n)):n.yu.set("Unknown")}),vx.apply(this,arguments)}function ZL(n,e,t){return wx.apply(this,arguments)}function wx(){return wx=(0,_e.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Eg&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i._u.delete(h),i.pu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _D(n,r)}else if(e instanceof af?n.pu.Gt(e):e instanceof Ky?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(bt.min()))try{const r=yield LO(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.pu.te(a);return l.targetChanges.forEach((h,y)=>{if(h.resumeToken.approximateByteSize()>0){const w=i._u.get(y);w&&i._u.set(y,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const y=i._u.get(h);if(!y)return;i._u.set(h,y.withResumeToken(Tr.EMPTY_BYTE_STRING,y.snapshotVersion)),KO(i,h);const w=new lf(y.target,h,1,y.sequenceNumber);gx(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield _D(n,r)}var r}),wx.apply(this,arguments)}function _D(n,e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,_e.Z)(function*(n,e,t){if(!Ys(e))throw e;n.wu.add(1),yield r_(n),n.yu.set("Offline"),t||(t=()=>LO(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield G0(n)}))}),Ex.apply(this,arguments)}function YO(n,e){return e().catch(t=>_D(n,t,e))}function i_(n){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,_e.Z)(function*(n){const e=ze(n),t=hf(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;YL(e);)try{const i=yield PL(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,QL(e,i)}catch(i){yield _D(e,i)}QO(e)&&JO(e)}),Ix.apply(this,arguments)}function YL(n){return sd(n)&&n.du.length<10}function QL(n,e){n.du.push(e);const t=hf(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function QO(n){return sd(n)&&!hf(n).ko()&&n.du.length>0}function JO(n){hf(n).start()}function JL(n){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,_e.Z)(function*(n){hf(n).nu()}),Cx.apply(this,arguments)}function XL(n){return bx.apply(this,arguments)}function bx(){return bx=(0,_e.Z)(function*(n){const e=hf(n);for(const t of n.du)e.Zo(t.mutations)}),bx.apply(this,arguments)}function eV(n,e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,_e.Z)(function*(n,e,t){const r=n.du.shift(),i=Mg.from(r,e,t);yield YO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield i_(n)}),Dx.apply(this,arguments)}function tV(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,_e.Z)(function*(n,e){var t;e&&hf(n).Xo&&(yield(t=(0,_e.Z)(function*(r,i){if(qb(a=i.code)&&a!==ue.ABORTED){const l=r.du.shift();hf(r).Fo(),yield YO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield i_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),QO(n)&&JO(n)}),Tx.apply(this,arguments)}function XO(n,e){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,_e.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=sd(t);t.wu.add(3),yield r_(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield G0(t)}),Sx.apply(this,arguments)}function Ax(n,e){return xx.apply(this,arguments)}function xx(){return xx=(0,_e.Z)(function*(n,e){const t=ze(n);e?(t.wu.delete(2),yield G0(t)):e||(t.wu.add(2),yield r_(t),t.yu.set("Unknown"))}),xx.apply(this,arguments)}function s_(n){return n.Iu||(n.Iu=function(e,t,r){const i=ze(e);return i.iu(),new jL(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:qL.bind(null,n),Zr:KL.bind(null,n),zo:ZL.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Fo(),yx(n)?mx(n):n.yu.set("Unknown")):(yield n.Iu.stop(),ZO(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function hf(n){return n.Tu||(n.Tu=function(e,t,r){const i=ze(e);return i.iu(),new HL(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:JL.bind(null,n),Zr:tV.bind(null,n),eu:XL.bind(null,n),tu:eV.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.Fo(),yield i_(n)):(yield n.Tu.stop(),n.du.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Mx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new Mx(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o_(n,e){if(wr("AsyncQueue",`${e}: ${n}`),Ys(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class a_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=qy(),this.sortedSet=new Vn(this.comparator)}static emptySet(e){return new a_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof a_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new a_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class eP{constructor(){this.Eu=new Vn(qe.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):nt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class u_{constructor(e,t,r,i,a,l,h,y,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new u_(e,t,a_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class nV{constructor(){this.Ru=void 0,this.listeners=[]}}class rV{constructor(){this.queries=new Fl(e=>E0(e),nd),this.onlineState="Unknown",this.bu=new Set}}function Nx(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new nV),i)try{a.Ru=yield t.onListen(r)}catch(l){const h=o_(l,`Initialization of query '${Wy(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.vu(a.Ru)&&kx(t)}),Rx.apply(this,arguments)}function Ox(n,e){return Px.apply(this,arguments)}function Px(){return Px=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Px.apply(this,arguments)}function iV(n,e){const t=ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.vu(i)&&(r=!0);l.Ru=i}}r&&kx(t)}function sV(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function kx(n){n.bu.forEach(e=>{e.next()})}class Fx{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new u_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=u_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class oV{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class tP{constructor(e){this.It=e}Ji(e){return No(this.It,e)}Yi(e){return e.metadata.exists?nD(this.It,e.document,!1):vn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return kr(e)}}class aV{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nP(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=sn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new tP(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||xt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function kL(n,e,t,r){return sx.apply(this,arguments)}(e.localStore,new tP(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield FL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function nP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rP{constructor(e){this.key=e}}class iP{constructor(e){this.key=e}}class sP{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=xt(),this.mutatedKeys=xt(),this.Gu=b0(e),this.Qu=new a_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new eP,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const O=i.get(D),V=I0(this.query,S)?S:null,H=!!O&&this.mutatedKeys.has(O.key),ge=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let be=!1;O&&V?O.data.isEqual(V.data)?H!==ge&&(r.track({type:3,doc:V}),be=!0):this.Hu(O,V)||(r.track({type:2,doc:V}),be=!0,(y&&this.Gu(V,y)>0||w&&this.Gu(V,w)<0)&&(h=!0)):!O&&V?(r.track({type:0,doc:V}),be=!0):O&&!V&&(r.track({type:1,doc:O}),be=!0,(y||w)&&(h=!0)),be&&(V?(l=l.add(V),a=ge?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Qu:l,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((w,D)=>function(S,O){const V=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return V(S)-V(O)}(w.type,D.type)||this.Gu(w.doc,D.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,y=h!==this.qu;return this.qu=h,0!==a.length||y?{snapshot:new u_(this.query,e.Qu,i,a,e.mutatedKeys,0===h,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new eP,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=xt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new iP(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new rP(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=xt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return u_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class uV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lV{constructor(e){this.key=e,this.nc=!1}}class cV{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Fl(h=>E0(h),nd),this.rc=new Map,this.oc=new Set,this.uc=new Vn(qe.comparator),this.cc=new Map,this.ac=new JA,this.hc={},this.lc=new Map,this.fc=Vg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function dV(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,_e.Z)(function*(n,e){const t=oM(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield t_(t.localStore,Ui(e));t.isPrimaryClient&&yD(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Vx(t,e,r,"current"===h,l.resumeToken)}return i}),Lx.apply(this,arguments)}function Vx(n,e,t,r,i){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,_e.Z)(function*(n,e,t,r,i){n._c=(S,O,V)=>{return(H=(0,_e.Z)(function*(ge,be,Ye,gt){let Dt=be.view.Wu(Ye);Dt.$i&&(Dt=yield fD(ge.localStore,be.query,!1).then(({documents:Wt})=>be.view.Wu(Wt,Dt)));const Nt=gt&&gt.targetChanges.get(be.targetId),Vt=be.view.applyChanges(Dt,ge.isPrimaryClient,Nt);return Zx(ge,be.targetId,Vt.Xu),Vt.snapshot}),function(ge,be,Ye,gt){return H.apply(this,arguments)})(n,S,O,V);var H};const a=yield fD(n.localStore,e,!0),l=new sP(e,a.Hi),h=l.Wu(a.documents),y=wg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(h,n.isPrimaryClient,y);Zx(n,t,w.Xu);const D=new uV(e,t,l);return n.ic.set(e,D),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),w.snapshot}),Ux.apply(this,arguments)}function hV(n,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,_e.Z)(function*(n,e){const t=ze(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!nd(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield n_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),W0(t.remoteStore,r.targetId),l_(t,r.targetId)}).catch(Is))):(l_(t,r.targetId),yield n_(t.localStore,r.targetId,!0))}),Bx.apply(this,arguments)}function jx(){return jx=(0,_e.Z)(function*(n,e,t){const r=aM(n);try{const i=yield function(a,l){const h=ze(a),y=Ln.now(),w=l.reduce((O,V)=>O.add(V.key),xt());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",O=>{let V=Cs(),H=xt();return h.Gi.getEntries(O,w).next(ge=>{V=ge,V.forEach((be,Ye)=>{Ye.isValidDocument()||(H=H.add(be))})}).next(()=>h.localDocuments.getOverlayedDocuments(O,V)).next(ge=>{D=ge;const be=[];for(const Ye of l){const gt=Wb(Ye,D.get(Ye.key).overlayedDocument);null!=gt&&be.push(new ha(Ye.key,gt,p0(gt.value.mapValue),Yn.exists(!0)))}return h.mutationQueue.addMutationBatch(O,y,be,l)}).next(ge=>{S=ge;const be=ge.applyToLocalDocumentSet(D,H);return h.documentOverlayCache.saveOverlays(O,ge.batchId,be)})}).then(()=>({batchId:S.batchId,changes:FA(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let y=a.hc[a.currentUser.toKey()];y||(y=new Vn(Lt)),y=y.insert(l,h),a.hc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield od(r,i.changes),yield i_(r.remoteStore)}catch(i){const a=o_(i,"Failed to persist write");t.reject(a)}}),jx.apply(this,arguments)}function oP(n,e){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,_e.Z)(function*(n,e){const t=ze(n);try{const r=yield OL(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?ht(l.nc):i.removedDocuments.size>0&&(ht(l.nc),l.nc=!1))}),yield od(t,r,e)}catch(r){yield Is(r)}}),Hx.apply(this,arguments)}function aP(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const h=l.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=ze(a);h.onlineState=l;let y=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.Pu(l)&&(y=!0)}),y&&kx(h)}(r.eventManager,e),i.length&&r.sc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pV(n,e,t){return $x.apply(this,arguments)}function $x(){return $x=(0,_e.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Vn(qe.comparator);l=l.insert(a,vn.newNoDocument(a,bt.min()));const h=xt().add(a),y=new id(bt.min(),new Map,new _n(Lt),l,h);yield oP(r,y),r.uc=r.uc.remove(a),r.cc.delete(e),Yx(r)}else yield n_(r.localStore,e,!1).then(()=>l_(r,e,t)).catch(Is)}),$x.apply(this,arguments)}function gV(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield RL(t.localStore,e);Kx(t,r,null),qx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield od(t,i)}catch(i){yield Is(i)}}),Gx.apply(this,arguments)}function mV(n,e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,_e.Z)(function*(n,e,t){const r=ze(n);try{const i=yield function(a,l){const h=ze(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return h.mutationQueue.lookupMutationBatch(y,l).next(D=>(ht(null!==D),w=D.keys(),h.mutationQueue.removeMutationBatch(y,D))).next(()=>h.mutationQueue.performConsistencyCheck(y)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(y,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>h.localDocuments.getDocuments(y,w))})}(r.localStore,e);Kx(r,e,t),qx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield od(r,i)}catch(i){yield Is(i)}}),Wx.apply(this,arguments)}function zx(){return zx=(0,_e.Z)(function*(n,e){const t=ze(n);sd(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=o_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),zx.apply(this,arguments)}function qx(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Kx(n,e,t){const r=ze(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function l_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||uP(n,r)})}function uP(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(W0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Yx(n))}function Zx(n,e,t){for(const r of t)r instanceof rP?(n.ac.addReference(r.key,e),_V(n,r)):r instanceof iP?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||uP(n,r.key)):nt()}function _V(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oc.add(r),Yx(n))}function Yx(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(sn.fromString(e)),r=n.fc.next();n.cc.set(r,new lV(t)),n.uc=n.uc.insert(t,r),yD(n.remoteStore,new lf(Ui(Yh(t.path)),r,2,Ji.at))}}function od(n,e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=[],a=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,y)=>{l.push(r._c(y,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const D=nx.Ci(y.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.sc.zo(i),yield(h=(0,_e.Z)(function*(y,w){const D=ze(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>oe.forEach(w,O=>oe.forEach(O.Si,V=>D.persistence.referenceDelegate.addReference(S,O.targetId,V)).next(()=>oe.forEach(O.Di,V=>D.persistence.referenceDelegate.removeReference(S,O.targetId,V)))))}catch(S){if(!Ys(S))throw S;Oe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const O=S.targetId;if(!S.fromCache){const V=D.Ui.get(O),ge=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.Ui=D.Ui.insert(O,ge)}}}),function(y,w){return h.apply(this,arguments)})(r.localStore,a))}),Qx.apply(this,arguments)}function vV(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,_e.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield FO(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Re(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield od(t,r.ji)}var i}),Jx.apply(this,arguments)}function wV(n,e){const t=ze(n),r=t.cc.get(e);if(r&&r.nc)return xt().add(r.key);{let i=xt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function EV(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,_e.Z)(function*(n,e){const t=ze(n),r=yield fD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&Zx(t,e.targetId,i.Xu),i}),Xx.apply(this,arguments)}function IV(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,_e.Z)(function*(n,e){const t=ze(n);return BO(t.localStore,e).then(r=>od(t,r))}),eM.apply(this,arguments)}function CV(n,e,t,r){return tM.apply(this,arguments)}function tM(){return tM=(0,_e.Z)(function*(n,e,t,r){const i=ze(n),a=yield function(l,h){const y=ze(l),w=ze(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Tn(D,h).next(S=>S?y.localDocuments.getDocuments(D,S):oe.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield i_(i.remoteStore):"acknowledged"===t||"rejected"===t?(Kx(i,e,r||null),qx(i,e),h=e,ze(ze(i.localStore).mutationQueue).An(h)):nt(),yield od(i,a)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),tM.apply(this,arguments)}function nM(){return nM=(0,_e.Z)(function*(n,e){const t=ze(n);if(oM(t),aM(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield lP(t,r.toArray());t.dc=!0,yield Ax(t.remoteStore,!0);for(const a of i)yD(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(l_(t,l),n_(t.localStore,l,!0))),W0(t.remoteStore,l)}),yield i,yield lP(t,r),function(a){const l=ze(a);l.cc.forEach((h,y)=>{W0(l.remoteStore,y)}),l.ac.fs(),l.cc=new Map,l.uc=new Vn(qe.comparator)}(t),t.dc=!1,yield Ax(t.remoteStore,!1)}}),nM.apply(this,arguments)}function lP(n,e,t){return rM.apply(this,arguments)}function rM(){return rM=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=[],a=[];for(const l of e){let h;const y=r.rc.get(l);if(y&&0!==y.length){h=yield t_(r.localStore,Ui(y[0]));for(const w of y){const D=r.ic.get(w),S=yield EV(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield UO(r.localStore,l);h=yield t_(r.localStore,w),yield Vx(r,cP(w),l,!1,h.resumeToken)}i.push(h)}return r.sc.zo(a),i}),rM.apply(this,arguments)}function cP(n){return Qs(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function DV(n){const e=ze(n);return ze(ze(e.localStore).persistence).vi()}function TV(n,e,t,r){return iM.apply(this,arguments)}function iM(){return iM=(0,_e.Z)(function*(n,e,t,r){const i=ze(n);if(i.dc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield BO(i.localStore,C0(a[0])),h=id.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Tr.EMPTY_BYTE_STRING);yield od(i,l,h);break}case"rejected":yield n_(i.localStore,e,!0),l_(i,e,r);break;default:nt()}}),iM.apply(this,arguments)}function SV(n,e,t){return sM.apply(this,arguments)}function sM(){return sM=(0,_e.Z)(function*(n,e,t){const r=oM(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const a=yield UO(r.localStore,i),l=yield t_(r.localStore,a);yield Vx(r,cP(a),l.targetId,!1,l.resumeToken),yD(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield n_(r.localStore,i,!1).then(()=>{W0(r.remoteStore,i),l_(r,i)}).catch(Is))}}),sM.apply(this,arguments)}function oM(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pV.bind(null,e),e.sc.zo=iV.bind(null,e.eventManager),e.sc.wc=sV.bind(null,e.eventManager),e}function aM(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mV.bind(null,e),e}class dP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.It=$0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return kO(this.persistence,new PO,e.initialUser,this.It)}yc(e){return new RO(dD.Bs,this.It)}gc(e){return new GO}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hP extends dP{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield aM(r.Ac.syncEngine),yield i_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return kO(this.persistence,new PO,e.initialUser,this.It)}Tc(e,t){return new yL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new _A(t,this.persistence);return new yA(e.asyncQueue,r)}yc(e){const t=tx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Js.withCacheSize(this.cacheSizeBytes):Js.DEFAULT;return new ex(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zO(),mD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new GO}}class xV extends hP{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof cx&&(r.sharedClientState.syncEngine={Fr:CV.bind(null,i),$r:TV.bind(null,i),Br:SV.bind(null,i),vi:DV.bind(null,i),Mr:IV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,_e.Z)(function*(l){yield function bV(n,e){return nM.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=zO();if(!cx.C(t))throw new Re(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=tx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class uM{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>aP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=vV.bind(null,r.syncEngine),yield Ax(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rV}createDatastore(e){const t=$0(e.databaseInfo.databaseId),r=new BL(e.databaseInfo);return new $L(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>aP(this.syncEngine,h,0),l=WO.C()?new WO:new LL,new zL(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,y,w){const D=new cV(r,i,a,l,h,y);return w&&(D.dc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=ze(t);Oe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield r_(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lM(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fP(n,e,t,r){if(!0===e&&!0===r)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pP(n){if(!qe.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gP(n){if(qe.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vD(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mP(n,e){if(e<=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const yP=new Map;class _P{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class z0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _P({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _P(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Oy;switch(t.type){case"gapi":return new Ab(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yP.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),yP.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class Vl extends es{constructor(e,t,r){super(e,t,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new qe(e))}withConverter(e){return new Vl(this.firestore,e,this._path)}}function wP(n,e,...t){if(n=(0,P.m9)(n),lM("collection","path",e),n instanceof z0){const r=sn.fromString(e,...t);return gP(r),new Vl(n,null,r)}{if(!(n instanceof Qn||n instanceof Vl))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return gP(r),new Vl(n.firestore,null,r)}}function wD(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=xb.R()),lM("doc","path",e),n instanceof z0){const r=sn.fromString(e,...t);return pP(r),new Qn(n,null,new qe(r))}{if(!(n instanceof Qn||n instanceof Vl))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return pP(r),new Qn(n.firestore,n instanceof Vl?n.converter:null,new qe(r))}}function EP(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof Qn||n instanceof Vl)&&(e instanceof Qn||e instanceof Vl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cM(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof es&&e instanceof es&&n.firestore===e.firestore&&nd(n._query,e._query)&&n.converter===e.converter}function IP(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ED{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class NV{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Or,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new oV(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class PV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,l){const h=ze(a),y=uf(h.It)+"/documents",w={documents:l.map(V=>Cg(h.It,V))},D=yield h._o("BatchGetDocuments",y,w,l.length),S=new Map;D.forEach(V=>{const H=function nO(n,e){return"found"in e?function(t,r){ht(!!r.found);const i=No(t,r.found.name),a=kr(r.found.updateTime),l=new bi({mapValue:{fields:r.found.fields}});return vn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){ht(!!r.missing),ht(!!r.readTime);const i=No(t,r.missing),a=kr(r.readTime);return vn.newNoDocument(i,a)}(n,e):nt()}(h.It,V);S.set(H.key.toString(),H)});const O=[];return l.forEach(V=>{const H=S.get(V.toString());ht(!!H),O.push(H)}),O}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=qe.fromPath(i);e.mutations.push(new N0(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const l=ze(i),h=uf(l.It)+"/documents",y={writes:a.map(w=>Dg(l.It,w))};yield l.ao("Commit",h,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?Yn.exists(!1):Yn.updateTime(t):Yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Re(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(t)}return Yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class kV{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.No=new dx(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,_e.Z)(function*(){const t=new PV(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!hg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!qb(t)}return!1}}class FV{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Kr.UNAUTHENTICATED,this.clientId=xb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(h){Oe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Oe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=o_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function CP(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield FO(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),dM.apply(this,arguments)}function bP(n,e){return hM.apply(this,arguments)}function hM(){return hM=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield fM(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>XO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>XO(e.remoteStore,a)),n.onlineComponents=e}),hM.apply(this,arguments)}function fM(n){return pM.apply(this,arguments)}function pM(){return pM=(0,_e.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield CP(n,new dP)),n.offlineComponents}),pM.apply(this,arguments)}function ID(n){return gM.apply(this,arguments)}function gM(){return gM=(0,_e.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield bP(n,new uM)),n.onlineComponents}),gM.apply(this,arguments)}function DP(n){return fM(n).then(e=>e.persistence)}function CD(n){return fM(n).then(e=>e.localStore)}function mM(n){return ID(n).then(e=>e.remoteStore)}function yM(n){return ID(n).then(e=>e.syncEngine)}function c_(n){return _M.apply(this,arguments)}function _M(){return _M=(0,_e.Z)(function*(n){const e=yield ID(n),t=e.eventManager;return t.onListen=dV.bind(null,e.syncEngine),t.onUnlisten=hV.bind(null,e.syncEngine),t}),_M.apply(this,arguments)}function SP(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,y){const w=new ED({next:S=>{a.enqueueAndForget(()=>Ox(i,D));const O=S.docs.has(l);!O&&S.fromCache?y.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&h&&"server"===h.source?y.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new Fx(Yh(l.path),w,{includeMetadataChanges:!0,ku:!0});return Nx(i,D)}(yield c_(n),n.asyncQueue,e,t,r)})),r.promise}function AP(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,y){const w=new ED({next:S=>{a.enqueueAndForget(()=>Ox(i,D)),S.fromCache&&"server"===h.source?y.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new Fx(l,w,{includeMetadataChanges:!0,ku:!0});return Nx(i,D)}(yield c_(n),n.asyncQueue,e,t,r)})),r.promise}class GV{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new dx(this,"async_queue_retry"),this.Wc=()=>{const t=mD();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=mD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=mD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Or;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Ys(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=Mx.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&nt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function vM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class WV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends z0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new GV,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||xP(this),this._firestoreClient.terminate()}}function Fr(n){return n._firestoreClient||xP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function xP(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Fb(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new FV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function MP(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield CP(n,t),yield bP(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;xo("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function NP(n){if(n._initialized||n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ul(Tr.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ul(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ad{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bg{constructor(e){this._methodName=e}}class bD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const tU=/^__.*__$/;class nU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ha(e,this.data,this.fieldMask,t,this.fieldTransforms):new _u(e,this.data,t,this.fieldTransforms)}}class RP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ha(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function OP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class DD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new DD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return AD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(OP(this.sa)&&tU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class rU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||$0(e)}da(e,t,r,i=!1){return new DD({sa:e,methodName:t,fa:r,path:ur.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function jg(n){const e=n._freezeSettings(),t=$0(n._databaseId);return new rU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TD(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);CM("Data must be an object, but it was:",l,r);const h=FP(r,l);let y,w;if(a.merge)y=new Zr(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const O=bM(e,S,t);if(!l.contains(O))throw new Re(ue.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);VP(D,O)||D.push(O)}y=new Zr(D),w=l.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,w=l.fieldTransforms;return new nU(new bi(h),y,w)}class q0 extends Bg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof q0}}function PP(n,e,t){return new DD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class wM extends Bg{_toFieldTransform(e){return new ef(e.path,new Qh)}isEqual(e){return e instanceof wM}}class iU extends Bg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=PP(this,e,!0),r=this._a.map(a=>Hg(a,t)),i=new Jh(r);return new ef(e.path,i)}isEqual(e){return this===e}}class sU extends Bg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=PP(this,e,!0),r=this._a.map(a=>Hg(a,t)),i=new rd(r);return new ef(e.path,i)}isEqual(e){return this===e}}class oU extends Bg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Xh(e.It,zy(e.It,this.wa));return new ef(e.path,t)}isEqual(e){return this===e}}function EM(n,e,t,r){const i=n.da(1,e,t);CM("Data must be an object, but it was:",i,r);const a=[],l=bi.empty();Ml(r,(y,w)=>{const D=SD(e,y,t);w=(0,P.m9)(w);const S=i.ca(D);if(w instanceof q0)a.push(D);else{const O=Hg(w,S);null!=O&&(a.push(D),l.set(D,O))}});const h=new Zr(a);return new RP(l,h,i.fieldTransforms)}function IM(n,e,t,r,i,a){const l=n.da(1,e,t),h=[bM(e,r,t)],y=[i];if(a.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<a.length;O+=2)h.push(bM(e,a[O])),y.push(a[O+1]);const w=[],D=bi.empty();for(let O=h.length-1;O>=0;--O)if(!VP(w,h[O])){const V=h[O];let H=y[O];H=(0,P.m9)(H);const ge=l.ca(V);if(H instanceof q0)w.push(V);else{const be=Hg(H,ge);null!=be&&(w.push(V),D.set(V,be))}}const S=new Zr(w);return new RP(D,S,l.fieldTransforms)}function kP(n,e,t,r=!1){return Hg(t,n.da(r?4:3,e))}function Hg(n,e){if(LP(n=(0,P.m9)(n)))return CM("Unsupported field value:",e,n),FP(n,e);if(n instanceof Bg)return function(t,r){if(!OP(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Hg(l,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zy(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ln.fromDate(t);return{timestampValue:Ig(r.It,i)}}if(t instanceof Ln){const i=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ig(r.It,i)}}if(t instanceof bD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ul)return{bytesValue:Jb(r.It,t._byteString)};if(t instanceof Qn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${vD(t)}`)}(n,e)}function FP(n,e){const t={};return a0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ml(n,(r,i)=>{const a=Hg(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function LP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof bD||n instanceof Ul||n instanceof Qn||n instanceof Bg)}function CM(n,e,t){if(!LP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function bM(n,e,t){if((e=(0,P.m9)(e))instanceof ad)return e._internalPath;if("string"==typeof e)return SD(n,e);throw AD("Field path arguments must be of type string or ",n,!1,void 0,t)}const aU=new RegExp("[~\\*/\\[\\]]");function SD(n,e,t){if(e.search(aU)>=0)throw AD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw AD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(a||l)&&(y+=" (found",a&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new Re(ue.INVALID_ARGUMENT,h+n+y)}function VP(n,e){return n.some(t=>t.isEqual(e))}class K0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uU extends K0{data(){return super.data()}}function xD(n,e){return"string"==typeof e?SD(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}function UP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z0{}function ff(n,...e){for(const t of e)n=t._apply(n);return n}class lU extends Z0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=jg(e.firestore),r=function(i,a,l,h,y,w,D){let S;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){WP(D,w);const V=[];for(const H of D)V.push(GP(h,i,H));S={arrayValue:{values:V}}}else S=GP(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||WP(D,w),S=kP(l,"where",D,"in"===w||"not-in"===w);const O=li.create(y,w,S);return function(V,H){if(H.dt()){const be=Xi(V);if(null!==be&&!be.isEqual(H.field))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${H.field.toString()}'`);const Ye=v0(V);null!==Ye&&zP(0,H.field,Ye)}const ge=function(be,Ye){for(const gt of be.filters)if(Ye.indexOf(gt.op)>=0)return gt.op;return null}(V,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(H.op));if(null!==ge)throw new Re(ue.INVALID_ARGUMENT,ge===H.op?`Invalid query. You cannot use more than one '${H.op.toString()}' filter.`:`Invalid query. You cannot use '${H.op.toString()}' filters with '${ge.toString()}' filters.`)}(i,O),O}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new es(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Pl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class dU extends Z0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new gg(i,a);return function(h,y){if(null===v0(h)){const w=Xi(h);null!==w&&zP(0,w,y.field)}}(r,l),l}(e._query,this.ma,this.pa);return new es(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Pl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class BP extends Z0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new es(e.firestore,e.converter,Gy(e._query,this.Ia,this.Ta))}}class jP extends Z0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=$P(e,this.type,this.Ea,this.Aa);return new es(e.firestore,e.converter,(i=t,new Pl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class HP extends Z0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=$P(e,this.type,this.Ea,this.Aa);return new es(e.firestore,e.converter,(i=t,new Pl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function $P(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof K0)return function(i,a,l,h,y){if(!h)throw new Re(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of kl(i))if(D.field.isKeyField())w.push(td(a,h.key));else{const S=h.data.field(D.field);if(l0(S))throw new Re(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const O=D.field.canonicalString();throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}w.push(S)}return new Ol(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=jg(n.firestore);return function(a,l,h,y,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Re(ue.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let V=0;V<w.length;V++){const H=w[V];if(S[V].field.isKeyField()){if("string"!=typeof H)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof H}`);if(!w0(a)&&-1!==H.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${H}' contains a slash.`);const ge=a.path.child(sn.fromString(H));if(!qe.isDocumentKey(ge))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ge}' is not because it contains an odd number of segments.`);const be=new qe(ge);O.push(td(l,be))}else{const ge=kP(h,y,H);O.push(ge)}}return new Ol(O,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function GP(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w0(e)&&-1!==t.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!qe.isDocumentKey(r))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return td(n,new qe(r))}if(t instanceof Qn)return td(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vD(t)}.`)}function WP(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function zP(n,e,t){if(!t.isEqual(e))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class DM{convertValue(e,t="none"){switch(Rl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Ml(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new bD(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dg(e));default:return null}}convertTimestamp(e){const t=Xc(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);ht(s(r));const i=new mu(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return i.isEqual(t)||wr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function MD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class vU extends DM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class $g{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends K0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Y0 extends ud{data(e={}){return super.data(e)}}class pf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $g(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Y0(this._firestore,this._userDataWriter,r.key,r,new $g(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Y0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new $g(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new Y0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new $g(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==l.type&&(y=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:wU(l.type),doc:h,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function qP(n,e){return n instanceof ud&&e instanceof ud?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pf&&e instanceof pf&&n._firestore===e._firestore&&cM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class gf extends DM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function KP(n,e,t){n=on(n,Qn);const r=on(n.firestore,Jn),i=MD(n.converter,e,t);return d_(r,[TD(jg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Yn.none())])}function ZP(n,e,t,...r){n=on(n,Qn);const i=on(n.firestore,Jn),a=jg(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof ad?IM(a,"updateDoc",n._key,e,t,r):EM(a,"updateDoc",n._key,e),d_(i,[l.toMutation(n._key,Yn.exists(!0))])}function YP(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||vM(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(vM(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let y,w,D;if(n instanceof Qn)w=on(n.firestore,Jn),D=Yh(n._key.path),y={next:S=>{e[l]&&e[l](TM(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=on(n,es);w=on(S.firestore,Jn),D=S._query;const O=new gf(w);y={next:V=>{e[l]&&e[l](new pf(w,O,S,V))},error:e[l+1],complete:e[l+2]},UP(n._query)}return function(S,O,V,H){const ge=new ED(H),be=new Fx(O,ge,V);return S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Nx(yield c_(S),be)})),()=>{ge.bc(),S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Ox(yield c_(S),be)}))}}(Fr(w),D,h,y)}function d_(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function fV(n,e,t){return jx.apply(this,arguments)}(yield yM(t),r,i)})),i.promise}(Fr(n),e)}function TM(n,e,t){const r=t.docs.get(e._key),i=new gf(n);return new ud(n,i,e._key,r,new $g(t.hasPendingWrites,t.fromCache),e.converter)}const MU={maxAttempts:5};class QP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jg(e)}set(e,t,r){this._verifyNotCommitted();const i=mf(e,this._firestore),a=MD(i.converter,t,r),l=TD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=mf(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof ad?IM(this._dataReader,"WriteBatch.update",a._key,t,r,i):EM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mf(e,this._firestore);return this._mutations=this._mutations.concat(new rf(t._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mf(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class NU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jg(e)}get(e){const t=mf(e,this._firestore),r=new vU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return nt();const a=i[0];if(a.isFoundDocument())return new K0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new K0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const i=mf(e,this._firestore),a=MD(i.converter,t,r),l=TD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=mf(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof ad?IM(this._dataReader,"Transaction.update",a._key,t,r,i):EM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=mf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mf(e,this._firestore),r=new gf(this._firestore);return super.get(e).then(i=>new ud(this._firestore,r,t._key,i._document,new $g(!1,!1),t.converter))}}function SM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function XP(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function ek(){if(!function vA(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){og=ia.SDK_VERSION,(0,ia._registerComponent)(new du.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new Jn(new cA(t.getProvider("auth-internal")),new t0(t.getProvider("app-check-internal")),function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(h.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ia.registerVersion)(Tb,"3.7.1",n),(0,ia.registerVersion)(Tb,"3.7.1","esm2017")}();class Q0{constructor(e){this._delegate=e}static fromBase64String(e){return ek(),new Q0(Ul.fromBase64String(e))}static fromUint8Array(e){return XP(),new Q0(Ul.fromUint8Array(e))}toBase64(){return ek(),this._delegate.toBase64()}toUint8Array(){return XP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function AM(n){return function BU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class jU{enableIndexedDbPersistence(e,t){return function qV(n,e){NP(n=on(n,Jn));const t=Fr(n),r=n._freezeSettings(),i=new uM;return MP(t,i,new hP(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KV(n){NP(n=on(n,Jn));const e=Fr(n),t=n._freezeSettings(),r=new uM;return MP(e,r,new xV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZV(n){if(n._initialized&&!n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!la.C())return Promise.resolve();const i=r+"main";yield la.delete(i)}),function(r){return t.apply(this,arguments)})(tx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class tk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof mu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function vP(n,e,t,r={}){var i;const a=(n=on(n,z0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&xo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Kr.MOCK_USER;else{l=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Kr(y)}n._authCredentials=new Py(new Sb(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function QV(n){return function LV(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield DP(n),t=yield mM(n);return e.setNetworkEnabled(!0),function(r){const i=ze(r);return i.wu.delete(0),G0(i)}(t)}))}(Fr(n=on(n,Jn)))}(this._delegate)}disableNetwork(){return function JV(n){return function VV(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield DP(n),t=yield mM(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=ze(i);a.wu.add(0),yield r_(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Fr(n=on(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function YV(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function yV(n,e){return zx.apply(this,arguments)}(yield yM(e),t)})),t.promise}(Fr(n=on(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function xU(n,e){return function jV(n,e){const t=new ED(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield c_(n),i=t,ze(r).bu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield c_(n),i=t,void ze(r).bu.delete(i);var r,i}))}}(Fr(n=on(n,Jn)),vM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new h_(this,wP(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new pa(this,wD(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ds(this,function MV(n,e){if(n=on(n,z0),lM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new es(n,null,(t=e,new Pl(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function RU(n,e,t){n=on(n,Jn);const r=Object.assign(Object.assign({},MU),t);return function(i){if(i.maxAttempts<1)throw new Re(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new Or;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const y=yield function TP(n){return ID(n).then(e=>e.datastore)}(i);new kV(i.asyncQueue,y,l,a,h).run()})),h.promise}(Fr(n),i=>e(new NU(n,i)),r)}(this._delegate,t=>e(new nk(this,t)))}batch(){return Fr(this._delegate),new rk(new QP(this._delegate,e=>d_(this._delegate,e)))}loadBundle(e){return function XV(n,e){const t=Fr(n=on(n,Jn)),r=new WV;return function HV(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,w){if(y instanceof Uint8Array)return IP(y,w);if(y instanceof ArrayBuffer)return IP(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new NV(y,l);var y}(t,$0(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function AV(n,e,t){const r=ze(n);var i;(i=(0,_e.Z)(function*(a,l,h){try{const y=yield l.getMetadata();if(yield function(O,V){const H=ze(O),ge=kr(V.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",be=>H.Ns.getBundleMetadata(be,V.id)).then(be=>!!be&&be.createTime.compareTo(ge)>=0)}(a.localStore,y))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(O=y).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);h._updateProgress(nP(y));const w=new aV(y,a.localStore,l.It);let D=yield l.mc();for(;D;){const O=yield w.Fu(D);O&&h._updateProgress(O),D=yield l.mc()}const S=yield w.complete();return yield od(a,S.Lu,void 0),yield function(O,V){const H=ze(O);return H.persistence.runTransaction("Save bundle","readwrite",ge=>H.Ns.saveBundleMetadata(ge,V))}(a.localStore,y),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(y){return xo("SyncEngine",`Loading bundle failed with ${y}`),h._failWith(y),Promise.resolve(new Set)}var O}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield yM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function eU(n,e){return function $V(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield CD(n),e)}))}(Fr(n=on(n,Jn)),e).then(t=>t?new es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ds(this,t):null)}}class ND extends DM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Q0(new Ul(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pa.forKey(t,this.firestore,null)}}class nk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ND(e)}get(e){const t=Wg(e);return this._delegate.get(t).then(r=>new J0(this._firestore,new ud(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Wg(e);return r?(SM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Wg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Wg(e);return this._delegate.delete(t),this}}class rk{constructor(e){this._delegate=e}set(e,t,r){const i=Wg(e);return r?(SM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Wg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Wg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Y0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new X0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Gg(e,new ND(e),t),i.set(t,a)),a}}Gg.INSTANCES=new WeakMap;class pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ND(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pa(t,new Qn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new pa(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new h_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new h_(this.firestore,wP(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof Qn&&EP(this._delegate,e)}set(e,t){t=SM("DocumentReference.set",t);try{return t?KP(this._delegate,e,t):KP(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ZP(this._delegate,e):ZP(this._delegate,e,t,...r)}catch(i){throw bs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function SU(n){return d_(on(n.firestore,Jn),[new rf(n._key,Yn.none())])}(this._delegate)}onSnapshot(...e){const t=ik(e),r=sk(e,i=>new J0(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return YP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function IU(n){n=on(n,Qn);const e=on(n.firestore,Jn),t=Fr(e),r=new gf(e);return function UV(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield function(y,w){const D=ze(y);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Re(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const y=o_(h,`Failed to get document '${a} from cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield CD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ud(e,r,n._key,i,new $g(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function CU(n){n=on(n,Qn);const e=on(n.firestore,Jn);return SP(Fr(e),n._key,{source:"server"}).then(t=>TM(e,n,t))}(this._delegate):function EU(n){n=on(n,Qn);const e=on(n.firestore,Jn);return SP(Fr(e),n._key).then(t=>TM(e,n,t))}(this._delegate),t.then(r=>new J0(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pa(this.firestore,this._delegate.withConverter(e?Gg.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function ik(n){for(const e of n)if("object"==typeof e&&!AM(e))return e;return{}}function sk(n,e){var t,r;let i;return i=AM(n[0])?n[0]:AM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class J0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qP(this._delegate,e._delegate)}}class X0 extends J0{data(e){const t=this._delegate.data(e);return function lA(n,e){n||nt()}(void 0!==t),t}}class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ND(e)}where(e,t,r){try{return new Ds(this.firestore,ff(this._delegate,function cU(n,e,t){const r=e,i=xD("where",n);return new lU(i,r,t)}(e,t,r)))}catch(i){throw bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ds(this.firestore,ff(this._delegate,function hU(n,e="asc"){const t=e,r=xD("orderBy",n);return new dU(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ds(this.firestore,ff(this._delegate,function fU(n){return mP("limit",n),new BP("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ds(this.firestore,ff(this._delegate,function pU(n){return mP("limitToLast",n),new BP("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ds(this.firestore,ff(this._delegate,function gU(...n){return new jP("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ds(this.firestore,ff(this._delegate,function mU(...n){return new jP("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ds(this.firestore,ff(this._delegate,function yU(...n){return new HP("endBefore",n,!1)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ds(this.firestore,ff(this._delegate,function _U(...n){return new HP("endAt",n,!0)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return cM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function DU(n){n=on(n,es);const e=on(n.firestore,Jn),t=Fr(e),r=new gf(e);return function BV(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield fD(i,a,!0),y=new sP(a,h.Hi),w=y.Wu(h.documents),D=y.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const y=o_(h,`Failed to execute query '${a} against cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield CD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new pf(e,r,n,i))}(this._delegate):"server"===e?.source?function TU(n){n=on(n,es);const e=on(n.firestore,Jn),t=Fr(e),r=new gf(e);return AP(t,n._query,{source:"server"}).then(i=>new pf(e,r,n,i))}(this._delegate):function bU(n){n=on(n,es);const e=on(n.firestore,Jn),t=Fr(e),r=new gf(e);return UP(n._query),AP(t,n._query).then(i=>new pf(e,r,n,i))}(this._delegate),t.then(r=>new xM(this.firestore,new pf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ik(e),r=sk(e,i=>new xM(this.firestore,new pf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return YP(this._delegate,t,r)}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?Gg.getInstance(this.firestore,e):null))}}class $U{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new X0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new X0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $U(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new X0(this._firestore,r))})}isEqual(e){return qP(this._delegate,e._delegate)}}class h_ extends Ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pa(this.firestore,e):null}doc(e){try{return new pa(this.firestore,void 0===e?wD(this._delegate):wD(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function AU(n,e){const t=on(n.firestore,Jn),r=wD(n),i=MD(n.converter,e);return d_(t,[TD(jg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new pa(this.firestore,t))}isEqual(e){return EP(this._delegate,e._delegate)}withConverter(e){return new h_(this.firestore,this._delegate.withConverter(e?Gg.getInstance(this.firestore,e):null))}}function Wg(n){return on(n,Qn)}class MM{constructor(...e){this._delegate=new ad(...e)}static documentId(){return new MM(ur.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof ad&&this._delegate._internalPath.isEqual(e._internalPath)}}class zg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function PU(){return new wM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new zg(e)}static delete(){const e=function OU(){return new q0("deleteField")}();return e._methodName="FieldValue.delete",new zg(e)}static arrayUnion(...e){const t=function kU(...n){return new iU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new zg(t)}static arrayRemove(...e){const t=function FU(...n){return new sU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new zg(t)}static increment(e){const t=function LU(n){return new oU("increment",n)}(e);return t._methodName="FieldValue.increment",new zg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const GU={Firestore:tk,GeoPoint:bD,Timestamp:Ln,Blob:Q0,Transaction:nk,WriteBatch:rk,DocumentReference:pa,DocumentSnapshot:J0,Query:Ds,QueryDocumentSnapshot:X0,QuerySnapshot:xM,CollectionReference:h_,FieldPath:MM,FieldValue:zg,setLogLevel:function HU(n){!function uA(n){Sl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function zU(n){(function WU(n,e){n.INTERNAL.registerComponent(new du.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},GU)))})(n,(e,t)=>new tk(e,t,new jU)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(ow.Z);var NM=L(6451),RD=L(5363),qU=L(6063);class KU extends bo.x{constructor(e=1/0,t=1/0,r=qU.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)h=y;h&&r.splice(0,h+1)}}}var ok=L(3099);function ak(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,ok.B)({connector:()=>new KU(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function uk(n,e){return(0,xm.m)(e)?Mr(()=>n,e):Mr(()=>n)}var RM=L(9468);L(5867);const ck=new Map,XU={activated:!1,tokenObservers:[]},eB={initialized:!1,enabled:!1};function Ti(n){return ck.get(n)||XU}function ga(n,e){ck.set(n,e)}function PD(){return eB}class sB{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function oB(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ts=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hk(n){if(!Ti(n).activated)throw Ts.create("use-before-activation",{appName:n.name})}function FM(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,_e.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const V=yield l.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const h={method:"POST",body:JSON.stringify(e),headers:a};let y,w;try{y=yield fetch(n,h)}catch(V){throw Ts.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==y.status)throw Ts.create("fetch-status-error",{httpStatus:y.status});try{w=yield y.json()}catch(V){throw Ts.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const D=w.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw Ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const S=1e3*Number(D[1]),O=Date.now();return{token:w.token,expireTimeMillis:O+S,issuedAtTimeMillis:O}}),LM.apply(this,arguments)}function cB(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const eE="firebase-app-check-store";let LD=null;function pk(){return LD||(LD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Ts.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(eE,{keyPath:"compositeKey"})}}catch(r){e(Ts.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),LD)}function VM(){return VM=(0,_e.Z)(function*(n,e){const r=(yield pk()).transaction(eE,"readwrite"),a=r.objectStore(eE).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=y=>{l()},r.onerror=y=>{var w;h(Ts.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})}),VM.apply(this,arguments)}const tE=new To.Yd("@firebase/app-check");function jM(n,e){return(0,P.hl)()?function pB(n,e){return function gk(n,e){return VM.apply(this,arguments)}(function yk(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{tE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _k(){return PD().enabled}function vk(){return $M.apply(this,arguments)}function $M(){return $M=(0,_e.Z)(function*(){const n=PD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),$M.apply(this,arguments)}const wB={error:"UNKNOWN_ERROR"};function EB(n){return P.US.encodeString(JSON.stringify(n),!1)}function VD(n){return GM.apply(this,arguments)}function GM(){return GM=(0,_e.Z)(function*(n,e=!1){const t=n.app;hk(t);const r=Ti(t);let a,i=r.token;if(i&&!f_(i)&&(ga(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(f_(y)?i=y:yield jM(t,void 0))}if(!e&&i&&f_(i))return{token:i.token};let h,l=!1;if(_k()){r.exchangeTokenPromise||(r.exchangeTokenPromise=FM(cB(t,yield vk()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const y=yield r.exchangeTokenPromise;return yield jM(t,y),ga(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?tE.warn(y.message):tE.error(y),a=y}return i?a?h=f_(i)?{token:i.token,internalError:a}:Ik(a):(h={token:i.token},ga(t,Object.assign(Object.assign({},r),{token:i})),yield jM(t,i)):h=Ik(a),l&&Ek(t,h),h}),GM.apply(this,arguments)}function zM(n,e){const t=Ti(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ga(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function wk(n){const{app:e}=n,t=Ti(e);let r=t.tokenRefresher;r||(r=function IB(n){const{app:e}=n;return new sB((0,_e.Z)(function*(){let r;if(r=Ti(e).token?yield VD(n,!0):yield VD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ga(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ek(n,e){const t=Ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function f_(n){return n.expireTimeMillis-Date.now()>0}function Ik(n){return{token:EB(wB),error:n}}class CB{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ti(this.app);for(const t of e)zM(this.app,t.next);return Promise.resolve()}}const Mk="app-check-internal";!function LB(){(0,ia._registerComponent)(new du.wA("app-check",n=>function bB(n,e){return new CB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Mk).initialize()})),(0,ia._registerComponent)(new du.wA(Mk,n=>function DB(n){return{getToken:e=>VD(n,e),addTokenListener:e=>function WM(n,e,t,r){const{app:i}=n,a=Ti(i),l={next:t,error:r,type:e};if(ga(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&f_(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),wk(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>wk(n))}(n,"INTERNAL",e),removeTokenListener:e=>zM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ia.registerVersion)("@firebase/app-check","0.5.15")}();class BD{constructor(){return(0,Fn.vb)("app-check")}}typeof window<"u"&&window;var HB=L(127);const QM=new m.OlP("angularfire2.auth.use-emulator"),JM=new m.OlP("angularfire2.auth.settings"),XM=new m.OlP("angularfire2.auth.tenant-id"),eN=new m.OlP("angularfire2.auth.langugage-code"),tN=new m.OlP("angularfire2.auth.use-device-language"),nN=new m.OlP("angularfire.auth.persistence"),rN=(n,e,t,r,i,a,l,h)=>(0,vi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))y.settings[w]=D;return h&&y.setPersistence(h),y},[t,r,i,a,l,h]);let iN=(()=>{class n{constructor(t,r,i,a,l,h,y,w,D,S,O,V){const H=new bo.x,ge=rt(void 0).pipe((0,RD.Q)(l.outsideAngular),Mr(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9545)))),(0,at.U)(()=>(0,vi.on)(t,a,r)),(0,at.U)(be=>rN(be,a,h,w,D,S,y,O)),ak({bufferSize:1,refCount:!1}));if(Cr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{ge.pipe(iu()).subscribe();const Ye=ge.pipe(Mr(Nt=>Nt.getRedirectResult().then(Vt=>Vt,()=>null)),Fn.iC,ak({bufferSize:1,refCount:!1})),gt=ge.pipe(Mr(Nt=>new br.y(Vt=>({unsubscribe:a.runOutsideAngular(()=>Nt.onAuthStateChanged(Wt=>Vt.next(Wt),Wt=>Vt.error(Wt),()=>Vt.complete()))})))),Dt=ge.pipe(Mr(Nt=>new br.y(Vt=>({unsubscribe:a.runOutsideAngular(()=>Nt.onIdTokenChanged(Wt=>Vt.next(Wt),Wt=>Vt.error(Wt),()=>Vt.complete()))}))));this.authState=Ye.pipe(uk(gt),(0,RM.R)(l.outsideAngular),(0,RD.Q)(l.insideAngular)),this.user=Ye.pipe(uk(Dt),(0,RM.R)(l.outsideAngular),(0,RD.Q)(l.insideAngular)),this.idToken=this.user.pipe(Mr(Nt=>Nt?(0,dn.D)(Nt.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Mr(Nt=>Nt?(0,dn.D)(Nt.getIdTokenResult()):rt(null))),this.credential=(0,NM.T)(Ye,H,this.authState.pipe(Qi(Nt=>!Nt))).pipe((0,at.U)(Nt=>Nt?.user?Nt:null),(0,RM.R)(l.outsideAngular),(0,RD.Q)(l.insideAngular))}return(0,vi.pX)(this,ge,a,{spy:{apply:(be,Ye,gt)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&gt.then(Dt=>H.next(Dt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vi.Dh),m.LFG(vi.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Fn.HU),m.LFG(QM,8),m.LFG(JM,8),m.LFG(XM,8),m.LFG(eN,8),m.LFG(tN,8),m.LFG(nN,8),m.LFG(BD,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Rk(n,e){return function GB(n,e=ay.z){return new br.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function sN(n,e){return Rk(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function jD(n,e){return sN(n,e).pipe(fp(void 0),uy(),(0,at.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const y=i.find(D=>D.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function Ok(n,e,t){return jD(n,t).pipe(wl((r,i)=>function zB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function qB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return oN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return oN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return oN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),sw(),(0,at.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function oN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Pk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class kk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(fp(void 0),uy(),Qi(([r,i])=>i.length>0||!r),(0,at.U)(([r,i])=>i),Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(wl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Pk(e);return Ok(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return sN(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(Fn.iC)}add(e){return this.ref.add(e)}doc(e){return new Fk(this.ref.doc(e),this.afs)}}class Fk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Lk(r,t);return new kk(i,a,this.afs)}snapshotChanges(){return function WB(n,e){return Rk(n,e).pipe(fp(void 0),uy(),(0,at.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(Fn.iC)}}class KB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jD(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qi(t=>t.length>0),Fn.iC):jD(this.query,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(wl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Pk(e);return Ok(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return sN(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Fn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(Fn.iC)}}const ZB=new m.OlP("angularfire2.enableFirestorePersistence"),YB=new m.OlP("angularfire2.firestore.persistenceSettings"),QB=new m.OlP("angularfire2.firestore.settings"),JB=new m.OlP("angularfire2.firestore.use-emulator");function Lk(n,e=(t=>t)){return{query:e(n),ref:n}}let XB=(()=>{class n{constructor(t,r,i,a,l,h,y,w,D,S,O,V,H,ge,be,Ye,gt){this.schedulers=y;const Dt=(0,vi.on)(t,h,r),Nt=D;S&&rN(Dt,h,O,H,ge,be,V,Ye),[this.firestore,this.persistenceEnabled$]=(0,vi.cc)(`${Dt.name}.firestore`,"AngularFirestore",Dt.name,()=>{const Vt=h.runOutsideAngular(()=>Dt.firestore());if(a&&Vt.settings(a),Nt&&Vt.useEmulator(...Nt),i&&!Cr(l)){const Wt=()=>{try{return(0,dn.D)(Vt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(ci){return typeof console<"u"&&console.warn(ci),rt(!1)}};return[Vt,h.runOutsideAngular(Wt)]}return[Vt,rt(!1)]},[a,Nt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=Lk(i,r),h=this.schedulers.ngZone.run(()=>a);return new kk(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new KB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Fk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vi.Dh),m.LFG(vi.xv,8),m.LFG(ZB,8),m.LFG(QB,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Fn.HU),m.LFG(YB,8),m.LFG(JB,8),m.LFG(iN,8),m.LFG(QM,8),m.LFG(JM,8),m.LFG(XM,8),m.LFG(eN,8),m.LFG(tN,8),m.LFG(nN,8),m.LFG(BD,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function e2(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"input",5),m.NdJ("ngModelChange",function(i){m.CHM(t);const a=m.oxw();return m.KtG(a.EditTodo=i)}),m.qZA()}if(2&n){const t=m.oxw();m.Q6J("ngModel",t.EditTodo)}}let t2=(()=>{class n{constructor(){this.EditTodo="",this.showEdit=!1,this.OnEditTodo=new m.vpe,this.done=new m.vpe,this.undone=new m.vpe,this.delete=new m.vpe}toggleDone(t){this.done.emit(t)}deleteTodo(t){this.delete.emit(t)}editTodo(t){this.showEdit&&this.OnEditTodo.emit({id:t,name:this.EditTodo}),this.showEdit=!this.showEdit,this.EditTodo=this.todo.content}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-todo"]],inputs:{todo:"todo"},outputs:{OnEditTodo:"OnEditTodo",done:"done",undone:"undone",delete:"delete"},decls:9,vars:5,consts:[[1,"id"],[1,"content",3,"click"],["type","text","name","EditTodo","placeholder","Edit todo...","class","todo-input",3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["type","button","data-bs-toggle","button","aria-pressed","true",1,"btn","btn-warning",3,"click"],["type","text","name","EditTodo","placeholder","Edit todo...",1,"todo-input",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(m.TgZ(0,"div"),m._UZ(1,"div",0),m.TgZ(2,"div",1),m.NdJ("click",function(){return r.toggleDone(r.todo.id)}),m._uU(3),m.qZA(),m.YNc(4,e2,1,1,"input",2),m.TgZ(5,"button",3),m.NdJ("click",function(){return r.deleteTodo(r.todo.id)}),m._uU(6,"Remove"),m.qZA(),m.TgZ(7,"button",4),m.NdJ("click",function(){return r.editTodo(r.todo.id)}),m._uU(8,"Edit"),m.qZA()()),2&t&&(m.Gre("todo ",r.todo.completed?"done":"",""),m.xp6(3),m.Oqu(r.todo.content),m.xp6(1),m.Q6J("ngIf",r.showEdit))},dependencies:[fr,il,Bf,Zf],styles:[".todo[_ngcontent-%COMP%]{display:flex;padding:10px 15px;border-bottom:1px solid #DDD}.todo[_ngcontent-%COMP%]:nth-child(even){background-color:#f97878}.todo[_ngcontent-%COMP%]:last-of-type{border-bottom:0}.todo[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{flex:1 1 50px}.todo[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1 1 100%}.todo.done[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{text-decoration:line-through}.todo-input[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;-webkit-appearance:none;appearance:none;border:none;background-color:#f3f3f3;margin-top:15px;font-size:20px;outline:none}.todo-submit[_ngcontent-%COMP%]{display:block;width:100%;max-width:200px;-webkit-appearance:none;appearance:none;border:none;outline:none;background:none;background-color:#0003ad;color:#fff;margin:15px auto;padding:10px 15px;font-size:18px;font-weight:700}"]}),n})();function n2(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div")(1,"app-todo",14),m.NdJ("OnEditTodo",function(i){m.CHM(t);const a=m.oxw();return m.KtG(a.edit(i))})("done",function(i){m.CHM(t);const a=m.oxw();return m.KtG(a.toggleDone(i))})("delete",function(i){m.CHM(t);const a=m.oxw();return m.KtG(a.deleteTodos(i))}),m.qZA()()}if(2&n){const t=e.$implicit;m.xp6(1),m.Q6J("todo",t)}}const r2=[{path:"",component:gC},{path:"Todo",component:(()=>{class n{constructor(t){this.db=t,this.todos=[],this.inputTodo="",this.EditTodo="",this.showEdit=!1,this.alter=!1}ngOnInit(){this.todosSubscription=this.db.collection("todos").snapshotChanges().subscribe(t=>{this.todos=[],t.forEach(r=>{let i=r.payload.doc.data();i.id=r.payload.doc.id,this.todos.push(i)})})}ngOnDestroy(){this.todosSubscription.unsubscribe()}toggleDone(t){this.db.collection("todos").doc(t).update({completed:this.alter=!this.alter})}deleteTodos(t){confirm("Delete?")&&this.db.collection("todos").doc(t).delete()}addTodo(){this.db.collection("todos").add({content:this.inputTodo,completed:!1}),this.inputTodo=""}edit(t){this.db.collection("todos").doc(t.id).update({content:t.name,completed:!1})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(XB))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-todos"]],decls:18,vars:2,consts:[[1,"card",2,"width","18 rem"],[2,"background-image","url('./assets/design-space-paper-textured-background.jpg')","background-repeat","no-repeat","background-size","cover"],[1,"card-body"],[1,"card-title","text-center"],[1,"form-inline"],["type","text","readonly","","value","What do you want to do?",1,"form-control-plaintext","mb-2","mr-sm-2"],[1,"input-group","mb-2","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","inputTodo","placeholder","Enter todo...",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","mb-2",3,"click"],["for","ToDos"],[1,"form-group",2,"height","500px","overflow-y","auto"],[4,"ngFor","ngForOf"],[1,"form-control",3,"todo","OnEditTodo","done","delete"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),m._uU(4,"ToDo List"),m.qZA(),m.TgZ(5,"form",4),m._UZ(6,"input",5),m.TgZ(7,"div",6)(8,"div",7)(9,"div",8),m._uU(10,"ToDo"),m.qZA()(),m.TgZ(11,"input",9),m.NdJ("ngModelChange",function(a){return r.inputTodo=a}),m.qZA()(),m.TgZ(12,"button",10),m.NdJ("click",function(){return r.addTodo()}),m._uU(13,"Add ToDo"),m.qZA()(),m.TgZ(14,"label",11),m._uU(15,"Your Todos."),m.qZA(),m.TgZ(16,"div",12),m.YNc(17,n2,2,1,"div",13),m.qZA()()()()),2&t&&(m.xp6(11),m.Q6J("ngModel",r.inputTodo),m.xp6(6),m.Q6J("ngForOf",r.todos))},dependencies:[io,Qa,il,Bf,pm,Zf,Ya,t2],styles:[".todo[_ngcontent-%COMP%]{display:inline-flex;padding:10px 15px;background-color:#75acff;border-bottom:1px solid #DDD}.todo[_ngcontent-%COMP%]:nth-child(even){background-color:#f97878}.todo[_ngcontent-%COMP%]:last-of-type{border-bottom:0}.todo[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{flex:1 1 50px}.todo[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1 1 100%}.todo.done[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{text-decoration:line-through}.todo-input[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 15px;-webkit-appearance:none;appearance:none;border:none;background-color:#f3f3f3;margin-top:15px;font-size:20px;outline:none}.todo-submit[_ngcontent-%COMP%]{display:block;width:100%;max-width:200px;-webkit-appearance:none;appearance:none;border:none;outline:none;background:none;background-color:#0003ad;color:#fff;margin:15px auto;padding:10px 15px;font-size:18px;font-weight:700}"]}),n})()}];let i2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[nw.forRoot(r2),Fo,nw]}),n})();var s2=L(5032);const Vk="@firebase/database";let aN="";function Bk(n){aN=n}class u2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class l2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const jk=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u2(e)}}catch{}return new l2},qg=jk("localStorage"),uN=jk("sessionStorage"),p_=new To.Yd("@firebase/database"),Hk=function(){let n=1;return function(){return n++}}(),$k=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},nE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=nE.apply(null,r):e+="object"==typeof r?(0,P.Wl)(r):r,e+=" "}return e};let Kg=null,Gk=!0;const Wk=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(p_.logLevel=To.in.VERBOSE,Kg=p_.log.bind(p_),e&&uN.set("logging_enabled",!0)):"function"==typeof n?Kg=n:(Kg=null,uN.remove("logging_enabled"))},Si=function(...n){if(!0===Gk&&(Gk=!1,null===Kg&&!0===uN.get("logging_enabled")&&Wk(!0)),Kg){const e=nE.apply(null,n);Kg(e)}},rE=function(n){return function(...e){Si(n,...e)}},lN=function(...n){const e="FIREBASE INTERNAL ERROR: "+nE(...n);p_.error(e)},Bl=function(...n){const e=`FIREBASE FATAL ERROR: ${nE(...n)}`;throw p_.error(e),new Error(e)},ts=function(...n){const e="FIREBASE WARNING: "+nE(...n);p_.warn(e)},HD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ld="[MIN_NAME]",jl="[MAX_NAME]",Zg=function(n,e){if(n===e)return 0;if(n===ld||e===jl)return-1;if(e===ld||n===jl)return 1;{const t=$D(n),r=$D(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},h2=function(n,e){return n===e?0:n<e?-1:1},iE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Wl)(e))},cN=function(n){if("object"!=typeof n||null===n)return(0,P.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Wl)(e[r]),t+=":",t+=cN(n[e[r]]);return t+="}",t},zk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const qk=function(n){(0,P.hu)(!HD(n),"Invalid JSON number");const r=1023;let i,a,l,h,y;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(y=11;y;y-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(y=0;y<64;y+=8){let O=parseInt(D.substr(y,8),2).toString(16);1===O.length&&(O="0"+O),S+=O}return S.toLowerCase()},m2=new RegExp("^-?(0*)\\d{1,10}$"),Kk=-2147483648,dN=2147483647,$D=function(n){if(m2.test(n)){const e=Number(n);if(e>=Kk&&e<=dN)return e}return null},g_=function(n){try{n()}catch(e){setTimeout(()=>{throw ts("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},sE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class _2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ts(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class v2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Si("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ts(e)}}let oE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Xk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,n1="websocket",r1="long_polling";class fN{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function i1(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===n1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==r1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function w2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ai(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class E2{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const pN={},gN={};function mN(n){const e=n.toString();return pN[e]||(pN[e]=new E2),pN[e]}class C2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&g_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yf{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rE(e),this.stats_=mN(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),i1(t,r1,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new C2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yN((...a)=>{const[l,h,y,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=y;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Xk.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yf.forceAllow_=!0}static forceDisallow(){yf.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!yf.forceAllow_&&(yf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=zk(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class yN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Hk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=yN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Si("frame writing exception"),h.stack&&Si(h.stack),Si(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Si("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Si("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let WD=null;typeof MozWebSocket<"u"?WD=MozWebSocket:typeof WebSocket<"u"&&(WD=WebSocket);let m_=(()=>{class n{constructor(t,r,i,a,l,h,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rE(this.connId),this.stats_=mN(r),this.connURL=n.connectionURL_(r,h,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&Xk.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),i1(t,n1,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qg.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${aN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new WD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==WD&&!n.forceDisallow_}static previouslyFailed(){return qg.isInMemoryStorage||!0===qg.get("previous_websocket_failure")}markConnectionHealthy(){qg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=zk(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),d1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[yf,m_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=m_&&m_.isAvailable();let i=r&&!m_.previouslyFailed();if(t.webSocketOnly&&(r||ts("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[m_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _1{constructor(e,t,r,i,a,l,h,y,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rE("c:"+this.id+":"),this.transportManager_=new d1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=sE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=iE("t",e),r=iE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=iE("t",e),r=iE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=iE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?lN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ts("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),sE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class v1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class w1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class zD extends w1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zD}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function pn(){return new Cn("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _f(n){return n.pieces_.length-n.pieceNum_}function Un(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function vN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function aE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function C1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function cr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Cn(t,0)}function Zt(n){return n.pieceNum_>=n.pieces_.length}function Ss(n,e){const t=Kt(n),r=Kt(e);if(null===t)return e;if(t===r)return Ss(Un(n),Un(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function W2(n,e){const t=aE(n,0),r=aE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Zg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function wN(n,e){if(_f(n)!==_f(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ma(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(_f(n)>_f(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class z2{constructor(e,t){this.errorPrefix_=t,this.parts_=aE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);b1(this)}}function b1(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Yg(n))}function Yg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class EN extends w1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new EN}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const uE=1e3;let KD,Qg=(()=>{class n extends v1{constructor(t,r,i,a,l,h,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=rE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=uE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&zD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,P.Wl)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const y=h.d;"ok"===h.s?r.resolve(y):r.reject(y)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,y=>{const w=y.d,D=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ts(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):lN("Unrecognized action received from server: "+(0,P.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=uE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=uE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=uE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let y=!1,w=null;const D=function(){w?w.close():(y=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,P.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,H]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);y?Si("getToken() completed but was canceled"):(Si("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=H&&H.token,w=new _1(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ge=>{ts(ge+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),y||(t.repoInfo_.nodeAdmin&&ts(V),D())}}})()}interrupt(t){Si("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Si("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=uE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>cN(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Cn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Si("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Si("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+aN.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=zD.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jt(e,t)}}class qD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Jt(ld,e),i=new Jt(ld,t);return 0!==this.compare(r,i)}minPost(){return Jt.MIN}}class S1 extends qD{static get __EMPTY_NODE(){return KD}static set __EMPTY_NODE(e){KD=e}compare(e,t){return Zg(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(jl,KD)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jt(e,KD)}toString(){return".key"}}const Hl=new S1;class ZD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let CN,vu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Xs.EMPTY_NODE,this.right=l??Xs.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Xs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Xs{constructor(e,t=Xs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Xs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vu.BLACK,null,null))}remove(e){return new Xs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ZD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ZD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ZD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ZD(this.root_,null,this.comparator_,!0,e)}}function ej(n,e){return Zg(n.name,e.name)}function IN(n,e){return Zg(n,e)}Xs.EMPTY_NODE=new class X2{copy(e,t,r,i,a){return this}insert(e,t,r){return new vu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const A1=function(n){return"number"==typeof n?"number:"+qk(n):"string:"+n},x1=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===CN||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===CN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let M1,N1,R1,y_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),x1(this.priorityNode_)}static set __childrenNodeConstructor(t){M1=t}static get __childrenNodeConstructor(){return M1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Zt(t)?this:".priority"===Kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Kt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===_f(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+A1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?qk(this.value_):this.value_,this.lazyHash_=$k(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Wn=new class ij extends qD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Zg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(jl,new y_("[PRIORITY-POST]",R1))}makePost(e,t){const r=N1(e);return new Jt(t,new y_("[PRIORITY-POST]",r))}toString(){return".priority"}},sj=Math.log(2);class oj{constructor(e){this.count=parseInt(Math.log(e+1)/sj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const YD=function(n,e,t,r){n.sort(e);const i=function(y,w){const D=w-y;let S,O;if(0===D)return null;if(1===D)return S=n[y],O=t?t(S):S,new vu(O,S.node,vu.BLACK,null,null);{const V=parseInt(D/2,10)+y,H=i(y,V),ge=i(V+1,w);return S=n[V],O=t?t(S):S,new vu(O,S.node,vu.BLACK,H,ge)}},h=function(y){let w=null,D=null,S=n.length;const O=function(H,ge){const be=S-H,Ye=S;S-=H;const gt=i(be+1,Ye),Dt=n[be],Nt=t?t(Dt):Dt;V(new vu(Nt,Dt.node,ge,null,gt))},V=function(H){w?(w.left=H,w=H):(D=H,w=H)};for(let H=0;H<y.count;++H){const ge=y.nextBitIsOne(),be=Math.pow(2,y.count-(H+1));ge?O(be,vu.BLACK):(O(be,vu.BLACK),O(be,vu.RED))}return D}(new oj(n.length));return new Xs(r||e,h)};let bN;const __={};class cd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(__&&Wn,"ChildrenNode.ts has not been loaded"),bN=bN||new cd({".priority":__},{".priority":Wn}),bN}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xs?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Hl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Jt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?YD(r,e.getCompare()):__;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const D=Object.assign({},this.indexes_);return D[y]=h,new cd(D,w)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const l=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(l,"Missing index implementation for "+a),i===__){if(l.isDefinedOn(e.node)){const h=[],y=t.getIterator(Jt.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&h.push(w),w=y.getNext();return h.push(e),YD(h,l.getCompare())}return __}{const h=t.get(e.name);let y=i;return h&&(y=y.remove(new Jt(e.name,h))),y.insert(e,e.node)}});return new cd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===__)return i;{const a=t.get(e.name);return a?i.remove(new Jt(e.name,a)):i}});return new cd(r,this.indexSet_)}}let lE,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&x1(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return lE||(lE=new n(new Xs(IN),null,cd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?lE:r}}getChild(t){const r=Kt(t);return null===r?this:this.getImmediateChild(r).getChild(Un(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Jt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?lE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Kt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Kt(t)||1===_f(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Un(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Wn,(h,y)=>{r[h]=y.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const y in r)h[y]=r[y];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+A1(this.getPriority().val())+":"),this.forEachChild(Wn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":$k(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Jt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Jt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Jt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Jt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Jt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cE?-1:0}withIndex(t){if(t===Hl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Hl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Wn),a=r.getIterator(Wn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Hl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const cE=new class aj extends Ht{constructor(){super(new Xs(IN),Ht.EMPTY_NODE,cd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};function Er(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new y_(n,Er(e));if(n instanceof Array){let t=Ht.EMPTY_NODE;return Ai(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=Er(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Er(e))}{const t=[];let r=!1;if(Ai(n,(l,h)=>{if("."!==l.substring(0,1)){const y=Er(h);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Jt(l,y)))}}),0===t.length)return Ht.EMPTY_NODE;const a=YD(t,ej,l=>l.name,IN);if(r){const l=YD(t,Wn.getCompare());return new Ht(a,Er(e),new cd({".priority":l},{".priority":Wn}))}return new Ht(a,Er(e),cd.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(ld,Ht.EMPTY_NODE)},MAX:{value:new Jt(jl,cE)}}),S1.__EMPTY_NODE=Ht.EMPTY_NODE,y_.__childrenNodeConstructor=Ht,function tj(n){CN=n}(cE),function rj(n){R1=n}(cE),function nj(n){N1=n}(Er);class DN extends qD{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Zt(e)&&".priority"!==Kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Zg(e.name,t.name):a}makePost(e,t){const r=Er(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new Jt(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,cE);return new Jt(jl,e)}toString(){return aE(this.indexPath_,0).join("/")}}const TN=new class lj extends qD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Zg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(e,t){const r=Er(e);return new Jt(t,r)}toString(){return".value"}},v_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cj=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=v_.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=v_.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),k1=function(n){if(n===""+dN)return"-";const e=$D(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return jl;const a=v_.charAt(v_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},F1=function(n){if(n===""+Kk)return ld;const e=$D(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+dN:(delete t[t.length-1],t.join("")):(t[t.length-1]=v_.charAt(v_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function L1(n){return{type:"value",snapshotNode:n}}function w_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function dE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function hE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class AN{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(dE(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(w_(t,r)):l.trackChildChange(hE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Wn,(i,a)=>{t.hasChild(i)||r.trackChildChange(dE(i,a))}),t.isLeafNode()||t.forEachChild(Wn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(hE(i,a,l))}else r.trackChildChange(w_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class fE{constructor(e){this.indexedFilter_=new AN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=fE.getStartPost_(e),this.endPost_=fE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new Jt(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const a=this;return t.forEachChild(Wn,(l,h)=>{a.matches(new Jt(l,h))||(i=i.updateImmediateChild(l,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class hj{constructor(e){this.rangedFilter_=new fE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Jt(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ht.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!y)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,y;if(i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),this.reverse_){y=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(O,V)=>S(V,O)}else y=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,D=!1;for(;y.hasNext();){const S=y.getNext();!D&&h(a,S)<=0&&(D=!0),D&&w<this.limit_&&h(S,l)<=0?w++:i=i.updateImmediateChild(S.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(O,V)=>S(V,O)}else l=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const y=new Jt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(h.hasChild(t)){const S=h.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=O&&(O.name===t||h.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const V=null==O?1:l(O,y);if(D&&!r.isEmpty()&&V>=0)return a?.trackChildChange(hE(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(dE(t,S));const ge=h.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(a?.trackChildChange(w_(O.name,O.node)),ge.updateImmediateChild(O.name,O.node)):ge}}return r.isEmpty()?e:D&&l(w,y)>=0?(null!=a&&(a.trackChildChange(dE(w.name,w.node)),a.trackChildChange(w_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Ht.EMPTY_NODE)):e}}class QD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ld}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wn}copy(){const e=new QD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function MN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function JD(n,e){const t=n.copy();return t.index_=e,t}function V1(n){const e={};if(n.isDefault())return e;let t;return n.index_===Wn?t="$priority":n.index_===TN?t="$value":n.index_===Hl?t="$key":((0,P.hu)(n.index_ instanceof DN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Wl)(t),n.startSet_&&(e.startAt=(0,P.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function U1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Wn&&(e.i=n.index_.toString()),e}class XD extends v1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=rE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=XD.getListenId_(e,r),h={};this.listens_[l]=h;const y=V1(e._queryParams);this.restRequest_(a+".json",y,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,P.DV)(this.listens_,l)===h){let O;O=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(O,null)}})}unlisten(e,t){const r=XD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=V1(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let y=null;if(h.status>=200&&h.status<300){try{y=(0,P.cI)(h.responseText)}catch{ts("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,y)}else 401!==h.status&&404!==h.status&&ts("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class _j{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function eT(){return{value:null,children:new Map}}function E_(n,e,t){if(Zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Kt(e);n.children.has(r)||n.children.set(r,eT()),E_(n.children.get(r),e=Un(e),t)}}function NN(n,e){if(Zt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Wn,(r,i)=>{E_(n,new Cn(r),i)}),NN(n,e)}}if(n.children.size>0){const t=Kt(e);return e=Un(e),n.children.has(t)&&NN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function RN(n,e,t){null!==n.value?t(e,n.value):function vj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{RN(i,new Cn(e.toString()+"/"+r),t)})}class wj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ai(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Cj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new wj(e);const r=1e4+2e4*Math.random();sE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ai(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),sE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ya=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ya||(ya={})),ya))();function kN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class tT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ya.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Zt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new tT(pn(),t,this.revert)}}return(0,P.hu)(Kt(this.path)===e,"operationForChild called for unrelated child."),new tT(Un(this.path),this.affectedTree,this.revert)}}class pE{constructor(e,t){this.source=e,this.path=t,this.type=ya.LISTEN_COMPLETE}operationForChild(e){return Zt(this.path)?new pE(this.source,pn()):new pE(this.source,Un(this.path))}}class Jg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ya.OVERWRITE}operationForChild(e){return Zt(this.path)?new Jg(this.source,pn(),this.snap.getImmediateChild(e)):new Jg(this.source,Un(this.path),this.snap)}}class I_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ya.MERGE}operationForChild(e){if(Zt(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new Jg(this.source,pn(),t.value):new I_(this.source,pn(),t)}return(0,P.hu)(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new I_(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class bj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,y)=>function Sj(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Jt(e.childName,e.snapshotNode),i=new Jt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,y)),l.forEach(h=>{const y=function Tj(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(y,n.query_))})})}function nT(n,e){return{eventCache:n,serverCache:e}}function mE(n,e,t,r){return nT(new vf(e,t,r),n.serverCache)}function j1(n,e,t,r){return nT(n.eventCache,new vf(e,t,r))}function rT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Xg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let FN;class zn{constructor(e,t=(()=>(FN||(FN=new Xs(h2)),FN))()){this.value=e,this.children=t}static fromObject(e){let t=new zn(null);return Ai(e,(r,i)=>{t=t.set(new Cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:pn(),value:this.value};if(Zt(e))return null;{const r=Kt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Un(e),t);return null!=a?{path:cr(new Cn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Zt(e))return this;{const t=Kt(e),r=this.children.get(t);return null!==r?r.subtree(Un(e)):new zn(null)}}set(e,t){if(Zt(e))return new zn(t,this.children);{const r=Kt(e),a=(this.children.get(r)||new zn(null)).set(Un(e),t),l=this.children.insert(r,a);return new zn(this.value,l)}}remove(e){if(Zt(e))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const t=Kt(e),r=this.children.get(t);if(r){const i=r.remove(Un(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new zn(null):new zn(this.value,a)}return this}}get(e){if(Zt(e))return this.value;{const t=Kt(e),r=this.children.get(t);return r?r.get(Un(e)):null}}setTree(e,t){if(Zt(e))return t;{const r=Kt(e),a=(this.children.get(r)||new zn(null)).setTree(Un(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new zn(this.value,l)}}fold(e){return this.fold_(pn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(cr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,pn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Zt(e))return null;{const a=Kt(e),l=this.children.get(a);return l?l.findOnPath_(Un(e),cr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,pn(),t)}foreachOnPath_(e,t,r){if(Zt(e))return this;{this.value&&r(t,this.value);const i=Kt(e),a=this.children.get(i);return a?a.foreachOnPath_(Un(e),cr(t,i),r):new zn(null)}}foreach(e){this.foreach_(pn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(cr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class wu{constructor(e){this.writeTree_=e}static empty(){return new wu(new zn(null))}}function yE(n,e,t){if(Zt(e))return new wu(new zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ss(i,e);return a=a.updateChild(l,t),new wu(n.writeTree_.set(i,a))}{const i=new zn(t),a=n.writeTree_.setTree(e,i);return new wu(a)}}}function LN(n,e,t){let r=n;return Ai(t,(i,a)=>{r=yE(r,cr(e,i),a)}),r}function H1(n,e){if(Zt(e))return wu.empty();{const t=n.writeTree_.setTree(e,new zn(null));return new wu(t)}}function VN(n,e){return null!=em(n,e)}function em(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ss(t.path,e)):null}function $1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Wn,(r,i)=>{e.push(new Jt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Jt(r,i.value))}),e}function wf(n,e){if(Zt(e))return n;{const t=em(n,e);return new wu(null!=t?new zn(t):n.writeTree_.subtree(e))}}function UN(n){return n.writeTree_.isEmpty()}function C_(n,e){return G1(pn(),n.writeTree_,e)}function G1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=G1(cr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(cr(n,".priority"),r)),t}}function iT(n,e){return Z1(e,n)}function Oj(n,e){if(n.snap)return ma(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ma(cr(n.path,t),e))return!0;return!1}function kj(n){return n.visible}function W1(n,e,t){let r=wu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)ma(t,l)?(h=Ss(t,l),r=yE(r,h,a.snap)):ma(l,t)&&(h=Ss(l,t),r=yE(r,pn(),a.snap.getChild(h)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(ma(t,l))h=Ss(t,l),r=LN(r,h,a.children);else if(ma(l,t))if(h=Ss(l,t),Zt(h))r=LN(r,pn(),a.children);else{const y=(0,P.DV)(a.children,Kt(h));if(y){const w=y.getChild(Un(h));r=yE(r,pn(),w)}}}}}return r}function z1(n,e,t,r,i){if(r||i){const a=wf(n.visibleWrites,e);return!i&&UN(a)?t:i||null!=t||VN(a,pn())?C_(W1(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(ma(w.path,e)||ma(e,w.path))},e),t||Ht.EMPTY_NODE):null}{const a=em(n.visibleWrites,e);if(null!=a)return a;{const l=wf(n.visibleWrites,e);return UN(l)?t:null!=t||VN(l,pn())?C_(l,t||Ht.EMPTY_NODE):null}}}function sT(n,e,t,r){return z1(n.writeTree,n.treePath,e,t,r)}function BN(n,e){return function Fj(n,e,t){let r=Ht.EMPTY_NODE;const i=em(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=wf(n.visibleWrites,e);return t.forEachChild(Wn,(l,h)=>{const y=C_(wf(a,new Cn(l)),h);r=r.updateImmediateChild(l,y)}),$1(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return $1(wf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function q1(n,e,t,r){return function Lj(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=cr(e,t);if(VN(n.visibleWrites,a))return null;{const l=wf(n.visibleWrites,a);return UN(l)?i.getChild(t):C_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function oT(n,e){return function Uj(n,e){return em(n.visibleWrites,e)}(n.writeTree,cr(n.treePath,e))}function jN(n,e,t){return function Vj(n,e,t,r){const i=cr(e,t),a=em(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?C_(wf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function K1(n,e){return Z1(cr(n.treePath,e),n.writeTree)}function Z1(n,e){return{treePath:n,writeTree:e}}class $j{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,hE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,dE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,w_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,hE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Y1=new class Gj{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class HN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xg(this.viewCache_),a=function Hj(n,e,t,r,i,a){return function Bj(n,e,t,r,i,a,l){let h;const y=wf(n.visibleWrites,e),w=em(y,pn());if(null!=w)h=w;else{if(null==t)return[];h=C_(y,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),O=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let V=O.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=O.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Q1(n,e,t,r,i,a){const l=e.eventCache;if(null!=oT(r,t))return e;{let h,y;if(Zt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Xg(e),S=BN(r,w instanceof Ht?w:Ht.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=sT(r,Xg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Kt(t);if(".priority"===w){(0,P.hu)(1===_f(t),"Can't have a priority with additional path components");const D=l.getNode();y=e.serverCache.getNode();const S=q1(r,t,D,y);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Un(t);let S;if(l.isCompleteForChild(w)){y=e.serverCache.getNode();const O=q1(r,t,l.getNode(),y);S=null!=O?l.getNode().getImmediateChild(w).updateChild(D,O):l.getNode().getImmediateChild(w)}else S=jN(r,w,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),w,S,D,i,a):l.getNode()}}return mE(e,h,l.isFullyInitialized()||Zt(t),n.filter.filtersNodes())}}function aT(n,e,t,r,i,a,l,h){const y=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if(Zt(t))w=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const V=y.getNode().updateChild(t,r);w=D.updateFullNode(y.getNode(),V,null)}else{const V=Kt(t);if(!y.isCompleteForPath(t)&&_f(t)>1)return e;const H=Un(t),be=y.getNode().getImmediateChild(V).updateChild(H,r);w=".priority"===V?D.updatePriority(y.getNode(),be):D.updateChild(y.getNode(),V,be,H,Y1,null)}const S=j1(e,w,y.isFullyInitialized()||Zt(t),D.filtersNodes());return Q1(n,S,t,i,new HN(i,S,a),h)}function $N(n,e,t,r,i,a,l){const h=e.eventCache;let y,w;const D=new HN(i,e,a);if(Zt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),y=mE(e,w,!0,n.filter.filtersNodes());else{const S=Kt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=mE(e,w,h.isFullyInitialized(),h.isFiltered());else{const O=Un(t),V=h.getNode().getImmediateChild(S);let H;if(Zt(O))H=r;else{const ge=D.getCompleteChild(S);H=null!=ge?".priority"===vN(O)&&ge.getChild(C1(O)).isEmpty()?ge:ge.updateChild(O,r):Ht.EMPTY_NODE}y=V.equals(H)?e:mE(e,n.filter.updateChild(h.getNode(),S,H,O,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return y}function J1(n,e){return n.eventCache.isCompleteForChild(e)}function X1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function GN(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=Zt(t)?r:new zn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,O)=>{if(D.hasChild(S)){const H=X1(0,e.serverCache.getNode().getImmediateChild(S),O);y=aT(n,y,new Cn(S),H,i,a,l,h)}}),w.children.inorderTraversal((S,O)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===O.value;if(!D.hasChild(S)&&!V){const ge=X1(0,e.serverCache.getNode().getImmediateChild(S),O);y=aT(n,y,new Cn(S),ge,i,a,l,h)}}),y}class Xj{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new AN(r.getIndex()),a=function fj(n){return n.loadsAllData()?new AN(n.getIndex()):n.hasLimit()?new hj(n):new fE(n)}(r);this.processor_=function Wj(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,y=i.updateFullNode(Ht.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Ht.EMPTY_NODE,h.getNode(),null),D=new vf(y,l.isFullyInitialized(),i.filtersNodes()),S=new vf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=nT(S,D),this.eventGenerator_=new bj(this.query_)}get query(){return this.query_}}function nH(n,e){const t=Xg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Zt(e)&&!t.getImmediateChild(Kt(e)).isEmpty())?t.getChild(e):null}function eF(n){return 0===n.eventRegistrations_.length}function tF(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function nF(n,e,t,r){e.type===ya.MERGE&&null!==e.source.queryId&&((0,P.hu)(Xg(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(rT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function qj(n,e,t,r,i){const a=new $j;let l,h;if(t.type===ya.OVERWRITE){const w=t;w.source.fromUser?l=$N(n,e,w.path,w.snap,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Zt(w.path),l=aT(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===ya.MERGE){const w=t;w.source.fromUser?l=function Zj(n,e,t,r,i,a,l){let h=e;return r.foreach((y,w)=>{const D=cr(t,y);J1(e,Kt(D))&&(h=$N(n,h,D,w,i,a,l))}),r.foreach((y,w)=>{const D=cr(t,y);J1(e,Kt(D))||(h=$N(n,h,D,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=GN(n,e,w.path,w.children,r,i,h,a))}else if(t.type===ya.ACK_USER_WRITE){const w=t;l=w.revert?function Jj(n,e,t,r,i,a){let l;if(null!=oT(r,t))return e;{const h=new HN(r,e,i),y=e.eventCache.getNode();let w;if(Zt(t)||".priority"===Kt(t)){let D;if(e.serverCache.isFullyInitialized())D=sT(r,Xg(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof Ht,"serverChildren would be complete if leaf node"),D=BN(r,S)}w=n.filter.updateFullNode(y,D,a)}else{const D=Kt(t);let S=jN(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=y.getImmediateChild(D)),w=null!=S?n.filter.updateChild(y,D,S,Un(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,Ht.EMPTY_NODE,Un(t),h,a):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=sT(r,Xg(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=oT(r,pn()),mE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function Yj(n,e,t,r,i,a,l){if(null!=oT(i,t))return e;const h=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Zt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return aT(n,e,t,y.getNode().getChild(t),i,a,h,l);if(Zt(t)){let w=new zn(null);return y.getNode().forEachChild(Hl,(D,S)=>{w=w.set(new Cn(D),S)}),GN(n,e,t,w,i,a,h,l)}return e}{let w=new zn(null);return r.foreach((D,S)=>{const O=cr(t,D);y.isCompleteForPath(O)&&(w=w.set(D,y.getNode().getChild(O)))}),GN(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==ya.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);l=function Qj(n,e,t,r,i){const a=e.serverCache;return Q1(n,j1(e,a.getNode(),a.isFullyInitialized()||Zt(t),a.isFiltered()),t,r,Y1,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function Kj(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=rT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(L1(rT(e)))}}(e,l,y),{viewCache:l,changes:y}}(n.processor_,i,e,t,r);return function zj(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,rF(n,a.changes,a.viewCache.eventCache.getNode(),null)}function rF(n,e,t,r){return function Dj(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function dj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),gE(n,i,"child_removed",e,r,t),gE(n,i,"child_added",e,r,t),gE(n,i,"child_moved",a,r,t),gE(n,i,"child_changed",e,r,t),gE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let uT,cT;class iF{constructor(){this.views=new Map}}function WN(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),nF(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(nF(l,e,t,r));return a}}function sF(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=sT(t,i?r:null),y=!1;h?y=!0:r instanceof Ht?(h=BN(t,r),y=!1):(h=Ht.EMPTY_NODE,y=!1);const w=nT(new vf(h,y,!1),new vf(r,i,!1));return new Xj(e,w)}return l}function oF(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ef(n,e){let t=null;for(const r of n.views.values())t=t||nH(r,e);return t}function aF(n,e){return e._queryParams.loadsAllData()?lT(n):n.views.get(e._queryIdentifier)}function uF(n,e){return null!=aF(n,e)}function If(n){return null!=lT(n)}function lT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let hH=1;class lF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zn(null),this.pendingWriteTree_=function jj(){return{visibleWrites:wu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zN(n,e,t,r,i){return function xj(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=yE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?b_(n,new Jg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cf(n,e,t=!1){const r=function Nj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Rj(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&Oj(h,r.path)?i=!1:ma(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function Pj(n){n.visibleWrites=W1(n.allWrites,kj,pn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=H1(n.visibleWrites,r.path):Ai(r.children,y=>{n.visibleWrites=H1(n.visibleWrites,cr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new zn(null);return null!=r.snap?a=a.set(pn(),!0):Ai(r.children,l=>{a=a.set(new Cn(l),!0)}),b_(n,new tT(r.path,a,t))}return[]}function _E(n,e,t){return b_(n,new Jg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function dT(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||uF(l,e))){const y=function lH(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=If(n);if("default"===i)for(const[y,w]of n.views.entries())l=l.concat(tF(w,t,r)),eF(w)&&(n.views.delete(y),w.query._queryParams.loadsAllData()||a.push(w.query));else{const y=n.views.get(i);y&&(l=l.concat(tF(y,t,r)),eF(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||a.push(y.query)))}return h&&!If(n)&&a.push(new(function oH(){return(0,P.hu)(uT,"Reference.ts has not been loaded"),uT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function aH(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=y.removed;if(h=y.events,!i){const D=-1!==w.findIndex(O=>O._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(O,V)=>If(V));if(D&&!S){const O=n.syncPointTree_.subtree(a);if(!O.isEmpty()){const V=function vH(n){return n.fold((e,t,r)=>{if(t&&If(t))return[lT(t)];{let i=[];return t&&(i=oF(t)),Ai(r,(a,l)=>{i=i.concat(l)}),i}})}(O);for(let H=0;H<V.length;++H){const ge=V[H],be=ge.query,Ye=fF(n,ge);n.listenProvider_.startListening(wE(be),vE(n,be),Ye.hashFn,Ye.onComplete)}}}!S&&w.length>0&&!r&&(D?n.listenProvider_.stopListening(wE(e),null):w.forEach(O=>{const V=n.queryToTagMap.get(fT(O));n.listenProvider_.stopListening(wE(O),V)}))}!function wH(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=fT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function cF(n,e,t,r){const i=KN(n,r);if(null!=i){const a=ZN(i),l=a.path,h=a.queryId,y=Ss(l,e);return YN(n,l,new Jg(kN(h),y,t))}return[]}function qN(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(O,V)=>{const H=Ss(O,i);a=a||Ef(V,H),l=l||If(V)});let y,h=n.syncPointTree_.get(i);h?(l=l||If(h),a=a||Ef(h,pn())):(h=new iF,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?y=!0:(y=!1,a=Ht.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,H)=>{const ge=Ef(H,pn());ge&&(a=a.updateImmediateChild(V,ge))}));const w=uF(h,e);if(!w&&!e._queryParams.loadsAllData()){const O=fT(e);(0,P.hu)(!n.queryToTagMap.has(O),"View does not exist, but we have a tag");const V=function EH(){return hH++}();n.queryToTagMap.set(O,V),n.tagToQueryMap.set(V,O)}let S=function uH(n,e,t,r,i,a){const l=sF(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function rH(n,e){n.eventRegistrations_.push(e)}(l,t),function iH(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Wn,(a,l)=>{r.push(w_(a,l))}),t.isFullyInitialized()&&r.push(L1(t.getNode())),rF(n,r,t.getNode(),e)}(l,t)}(h,e,t,iT(n.pendingWriteTree_,i),a,y);if(!w&&!l&&!r){const O=aF(h,e);S=S.concat(function IH(n,e,t){const r=e._path,i=vE(n,e),a=fF(n,t),l=n.listenProvider_.startListening(wE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!If(h.value),"If we're adding a query, it shouldn't be shadowed");else{const y=h.fold((w,D,S)=>{if(!Zt(w)&&D&&If(D))return[lT(D).query];{let O=[];return D&&(O=O.concat(oF(D).map(V=>V.query))),Ai(S,(V,H)=>{O=O.concat(H)}),O}});for(let w=0;w<y.length;++w){const D=y[w];n.listenProvider_.stopListening(wE(D),vE(n,D))}}return l}(n,e,O))}return S}function hT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=Ef(h,Ss(l,e));if(w)return w});return z1(i,e,a,t,!0)}function b_(n,e){return dF(e,n.syncPointTree_,null,iT(n.pendingWriteTree_,pn()))}function dF(n,e,t,r){if(Zt(n.path))return hF(n,e,t,r);{const i=e.get(pn());null==t&&null!=i&&(t=Ef(i,pn()));let a=[];const l=Kt(n.path),h=n.operationForChild(l),y=e.children.get(l);if(y&&h){const w=t?t.getImmediateChild(l):null,D=K1(r,l);a=a.concat(dF(h,y,w,D))}return i&&(a=a.concat(WN(i,n,r,t))),a}}function hF(n,e,t,r){const i=e.get(pn());null==t&&null!=i&&(t=Ef(i,pn()));let a=[];return e.children.inorderTraversal((l,h)=>{const y=t?t.getImmediateChild(l):null,w=K1(r,l),D=n.operationForChild(l);D&&(a=a.concat(hF(D,h,y,w)))}),i&&(a=a.concat(WN(i,n,r,t))),a}function fF(n,e){const t=e.query,r=vE(n,t);return{hashFn:()=>(function eH(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function mH(n,e,t){const r=KN(n,t);if(r){const i=ZN(r),a=i.path,l=i.queryId,h=Ss(a,e);return YN(n,a,new pE(kN(l),h))}return[]}(n,t._path,r):function gH(n,e){return b_(n,new pE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function g2(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return dT(n,t,null,a)}}}}function vE(n,e){const t=fT(e);return n.queryToTagMap.get(t)}function fT(n){return n._path.toString()+"$"+n._queryIdentifier}function KN(n,e){return n.tagToQueryMap.get(e)}function ZN(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function YN(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),WN(r,t,iT(n.pendingWriteTree_,e),null)}function wE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function dH(){return(0,P.hu)(cT,"Reference.ts has not been loaded"),cT}())(n._repo,n._path):n}class QN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new QN(t)}node(){return this.node_}}class JN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=cr(this.path_,e);return new JN(this.syncTree_,t)}node(){return hT(this.syncTree_,this.path_)}}const pF=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?bH(n[".sv"],e,t):"object"==typeof n[".sv"]?DH(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},bH=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},DH=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},gF=function(n,e,t,r){return eR(e,new JN(t,n),r)},XN=function(n,e,t){return eR(n,new QN(e),t)};function eR(n,e,t){const r=n.getPriority().val(),i=pF(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=pF(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new y_(h,Er(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new y_(i))),l.forEachChild(Wn,(h,y)=>{const w=eR(y,e.getImmediateChild(h),t);w!==y&&(a=a.updateImmediateChild(h,w))}),a}}class tR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function pT(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,i=Kt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new tR(i,r,a),t=Un(t),i=Kt(t)}return r}function tm(n){return n.node.value}function nR(n,e){n.node.value=e,rR(n)}function mF(n){return n.node.childCount>0}function gT(n,e){Ai(n.node.children,(t,r)=>{e(new tR(t,n,r))})}function yF(n,e,t,r){t&&!r&&e(n),gT(n,i=>{yF(i,e,!0,r)}),t&&r&&e(n)}function EE(n){return new Cn(null===n.parent?n.name:EE(n.parent)+"/"+n.name)}function rR(n){null!==n.parent&&function AH(n,e,t){const r=function TH(n){return void 0===tm(n)&&!mF(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,rR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,rR(n))}(n.parent,n.name,n)}const xH=/[\[\].#$\/\u0000-\u001F\u007F]/,MH=/[\[\].#$\u0000-\u001F\u007F]/,iR=10485760,mT=function(n){return"string"==typeof n&&0!==n.length&&!xH.test(n)},_F=function(n){return"string"==typeof n&&0!==n.length&&!MH.test(n)},IE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!HD(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},$l=function(n,e,t,r){r&&void 0===e||CE((0,P.gK)(n,"value"),e,t)},CE=function(n,e,t){const r=t instanceof Cn?new z2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Yg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Yg(r)+" with contents = "+e.toString());if(HD(e))throw new Error(n+"contains "+e.toString()+" "+Yg(r));if("string"==typeof e&&e.length>iR/3&&(0,P.ug)(e)>iR)throw new Error(n+"contains a string greater than "+iR+" utf8 bytes "+Yg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ai(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!mT(l)))throw new Error(n+" contains an invalid key ("+l+") "+Yg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function q2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),b1(n)})(r,l),CE(n,h,r),function K2(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Yg(r)+" in addition to actual children.")}},vF=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ai(e,(l,h)=>{const y=new Cn(l);if(CE(i,h,cr(t,y)),".priority"===vN(y)&&!IE(h))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=aE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!mT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(W2);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ma(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},sR=function(n,e,t){if(!t||void 0!==e){if(HD(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!IE(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bE=function(n,e,t,r){if(!(r&&void 0===t||mT(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},DE=function(n,e,t,r){if(!(r&&void 0===t||_F(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_a=function(n,e){if(".info"===Kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},wF=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!mT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_F(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class PH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!wN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function EF(n,e,t){yT(n,t),IF(n,r=>wN(r,e))}function Ro(n,e,t){yT(n,t),IF(n,r=>ma(r,e)||ma(e,r))}function IF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(kH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function kH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Kg&&Si("event: "+t.toString()),g_(r)}}}const CF="repo_interrupt";class LH{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eT(),this.transactionQueueTree_=new tR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bF(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function TE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:bF(n)})}function DF(n,e,t,r,i){n.dataUpdateCount++;const a=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const y=(0,P.UI)(t,w=>Er(w));l=function yH(n,e,t,r){const i=KN(n,r);if(i){const a=ZN(i),l=a.path,h=a.queryId,y=Ss(l,e),w=zn.fromObject(t);return YN(n,l,new I_(kN(h),y,w))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=Er(t);l=cF(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,P.UI)(t,w=>Er(w));l=function pH(n,e,t){const r=zn.fromObject(t);return b_(n,new I_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=Er(t);l=_E(n.serverSyncTree_,a,y)}let h=a;l.length>0&&(h=T_(n,a)),Ro(n.eventQueue_,h,l)}function TF(n,e){oR(n,"connected",e),!1===e&&function HH(n){D_(n,"onDisconnectEvents");const e=TE(n),t=eT();RN(n.onDisconnect_,pn(),(i,a)=>{const l=gF(i,a,n.serverSyncTree_,e);E_(t,i,l)});let r=[];RN(t,pn(),(i,a)=>{r=r.concat(_E(n.serverSyncTree_,i,a));const l=cR(n,i);T_(n,l)}),n.onDisconnect_=eT(),Ro(n.eventQueue_,pn(),r)}(n)}function oR(n,e,t){const r=new Cn("/.info/"+e),i=Er(t);n.infoData_.updateSnapshot(r,i);const a=_E(n.infoSyncTree_,r,i);Ro(n.eventQueue_,r,a)}function _T(n){return n.nextWriteId_++}function aR(n,e,t,r,i){D_(n,"set",{path:e.toString(),value:t,priority:r});const a=TE(n),l=Er(t,r),h=hT(n.serverSyncTree_,e),y=XN(l,h,a),w=_T(n),D=zN(n.serverSyncTree_,e,y,w,!0);yT(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(O,V)=>{const H="ok"===O;H||ts("set at "+e+" failed: "+O);const ge=Cf(n.serverSyncTree_,w,!H);Ro(n.eventQueue_,e,ge),bf(0,i,O,V)});const S=cR(n,e);T_(n,S),Ro(n.eventQueue_,S,[])}function $H(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&NN(n.onDisconnect_,e),bf(0,t,r,i)})}function SF(n,e,t,r){const i=Er(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&E_(n.onDisconnect_,e,i),bf(0,r,a,l)})}function uR(n,e,t){let r;r=".info"===Kt(e._path)?dT(n.infoSyncTree_,e,t):dT(n.serverSyncTree_,e,t),EF(n.eventQueue_,e._path,r)}function AF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(CF)}function D_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Si(t,...e)}function bf(n,e,t,r){e&&g_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function lR(n,e,t){return hT(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function vT(n,e=n.transactionQueueTree_){if(e||wT(n,e),tm(e)){const t=MF(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function ZH(n,e,t){const r=t.map(w=>w.currentWriteId),i=lR(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,P.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Ss(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),y=e;n.server_.put(y.toString(),h,w=>{D_(n,"transaction put response",{path:y.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let O=0;O<t.length;O++)t[O].status=2,D=D.concat(Cf(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&S.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();wT(n,pT(n.transactionQueueTree_,e)),vT(n,n.transactionQueueTree_),Ro(n.eventQueue_,e,D);for(let O=0;O<S.length;O++)g_(S[O])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ts("transaction at "+y.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}T_(n,e)}},l)}(n,EE(e),t)}else mF(e)&&gT(e,t=>{vT(n,t)})}function T_(n,e){const t=xF(n,e),r=EE(t);return function YH(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const y=e[h],w=Ss(t,y.path);let S,D=!1;if((0,P.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,S=y.abortReason,i=i.concat(Cf(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)D=!0,S="maxretry",i=i.concat(Cf(n.serverSyncTree_,y.currentWriteId,!0));else{const O=lR(n,y.path,l);y.currentInputSnapshot=O;const V=e[h].update(O.val());if(void 0!==V){CE("transaction failed: Data returned ",V,y.path);let H=Er(V);"object"==typeof V&&null!=V&&(0,P.r3)(V,".priority")||(H=H.updatePriority(O.getPriority()));const be=y.currentWriteId,Ye=TE(n),gt=XN(H,O,Ye);y.currentOutputSnapshotRaw=H,y.currentOutputSnapshotResolved=gt,y.currentWriteId=_T(n),l.splice(l.indexOf(be),1),i=i.concat(zN(n.serverSyncTree_,y.path,gt,y.currentWriteId,y.applyLocally)),i=i.concat(Cf(n.serverSyncTree_,be,!0))}else D=!0,S="nodata",i=i.concat(Cf(n.serverSyncTree_,y.currentWriteId,!0))}Ro(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}wT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)g_(r[h]);vT(n,n.transactionQueueTree_)}(n,MF(n,t),r),r}function xF(n,e){let t,r=n.transactionQueueTree_;for(t=Kt(e);null!==t&&void 0===tm(r);)r=pT(r,t),t=Kt(e=Un(e));return r}function MF(n,e){const t=[];return NF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function NF(n,e,t){const r=tm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);gT(e,i=>{NF(n,i,t)})}function wT(n,e){const t=tm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,nR(e,t.length>0?t:void 0)}gT(e,r=>{wT(n,r)})}function cR(n,e){const t=EE(xF(n,e)),r=pT(n.transactionQueueTree_,e);return function SH(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{dR(n,i)}),dR(n,r),yF(r,i=>{dR(n,i)}),t}function dR(n,e){const t=tm(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,P.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,P.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Cf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?nR(e,void 0):t.length=a+1,Ro(n.eventQueue_,EE(e),i);for(let l=0;l<r.length;l++)g_(r[l])}}const hR=function(n,e){const t=XH(n),r=t.namespace;return"firebase.com"===t.domain&&Bl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Bl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ts("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Cn(t.pathString)}},XH=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function QH(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const O=function JH(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ts(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,y=parseInt(e.substring(w+1),10)):w=e.length;const V=e.slice(0,w);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const H=e.indexOf(".");r=e.substring(0,H).toLowerCase(),t=e.substring(H+1),a=r}"ns"in O&&(a=O.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class RF{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Wl)(this.snapshot.exportVal())}}class OF{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class PF{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return $H(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_a("OnDisconnect.remove",this._path);const e=new P.BH;return SF(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_a("OnDisconnect.set",this._path),$l("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return SF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_a("OnDisconnect.setWithPriority",this._path),$l("OnDisconnect.setWithPriority",e,this._path,!1),sR("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function GH(n,e,t,r,i){const a=Er(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&E_(n.onDisconnect_,e,a),bf(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_a("OnDisconnect.update",this._path),vF("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function WH(n,e,t,r){if((0,P.xb)(t))return Si("onDisconnect().update() called with empty data.  Don't do anything."),void bf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ai(t,(l,h)=>{const y=Er(h);E_(n.onDisconnect_,cr(e,l),y)}),bf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class eo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Zt(this._path)?null:vN(this._path)}get ref(){return new va(this._repo,this._path)}get _queryIdentifier(){const e=U1(this._queryParams),t=cN(e);return"{}"===t?"default":t}get _queryObject(){return U1(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof eo))return!1;const t=this._repo===e._repo,r=wN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function G2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ET(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Df(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Hl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ld)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==jl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Wn){if(null!=e&&!IE(e)||null!=t&&!IE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof DN||n.getIndex()===TN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function IT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class va extends eo{constructor(e,t){super(e,t,new QD,!1)}get parent(){const e=C1(this._path);return null===e?null:new va(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class nm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Cn(e),r=rm(this.ref,e);return new nm(this._node.getChild(t),r,Wn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new nm(i,rm(this.ref,r),Wn)))}hasChild(e){const t=new Cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kF(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?rm(n._root,e):n._root}function FF(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=hR(e,n._repo.repoInfo_.nodeAdmin);wF("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Bl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),kF(n,t.path.toString())}function rm(n,e){return null===Kt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DE("child","path",t,!1)):DE("child","path",e,!1),new va(n._repo,cr(n._path,e));var t}function pR(n,e){n=(0,P.m9)(n),_a("set",n._path),$l("set",e,n._path,!1);const t=new P.BH;return aR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function i$(n,e){vF("update",e,n._path,!1);const t=new P.BH;return function jH(n,e,t,r){D_(n,"update",{path:e.toString(),value:t});let i=!0;const a=TE(n),l={};if(Ai(t,(h,y)=>{i=!1,l[h]=gF(cr(e,h),Er(y),n.serverSyncTree_,a)}),i)Si("update() called with empty data.  Don't do anything."),bf(0,r,"ok",void 0);else{const h=_T(n),y=function fH(n,e,t,r){!function Mj(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=LN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=zn.fromObject(t);return b_(n,new I_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);yT(n.eventQueue_,y),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||ts("update at "+e+" failed: "+w);const O=Cf(n.serverSyncTree_,h,!S),V=O.length>0?T_(n,e):e;Ro(n.eventQueue_,V,O),bf(0,r,w,D)}),Ai(t,w=>{const D=cR(n,cr(e,w));T_(n,D)}),Ro(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function s$(n){n=(0,P.m9)(n);const e=new fR(()=>{}),t=new SE(e);return function BH(n,e,t){const r=function _H(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=Ss(w,t);r=r||Ef(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Ef(i,pn()):(i=new iF,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new vf(r,!0,!1):null;return function tH(n){return rT(n.viewCache_)}(sF(i,e,iT(n.pendingWriteTree_,e._path),a?l.getNode():Ht.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Er(i).withIndex(e._queryParams.getIndex());let l;if(qN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=_E(n.serverSyncTree_,e._path,a);else{const h=vE(n.serverSyncTree_,e);l=cF(n.serverSyncTree_,e._path,a,h)}return Ro(n.eventQueue_,e._path,l),dT(n.serverSyncTree_,e,t,null,!0),a},i=>(D_(n,"get for query "+(0,P.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new nm(r,new va(n._repo,n._path),n._queryParams.getIndex()))}class SE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new RF("value",this,new nm(e.snapshotNode,new va(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new OF(this,e,t):null}matches(e){return e instanceof SE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class CT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new OF(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=rm(new va(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new RF(e.type,this,new nm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof CT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function AE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const y=t,w=(D,S)=>{uR(n._repo,n,h),y(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new fR(t,a||void 0),h="value"===e?new SE(l):new CT(e,l);return function zH(n,e,t){let r;r=".info"===Kt(e._path)?qN(n.infoSyncTree_,e,t):qN(n.serverSyncTree_,e,t),EF(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>uR(n._repo,n,h)}function gR(n,e,t,r){return AE(n,"value",e,t,r)}function LF(n,e,t,r){return AE(n,"child_added",e,t,r)}function VF(n,e,t,r){return AE(n,"child_changed",e,t,r)}function UF(n,e,t,r){return AE(n,"child_moved",e,t,r)}function BF(n,e,t,r){return AE(n,"child_removed",e,t,r)}function jF(n,e,t){let r=null;const i=t?new fR(t):null;"value"===e?r=new SE(i):e&&(r=new CT(e,i)),uR(n._repo,n,r)}class Eu{}class HF extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("endAt",this._value,e._path,!0);const t=MN(e._queryParams,this._value,this._key);if(IT(t),Df(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new eo(e._repo,e._path,t,e._orderByCalled)}}class a$ extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("endBefore",this._value,e._path,!1);const t=function yj(n,e,t){let r,i;return n.index_===Hl?("string"==typeof e&&(e=F1(e)),i=MN(n,e,t)):(r=null==t?ld:F1(t),i=MN(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(IT(t),Df(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new eo(e._repo,e._path,t,e._orderByCalled)}}class $F extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("startAt",this._value,e._path,!0);const t=xN(e._queryParams,this._value,this._key);if(IT(t),Df(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new eo(e._repo,e._path,t,e._orderByCalled)}}class c$ extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("startAfter",this._value,e._path,!1);const t=function mj(n,e,t){let r;if(n.index_===Hl)"string"==typeof e&&(e=k1(e)),r=xN(n,e,t);else{let i;i=null==t?jl:k1(t),r=xN(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(IT(t),Df(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new eo(e._repo,e._path,t,e._orderByCalled)}}class h$ extends Eu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new eo(e._repo,e._path,function pj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class p$ extends Eu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new eo(e._repo,e._path,function gj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class m$ extends Eu{constructor(e){super(),this._path=e}_apply(e){ET(e,"orderByChild");const t=new Cn(this._path);if(Zt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new DN(t),i=JD(e._queryParams,r);return Df(i),new eo(e._repo,e._path,i,!0)}}class _$ extends Eu{_apply(e){ET(e,"orderByKey");const t=JD(e._queryParams,Hl);return Df(t),new eo(e._repo,e._path,t,!0)}}class w$ extends Eu{_apply(e){ET(e,"orderByPriority");const t=JD(e._queryParams,Wn);return Df(t),new eo(e._repo,e._path,t,!0)}}class I$ extends Eu{_apply(e){ET(e,"orderByValue");const t=JD(e._queryParams,TN);return Df(t),new eo(e._repo,e._path,t,!0)}}class b$ extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if($l("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new HF(this._value,this._key)._apply(new $F(this._value,this._key)._apply(e))}}function Iu(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function sH(n){(0,P.hu)(!uT,"__referenceConstructor has already been defined"),uT=n})(va),function cH(n){(0,P.hu)(!cT,"__referenceConstructor has already been defined"),cT=n}(va);const mR={};function WF(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Bl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Si("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,l=hR(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(y=!0,a=`http://${w}?ns=${h.namespace}`,l=hR(a,i),h=l.repoInfo):y=!l.repoInfo.secure;const D=i&&y?new oE(oE.OWNER):new v2(n.name,n.options,e);wF("Invalid Firebase Database URL",l),Zt(l.path)||Bl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function x$(n,e,t,r){let i=mR[e.name];i||(i={},mR[e.name]=i);let a=i[n.toURLString()];return a&&Bl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new LH(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new _2(n.name,t));return new N$(S,n)}class N${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function VH(n,e,t){if(n.stats_=mN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new XD(n.repoInfo_,(r,i,a,l)=>{DF(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>TF(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Qg(n.repoInfo_,e,(r,i,a,l)=>{DF(n,r,i,a,l)},r=>{TF(n,r)},r=>{!function UH(n,e){Ai(e,(t,r)=>{oR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function I2(n,e){const t=n.toString();return gN[t]||(gN[t]=e()),gN[t]}(n.repoInfo_,()=>new Cj(n.stats_,n.server_)),n.infoData_=new _j,n.infoSyncTree_=new lF({startListening:(r,i,a,l)=>{let h=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(h=_E(n.infoSyncTree_,r._path,y),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),oR(n,"connected",!1),n.serverSyncTree_=new lF({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,y)=>{const w=l(h,y);Ro(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new va(this._repo,pn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function A$(n,e){const t=mR[e];(!t||t[n.key]!==n)&&Bl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),AF(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Bl("Cannot call "+e+" on a deleted database.")}}function zF(){d1.IS_TRANSPORT_INITIALIZED&&ts("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function R$(){zF(),yf.forceDisallow()}function O$(){zF(),m_.forceDisallow(),yf.forceAllow()}function F$(n,e){Wk(n,e)}const V$={".sv":"timestamp"};class j${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Qg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Qg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function L$(n){Bk(ia.SDK_VERSION),(0,ia._registerComponent)(new du.wA("database",(e,{instanceIdentifier:t})=>WF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ia.registerVersion)(Vk,"0.13.9",n),(0,ia.registerVersion)(Vk,"0.13.9","esm2017")}();const W$=new To.Yd("@firebase/database-compat"),KF=function(n){W$.warn("FIREBASE WARNING: "+n)};class K${constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,KF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Z${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),DE("DataSnapshot.child","path",e,!1),new Tf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),DE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Tf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Oo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Bi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const l=Bi.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{t.call(l.context,new Tf(this.database,w),D)};h.userCallback=t,h.context=l.context;const y=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return gR(this._delegate,h,y),t;case"child_added":return LF(this._delegate,h,y),t;case"child_removed":return BF(this._delegate,h,y),t;case"child_changed":return VF(this._delegate,h,y),t;case"child_moved":return UF(this._delegate,h,y),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,jF(this._delegate,e,i)}else jF(this._delegate,e)}get(){return s$(this._delegate).then(e=>new Tf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=Bi.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,h=(w,D)=>{const S=new Tf(this.database,w);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const y=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":gR(this._delegate,h,y,{onlyOnce:!0});break;case"child_added":LF(this._delegate,h,y,{onlyOnce:!0});break;case"child_removed":BF(this._delegate,h,y,{onlyOnce:!0});break;case"child_changed":VF(this._delegate,h,y,{onlyOnce:!0});break;case"child_moved":UF(this._delegate,h,y,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new Bi(this.database,Iu(this._delegate,function f$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new h$(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new Bi(this.database,Iu(this._delegate,function g$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new p$(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new Bi(this.database,Iu(this._delegate,function y$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return DE("orderByChild","path",n,!1),new m$(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new Bi(this.database,Iu(this._delegate,function v$(){return new _$}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new Bi(this.database,Iu(this._delegate,function E$(){return new w$}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new Bi(this.database,Iu(this._delegate,function C$(){return new I$}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new Bi(this.database,Iu(this._delegate,function l$(n=null,e){return bE("startAt","key",e,!0),new $F(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new Bi(this.database,Iu(this._delegate,function d$(n,e){return bE("startAfter","key",e,!0),new c$(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new Bi(this.database,Iu(this._delegate,function o$(n,e){return bE("endAt","key",e,!0),new HF(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new Bi(this.database,Iu(this._delegate,function u$(n,e){return bE("endBefore","key",e,!0),new a$(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new Bi(this.database,Iu(this._delegate,function D$(n,e){return bE("equalTo","key",e,!0),new b$(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Bi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Oo(this.database,new va(this._delegate._repo,this._delegate._path))}}class Oo extends Bi{constructor(e,t){super(e,new eo(t._repo,t._path,new QD,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Oo(this.database,rm(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Oo(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Oo(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=pR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,KF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_a("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=i$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function r$(n,e,t){if(_a("setWithPriority",n._path),$l("setWithPriority",e,n._path,!1),sR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return aR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function t$(n){return _a("remove",n._path),pR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function H$(n,e,t){var r;if(n=(0,P.m9)(n),_a("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new P.BH,h=gR(n,()=>{});return function KH(n,e,t,r,i,a){D_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Hk(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=lR(n,e,void 0);l.currentInputSnapshot=h;const y=l.update(h.val());if(void 0===y)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{CE("transaction failed: Data returned ",y,l.path),l.status=0;const w=pT(n.transactionQueueTree_,e),D=tm(w)||[];let S;D.push(l),nR(w,D),"object"==typeof y&&null!==y&&(0,P.r3)(y,".priority")?(S=(0,P.DV)(y,".priority"),(0,P.hu)(IE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(hT(n.serverSyncTree_,e)||Ht.EMPTY_NODE).getPriority().val();const O=TE(n),V=Er(y,S),H=XN(V,h,O);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=H,l.currentWriteId=_T(n);const ge=zN(n.serverSyncTree_,e,H,l.currentWriteId,l.applyLocally);Ro(n.eventQueue_,e,ge),vT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,w,D)=>{let S=null;y?a.reject(y):(S=new nm(D,new va(n._repo,n._path),Wn),a.resolve(new j$(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Z$(a.committed,new Tf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function n$(n,e){n=(0,P.m9)(n),_a("setPriority",n._path),sR("setPriority",e,!1);const t=new P.BH;return aR(n._repo,cr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function e$(n,e){n=(0,P.m9)(n),_a("push",n._path),$l("push",e,n._path,!0);const t=bF(n._repo),r=cj(t),i=rm(n,r),a=rm(n,r);let l;return l=null!=e?pR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Oo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Oo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return _a("Reference.onDisconnect",this._delegate._path),new K$(new PF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class xE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:R$,forceLongPolling:O$}}useEmulator(e,t,r={}){!function qF(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Bl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Bl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new oE(oE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new oE(l)}!function S$(n,e,t,r){n.repoInfo_=new fN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Oo){const t=FF(this._delegate,e.toString());return new Oo(this,t)}{const t=kF(this._delegate,e);return new Oo(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=FF(this._delegate,e);return new Oo(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function P$(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),AF(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function k$(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function qH(n){n.persistentConnection_&&n.persistentConnection_.resume(CF)}(n._repo)}(this._delegate)}}xE.ServerValue={TIMESTAMP:function U$(){return V$}(),increment:n=>function B$(n){return{".sv":{increment:n}}}(n)};var Q$=Object.freeze({__proto__:null,initStandalone:function Y$({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Bk(t);const l=new du.zt("auth-internal",new du.H0("database-standalone"));return l.setComponent(new du.wA("auth-internal",()=>r,"PRIVATE")),{instance:new xE(WF(n,l,void 0,e,a),n),namespace:i}}});const J$=xE.ServerValue;function ZF(n){return null==n}function YF(n){return"function"==typeof n.set}function QF(n,e){return YF(e)?e:n.ref(e)}function JF(n,e){if(function eG(n){return"string"==typeof n}(n))return e.stringCase();if(YF(n))return e.firebaseCase();if(function tG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function ME(n,e,t="on",r=ay.z){return new br.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,at.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,ok.B)())}function XF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function iG(n,e){const{payload:t,prevKey:r,key:i}=e,a=XF(n,i),l=function rG(n,e){if(ZF(e))return 0;{const t=XF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(y=>{const w={payload:y,type:"value",prevKey:h,key:y.key};return h=y.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function eL(n){return(ZF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function tL(n,e,t){return function nG(n,e,t){return ME(n,"value","once",t).pipe(Mr(r=>{const i=[rt(r)];return e.forEach(a=>i.push(ME(n,a,"on",t))),(0,NM.T)(...i).pipe(wl(iG,[]))}),sw())}(n,e=eL(e),t)}function nL(n,e,t){const r=(e=eL(e)).map(i=>ME(n,i,"on",t));return(0,NM.T)(...r)}function rL(n,e){return function(r,i){return JF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function uG(n){return function(t){return t?JF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function iL(n,e){return function(){return ME(n,"value","on",e)}}!function X$(n){n.INTERNAL.registerComponent(new du.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new xE(i,r)},"PUBLIC").setServiceProps({Reference:Oo,Query:Bi,Database:xE,DataSnapshot:Tf,enableLogging:F$,INTERNAL:Q$,ServerValue:J$}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.9")}(ow.Z);const dG=new m.OlP("angularfire2.realtimeDatabaseURL"),hG=new m.OlP("angularfire2.database.use-emulator");let fG=(()=>{class n{constructor(t,r,i,a,l,h,y,w,D,S,O,V,H,ge,be){this.schedulers=h;const Ye=y,gt=(0,vi.on)(t,l,r);w&&rN(gt,l,D,O,V,H,S,ge),this.database=(0,vi.cc)(`${gt.name}.database.${i}`,"AngularFireDatabase",gt.name,()=>{const Dt=l.runOutsideAngular(()=>gt.database(i||void 0));return Ye&&Dt.useEmulator(...Ye),Dt},[Ye])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>QF(this.database,t));let a=i;return r&&(a=r(i)),function lG(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:rL(r,"update"),set:rL(r,"set"),push:i=>r.push(i),remove:uG(r),snapshotChanges:i=>tL(n,i,t).pipe(Fn.iC),stateChanges:i=>nL(n,i,t).pipe(Fn.iC),auditTrail:i=>function sG(n,e,t){return function aG(n,e,t){return function oG(n,e){return ME(n,"value","on",e).pipe((0,at.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function o2(...n){const e=(0,zi.jO)(n);return(0,ai.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let y=0;y<i;y++)(0,mi.Xf)(n[y]).subscribe((0,ir.x)(r,w=>{a[y]=w,!h&&!l[y]&&(l[y]=!0,(h=l.every(vl.y))&&(l=null))},s2.Z));t.subscribe((0,ir.x)(r,y=>{if(h){const w=[y,...a];r.next(e?e(...w):w)}}))})}(e),(0,at.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(y=>y.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function a2(n){return(0,ai.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ir.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,at.U)(i=>i.actions))}(n,nL(n,e).pipe(wl((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Fn.iC),valueChanges:(i,a)=>tL(n,i,t).pipe((0,at.U)(h=>h.map(y=>a&&a.idField?Object.assign(Object.assign({},y.payload.val()),{[a.idField]:y.key}):y.payload.val())),Fn.iC)}}(a,this)}object(t){return function cG(n,e){return{query:n,snapshotChanges:()=>iL(n,e.schedulers.outsideAngular)().pipe(Fn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>iL(n,e.schedulers.outsideAngular)().pipe(Fn.iC,(0,at.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>QF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vi.Dh),m.LFG(vi.xv,8),m.LFG(dG,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Fn.HU),m.LFG(hG,8),m.LFG(iN,8),m.LFG(QM,8),m.LFG(JM,8),m.LFG(XM,8),m.LFG(eN,8),m.LFG(tN,8),m.LFG(nN,8),m.LFG(BD,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pG=(()=>{class n{constructor(){HB.Z.registerVersion("angularfire",Fn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[fG]}),n})();const sL_firebase={apiKey:"AIzaSyBHGN4G38lKIAgzuuK6bv4PRKR7YGT4HyE",authDomain:"todosapp-d1c11.firebaseapp.com",databaseURL:"https://todosapp-d1c11-default-rtdb.europe-west1.firebasedatabase.app",projectId:"todosapp-d1c11",storageBucket:"todosapp-d1c11.appspot.com",messagingSenderId:"1089152559308",appId:"1:1089152559308:web:a5d5cfac7b87777df3ba69"};let gG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[LS]}),n.\u0275inj=m.cJS({imports:[hc,Q_,VT,i2,vi.hO.initializeApp(sL_firebase),pG]}),n})();Yu().bootstrapModule(gG).catch(n=>console.error(n))},5867:(ut,Te,L)=>{L.d(Te,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=L(9681);(0,m.registerVersion)("firebase","9.12.1","app")},127:(ut,Te,L)=>{L.d(Te,{Z:()=>m.Z});var m=L(3942);m.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(ut,Te,L)=>{L.r(Te);var m=L(5861),ee=L(3942),k=L(2090),se=L(9681),re=L(1877),de=L(655),le=L(4859);const Ie=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new re.Yd("@firebase/auth");function st(_,...f){Je.logLevel<=re.in.ERROR&&Je.error(`Auth (${se.SDK_VERSION}): ${_}`,...f)}function xe(_,...f){throw He(_,...f)}function ve(_,...f){return He(_,...f)}function Ce(_,f,g){const E=Object.assign(Object.assign({},tt()),{[f]:g});return new k.LL("auth","Firebase",E).create(f,{appName:_.name})}function Be(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&xe(_,"argument-error"),Ce(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(_,...f){if("string"!=typeof _){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(g,...E)}return ye.create(_,...f)}function j(_,f,...g){if(!_)throw He(f,...g)}function me(_){const f="INTERNAL ASSERTION FAILED: "+_;throw st(f),new Error(f)}function K(_,f){_||me(f)}const X=new Map;function ie(_){K(_ instanceof Function,"Expected a class definition");let f=X.get(_);return f?(K(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,X.set(_,f),f)}function Pe(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ft(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class un{constructor(f,g){this.shortDelay=f,this.longDelay=g,K(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wn(_,f){K(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Yt{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Lr=new un(3e4,6e4);function Rt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function ln(_,f,g,E){return ns.apply(this,arguments)}function ns(){return(ns=(0,m.Z)(function*(_,f,g,E,x={}){return xi(_,x,(0,m.Z)(function*(){let R={},q={};E&&("GET"===f?q=E:R={body:JSON.stringify(E)});const ce=(0,k.xO)(Object.assign({key:_.config.apiKey},q)).slice(1),Le=yield _._getAdditionalHeaders();return Le["Content-Type"]="application/json",_.languageCode&&(Le["X-Firebase-Locale"]=_.languageCode),Yt.fetch()(Mi(_,_.config.apiHost,g,ce),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function xi(_,f,g){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,m.Z)(function*(_,f,g){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},en),f);try{const x=new Yr(_),R=yield Promise.race([g(),x.promise]);x.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw di(_,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const ce=R.ok?q.errorMessage:q.error.message,[Le,Qe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw di(_,"credential-already-in-use",q);if("EMAIL_EXISTS"===Le)throw di(_,"email-already-in-use",q);if("USER_DISABLED"===Le)throw di(_,"user-disabled",q);const yt=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ce(_,yt,Qe);xe(_,yt)}}catch(x){if(x instanceof k.ZR)throw x;xe(_,"network-request-failed")}})).apply(this,arguments)}function Ur(_,f,g,E){return As.apply(this,arguments)}function As(){return(As=(0,m.Z)(function*(_,f,g,E,x={}){const R=yield ln(_,f,g,E,x);return"mfaPendingCredential"in R&&xe(_,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Mi(_,f,g,E){const x=`${f}${g}?${E}`;return _.config.emulator?wn(_.config,x):`${_.config.apiScheme}://${x}`}class Yr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(ve(this.auth,"network-request-failed")),Lr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function di(_,f,g){const E={appName:_.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const x=ve(_,f,E);return x.customData._tokenResponse=g,x}function Ze(){return(Ze=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ar(_,f){return xs.apply(this,arguments)}function xs(){return(xs=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xn(_,f){return hi.apply(this,arguments)}function hi(){return(hi=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ji(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function gn(){return(gn=(0,m.Z)(function*(_,f=!1){const g=(0,k.m9)(_),E=yield g.getIdToken(f),x=ot(E);j(x&&x.exp&&x.auth_time&&x.iat,g.auth,"internal-error");const R="object"==typeof x.firebase?x.firebase:void 0,q=R?.sign_in_provider;return{claims:x,token:E,authTime:ji(mt(x.auth_time)),issuedAtTime:ji(mt(x.iat)),expirationTime:ji(mt(x.exp)),signInProvider:q||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function mt(_){return 1e3*Number(_)}function ot(_){var f;const[g,E,x]=_.split(".");if(void 0===g||void 0===E||void 0===x)return st("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,k.tV)(E);return R?JSON.parse(R):(st("Failed to decode base64 JWT payload"),null)}catch(R){return st("Caught error parsing JWT payload as JSON",null===(f=R)||void 0===f?void 0:f.toString()),null}}function dr(_,f){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,m.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof k.ZR&&Qr(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Qr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Tt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,m.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(g=E)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class rs{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ji(this.lastLoginAt),this.creationTime=ji(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tn(_){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,m.Z)(function*(_){var f;const g=_.auth,E=yield _.getIdToken(),x=yield dr(_,Xn(g,{idToken:E}));j(x?.users.length,g,"internal-error");const R=x.users[0];_._notifyReloadListener(R);const q=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?et(R.providerUserInfo):[],ce=Br(_.providerData,q),yt=!!_.isAnonymous&&!(_.email&&R.passwordHash||ce?.length),_t={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ce,metadata:new rs(R.createdAt,R.lastLoginAt),isAnonymous:yt};Object.assign(_,_t)})).apply(this,arguments)}function er(){return(er=(0,m.Z)(function*(_){const f=(0,k.m9)(_);yield tn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Br(_,f){return[..._.filter(E=>!f.some(x=>x.providerId===E.providerId)),...f]}function et(_){return _.map(f=>{var{providerId:g}=f,E=(0,de._T)(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Xe(){return(Xe=(0,m.Z)(function*(_,f){const g=yield xi(_,{},(0,m.Z)(function*(){const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:x,apiKey:R}=_.config,q=Mi(_,x,"/v1/token",`key=${R}`),ce=yield _._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(q,{method:"POST",headers:ce,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(typeof f.idToken<"u","internal-error"),j(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function an(_){const f=ot(_);return j(f,"internal-error"),j(typeof f.exp<"u","internal-error"),j(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,m.Z)(function*(){return j(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,m.Z)(function*(){const{accessToken:x,refreshToken:R,expiresIn:q}=yield function Se(_,f){return Xe.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(x,R,Number(q))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:x,expirationTime:R}=g,q=new Ct;return E&&(j("string"==typeof E,"internal-error",{appName:f}),q.refreshToken=E),x&&(j("string"==typeof x,"internal-error",{appName:f}),q.accessToken=x),R&&(j("number"==typeof R,"internal-error",{appName:f}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return me("not implemented")}}function It(_,f){j("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class kt{constructor(f){var{uid:g,auth:E,stsTokenManager:x}=f,R=(0,de._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new rs(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const E=yield dr(g,g.stsTokenManager.getToken(g.auth,f));return j(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function qn(_){return gn.apply(this,arguments)}(this,f)}reload(){return function rn(_){return er.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new kt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,m.Z)(function*(){let x=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),x=!0),g&&(yield tn(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield dr(f,function Po(_,f){return Ze.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,x,R,q,ce,Le,Qe,yt;const _t=null!==(E=g.displayName)&&void 0!==E?E:void 0,Dr=null!==(x=g.email)&&void 0!==x?x:void 0,Yi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,op=null!==(q=g.photoURL)&&void 0!==q?q:void 0,Q_=null!==(ce=g.tenantId)&&void 0!==ce?ce:void 0,Yd=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,J_=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,$E=null!==(yt=g.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:X_,emailVerified:GE,isAnonymous:WE,providerData:Tm,stsTokenManager:Sm}=g;j(X_&&Sm,f,"internal-error");const Am=Ct.fromJSON(this.name,Sm);j("string"==typeof X_,f,"internal-error"),It(_t,f.name),It(Dr,f.name),j("boolean"==typeof GE,f,"internal-error"),j("boolean"==typeof WE,f,"internal-error"),It(Yi,f.name),It(op,f.name),It(Q_,f.name),It(Yd,f.name),It(J_,f.name),It($E,f.name);const rt=new kt({uid:X_,auth:f,email:Dr,emailVerified:GE,displayName:_t,isAnonymous:WE,photoURL:op,phoneNumber:Yi,tenantId:Q_,stsTokenManager:Am,createdAt:J_,lastLoginAt:$E});return Tm&&Array.isArray(Tm)&&(rt.providerData=Tm.map(Wr=>Object.assign({},Wr))),Yd&&(rt._redirectEventId=Yd),rt}static _fromIdTokenResponse(f,g,E=!1){return(0,m.Z)(function*(){const x=new Ct;x.updateFromServerResponse(g);const R=new kt({uid:g.localId,auth:f,stsTokenManager:x,isAnonymous:E});return yield tn(R),R})()}}const B=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,E){var x=this;return(0,m.Z)(function*(){x.storage[g]=E})()}_get(g){var E=this;return(0,m.Z)(function*(){const x=E.storage[g];return void 0===x?null:x})()}_remove(g){var E=this;return(0,m.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return _.type="NONE",_})();function Z(_,f,g){return`firebase:${_}:${f}:${g}`}class Ee{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:x,name:R}=this.auth;this.fullUserKey=Z(this.userKey,x.apiKey,R),this.fullPersistenceKey=Z("persistence",x.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?kt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,m.Z)(function*(){if(!g.length)return new Ee(ie(B),f,E);const x=(yield Promise.all(g.map(function(){var Qe=(0,m.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=x[0]||ie(B);const q=Z(E,f.config.apiKey,f.name);let ce=null;for(const Qe of g)try{const yt=yield Qe._get(q);if(yt){const _t=kt._fromJSON(f,yt);Qe!==R&&(ce=_t),R=Qe;break}}catch{}const Le=x.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],ce&&(yield R._set(q,ce.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,m.Z)(function*(yt){if(yt!==R)try{yield yt._remove(q)}catch{}});return function(yt){return Qe.apply(this,arguments)}}())),new Ee(R,f,E)):new Ee(R,f,E)})()}}function J(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(fn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ge(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ue(f))return"Blackberry";if($e(f))return"Webos";if(ct(f))return"Safari";if((f.includes("chrome/")||Qt(f))&&!f.includes("edge/"))return"Chrome";if(zt(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ge(_=(0,k.z$)()){return/firefox\//i.test(_)}function ct(_=(0,k.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Qt(_=(0,k.z$)()){return/crios\//i.test(_)}function fn(_=(0,k.z$)()){return/iemobile/i.test(_)}function zt(_=(0,k.z$)()){return/android/i.test(_)}function Ue(_=(0,k.z$)()){return/blackberry/i.test(_)}function $e(_=(0,k.z$)()){return/webos/i.test(_)}function Ut(_=(0,k.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function to(_=(0,k.z$)()){return Ut(_)||zt(_)||$e(_)||Ue(_)||/windows phone/i.test(_)||fn(_)}function Ms(_,f=[]){let g;switch(_){case"Browser":g=J((0,k.z$)());break;case"Worker":g=`${J((0,k.z$)())}-${_}`;break;default:g=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${E}`}class ko{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=R=>new Promise((q,ce)=>{try{q(f(R))}catch(Le){ce(Le)}});E.onAbort=g,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,m.Z)(function*(){var E;if(g.auth.currentUser===f)return;const x=[];try{for(const R of g.queue)yield R(f),R.onAbort&&x.push(R.onAbort)}catch(R){x.reverse();for(const q of x)try{q()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=R)||void 0===E?void 0:E.message})}})()}}class Ft{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new no(this),this.idTokenSubscription=new no(this),this.beforeStateQueue=new ko(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var x,R;if(!E._deleted&&(E.persistenceManager=yield Ee.create(E,f),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var E;const x=yield g.assertedPersistence.getCurrentUser();let R=x,q=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ce=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=R?._redirectEventId,Qe=yield g.tryRedirectSignIn(f);(!ce||ce===Le)&&Qe?.user&&(R=Qe.user,q=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(q)try{yield g.beforeStateQueue.runMiddleware(R)}catch(ce){R=x,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ce))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){var E;try{yield tn(f)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ke(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const E=f?(0,k.m9)(f):null;return E&&j(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return f&&j(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new k.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,m.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(g);return null===f?x.removeCurrentUser():x.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&ie(f)||g._popupRedirectResolver;j(E,g,"argument-error"),g.redirectPersistenceManager=yield Ee.create(g,[ie(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var E,x;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(x=g.redirectUser)||void 0===x?void 0:x._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,x){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return j(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,E,x):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ms(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const x=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function bn(_){return(0,k.m9)(_)}class no{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hi(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Ns(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class Ir{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return me("not implemented")}_getIdTokenResponse(f){return me("not implemented")}_linkToIdToken(f,g){return me("not implemented")}_getReauthenticationResolver(f){return me("not implemented")}}function Zn(_,f){return wa.apply(this,arguments)}function wa(){return(wa=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:resetPassword",Rt(_,f))})).apply(this,arguments)}function cn(_,f){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Wl(_,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:update",Rt(_,f))})).apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(_,f){return Ur(_,"POST","/v1/accounts:signInWithPassword",Rt(_,f))})).apply(this,arguments)}function Os(_,f){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:sendOobCode",Rt(_,f))})).apply(this,arguments)}function fr(_,f){return zl.apply(this,arguments)}function zl(){return(zl=(0,m.Z)(function*(_,f){return Os(_,f)})).apply(this,arguments)}function pr(_,f){return jr.apply(this,arguments)}function jr(){return(jr=(0,m.Z)(function*(_,f){return Os(_,f)})).apply(this,arguments)}function bu(_,f){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,m.Z)(function*(_,f){return Os(_,f)})).apply(this,arguments)}function ql(_,f){return xr.apply(this,arguments)}function xr(){return(xr=(0,m.Z)(function*(_,f){return Os(_,f)})).apply(this,arguments)}function dd(){return(dd=(0,m.Z)(function*(_,f){return Ur(_,"POST","/v1/accounts:signInWithEmailLink",Rt(_,f))})).apply(this,arguments)}function Kl(){return(Kl=(0,m.Z)(function*(_,f){return Ur(_,"POST","/v1/accounts:signInWithEmailLink",Rt(_,f))})).apply(this,arguments)}class Zl extends Ir{constructor(f,g,E,x=null){super("password",E),this._email=f,this._password=g,this._tenantId=x}static _fromEmailAndPassword(f,g){return new Zl(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new Zl(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function Ea(_,f){return io.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Sf(_,f){return dd.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:xe(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return cn(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Af(_,f){return Kl.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:xe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function nr(_,f){return hd.apply(this,arguments)}function hd(){return(hd=(0,m.Z)(function*(_,f){return Ur(_,"POST","/v1/accounts:signInWithIdp",Rt(_,f))})).apply(this,arguments)}class is extends Ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new is(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):xe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x}=g,R=(0,de._T)(g,["providerId","signInMethod"]);if(!E||!x)return null;const q=new is(E,x);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(f){return nr(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,nr(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,nr(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,k.xO)(g)}return f}}function sm(_,f){return fd.apply(this,arguments)}function fd(){return(fd=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:sendVerificationCode",Rt(_,f))})).apply(this,arguments)}function Ps(){return(Ps=(0,m.Z)(function*(_,f){return Ur(_,"POST","/v1/accounts:signInWithPhoneNumber",Rt(_,f))})).apply(this,arguments)}function pd(){return(pd=(0,m.Z)(function*(_,f){const g=yield Ur(_,"POST","/v1/accounts:signInWithPhoneNumber",Rt(_,f));if(g.temporaryProof)throw di(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const am={USER_NOT_FOUND:"user-not-found"};function gd(){return(gd=(0,m.Z)(function*(_,f){return Ur(_,"POST","/v1/accounts:signInWithPhoneNumber",Rt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),am)})).apply(this,arguments)}class ks extends Ir{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new ks({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new ks({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Yl(_,f){return Ps.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function om(_,f){return pd.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function um(_,f){return gd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:x}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:x}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:x,temporaryProof:R}=f;return E||g||x||R?new ks({verificationId:g,verificationCode:E,phoneNumber:x,temporaryProof:R}):null}}class Du{constructor(f){var g,E,x,R,q,ce;const Le=(0,k.zd)((0,k.pd)(f)),Qe=null!==(g=Le.apiKey)&&void 0!==g?g:null,yt=null!==(E=Le.oobCode)&&void 0!==E?E:null,_t=function md(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Le.mode)&&void 0!==x?x:null);j(Qe&&yt&&_t,"argument-error"),this.apiKey=Qe,this.operation=_t,this.code=yt,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Le.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ce=Le.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const g=function yd(_){const f=(0,k.zd)((0,k.pd)(_)).link,g=f?(0,k.zd)((0,k.pd)(f)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(_)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||g||f||_}(f);try{return new Du(g)}catch{return null}}}let $i=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,E){return Zl._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const x=Du.parseLink(E);return j(x,"argument-error"),Zl._fromEmailAndCode(g,x.code,x.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ss{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class os extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class so extends os{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return j("providerId"in g&&"signInMethod"in g,"argument-error"),is._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),is._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return so.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return so.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:R,nonce:q,providerId:ce}=f;if(!E&&!x&&!g&&!R||!ce)return null;try{return new so(ce)._credential({idToken:g,accessToken:E,nonce:q,pendingToken:R})}catch{return null}}}let Ca=(()=>{class _ extends os{constructor(){super("facebook.com")}static credential(g){return is._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Tu=(()=>{class _ extends os{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return is._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:x}=g;if(!E&&!x)return null;try{return _.credential(E,x)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Ql=(()=>{class _ extends os{constructor(){super("github.com")}static credential(g){return is._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Fo extends Ir{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return nr(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,nr(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,nr(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x,pendingToken:R}=g;return E&&x&&R&&E===x?new Fo(E,R):null}static _create(f,g){return new Fo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fi extends ss{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return fi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return fi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Fo.fromJSON(f);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return Fo._create(E,g)}catch{return null}}}let Xr=(()=>{class _ extends os{constructor(){super("twitter.com")}static credential(g,E){return is._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=g;if(!E||!x)return null;try{return _.credential(E,x)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Lo(_,f){return _d.apply(this,arguments)}function _d(){return(_d=(0,m.Z)(function*(_,f){return Ur(_,"POST","/v1/accounts:signUp",Rt(_,f))})).apply(this,arguments)}class Cr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,x=!1){return(0,m.Z)(function*(){const R=yield kt._fromIdTokenResponse(f,E,x),q=Nf(E);return new Cr({user:R,providerId:q,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const x=Nf(E);return new Cr({user:f,providerId:x,_tokenResponse:E,operationType:g})})()}}function Nf(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Mn(){return(Mn=(0,m.Z)(function*(_){var f;const g=bn(_);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Cr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Lo(g,{returnSecureToken:!0}),x=yield Cr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(x.user),x})).apply(this,arguments)}class Su extends k.ZR{constructor(f,g,E,x){var R;super(g.code,g.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Su.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,x){return new Su(f,g,E,x)}}function Of(_,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Su._fromErrorAndOperation(_,R,f,E):R})}function pi(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Au(){return(Au=(0,m.Z)(function*(_,f){const g=(0,k.m9)(_);yield qt(!0,g,f);const{providerUserInfo:E}=yield Ar(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),x=pi(E||[]);return g.providerData=g.providerData.filter(R=>x.has(R.providerId)),x.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function oo(_,f){return us.apply(this,arguments)}function us(){return(us=(0,m.Z)(function*(_,f,g=!1){const E=yield dr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return Cr._forOperation(_,"link",E)})).apply(this,arguments)}function qt(_,f,g){return xu.apply(this,arguments)}function xu(){return(xu=(0,m.Z)(function*(_,f,g){yield tn(f);const x=!1===_?"provider-already-linked":"no-such-provider";j(pi(f.providerData).has(g)===_,f.auth,x)})).apply(this,arguments)}function ao(_,f){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,m.Z)(function*(_,f,g=!1){var E;const{auth:x}=_,R="reauthenticate";try{const q=yield dr(_,Of(x,R,f,_),g);j(q.idToken,x,"internal-error");const ce=ot(q.idToken);j(ce,x,"internal-error");const{sub:Le}=ce;return j(_.uid===Le,x,"user-mismatch"),Cr._forOperation(_,R,q)}catch(q){throw"auth/user-not-found"===(null===(E=q)||void 0===E?void 0:E.code)&&xe(x,"user-mismatch"),q}})).apply(this,arguments)}function Oi(_,f){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,m.Z)(function*(_,f,g=!1){const E="signIn",x=yield Of(_,E,f),R=yield Cr._fromIdTokenResponse(_,E,x);return g||(yield _._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sn(_,f){return St.apply(this,arguments)}function St(){return(St=(0,m.Z)(function*(_,f){return Oi(bn(_),f)})).apply(this,arguments)}function Ru(_,f){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,m.Z)(function*(_,f){const g=(0,k.m9)(_);return yield qt(!1,g,f.providerId),oo(g,f)})).apply(this,arguments)}function Ou(_,f){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,m.Z)(function*(_,f){return ao((0,k.m9)(_),f)})).apply(this,arguments)}function Jl(_,f){return ls.apply(this,arguments)}function ls(){return(ls=(0,m.Z)(function*(_,f){return Ur(_,"POST","/v1/accounts:signInWithCustomToken",Rt(_,f))})).apply(this,arguments)}function ba(){return(ba=(0,m.Z)(function*(_,f){const g=bn(_),E=yield Jl(g,{token:f,returnSecureToken:!0}),x=yield Cr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ae{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?$t._fromServerResponse(f,g):xe(f,"internal-error")}}class $t extends Ae{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new $t(g)}}function ku(_,f,g){var E;j((null===(E=g.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),j(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Nn(){return(Nn=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_),x={requestType:"PASSWORD_RESET",email:f};g&&ku(E,x,g),yield pr(E,x)})).apply(this,arguments)}function Vo(){return(Vo=(0,m.Z)(function*(_,f,g){yield Zn((0,k.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Da(){return(Da=(0,m.Z)(function*(_,f){yield Wl((0,k.m9)(_),{oobCode:f})})).apply(this,arguments)}function Ta(_,f){return ec.apply(this,arguments)}function ec(){return(ec=(0,m.Z)(function*(_,f){const g=(0,k.m9)(_),E=yield Zn(g,{oobCode:f}),x=E.requestType;switch(j(x,g,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,g,"internal-error");default:j(E.email,g,"internal-error")}let R=null;return E.mfaInfo&&(R=Ae._fromServerResponse(bn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:x}})).apply(this,arguments)}function vd(){return(vd=(0,m.Z)(function*(_,f){const{data:g}=yield Ta((0,k.m9)(_),f);return g.email})).apply(this,arguments)}function Rn(){return(Rn=(0,m.Z)(function*(_,f,g){const E=bn(_),x=yield Lo(E,{returnSecureToken:!0,email:f,password:g}),R=yield Cr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function uo(){return(uo=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_),x={requestType:"EMAIL_SIGNIN",email:f};j(g.handleCodeInApp,E,"argument-error"),g&&ku(E,x,g),yield bu(E,x)})).apply(this,arguments)}function Aa(){return(Aa=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_),x=$i.credentialWithLink(f,g||Pe());return j(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Sn(E,x)})).apply(this,arguments)}function cm(_,f){return rc.apply(this,arguments)}function rc(){return(rc=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:createAuthUri",Rt(_,f))})).apply(this,arguments)}function xa(){return(xa=(0,m.Z)(function*(_,f){const E={identifier:f,continueUri:ft()?Pe():"http://localhost"},{signinMethods:x}=yield cm((0,k.m9)(_),E);return x||[]})).apply(this,arguments)}function Ma(){return(Ma=(0,m.Z)(function*(_,f){const g=(0,k.m9)(_),x={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&ku(g.auth,x,f);const{email:R}=yield fr(g.auth,x);R!==_.email&&(yield _.reload())})).apply(this,arguments)}function Uu(){return(Uu=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&ku(E.auth,R,g);const{email:q}=yield ql(E.auth,R);q!==_.email&&(yield _.reload())})).apply(this,arguments)}function Bu(_,f){return oc.apply(this,arguments)}function oc(){return(oc=(0,m.Z)(function*(_,f){return ln(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function uc(){return(uc=(0,m.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,k.m9)(_),R={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield dr(E,Bu(E.auth,R));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const ce=E.providerData.find(({providerId:Le})=>"password"===Le);ce&&(ce.displayName=E.displayName,ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)})).apply(this,arguments)}function co(_,f,g){return ju.apply(this,arguments)}function ju(){return(ju=(0,m.Z)(function*(_,f,g){const{auth:E}=_,R={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const q=yield dr(_,cn(E,R));yield _._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ei{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class In extends ei{constructor(f,g,E,x){super(f,g,E),this.username=x}}class Ed extends ei{constructor(f,g){super(f,"facebook.com",g)}}class lc extends In{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class kf extends ei{constructor(f,g){super(f,"google.com",g)}}class cc extends In{constructor(f,g,E){super(f,"twitter.com",g,E)}}function Hu(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function rr(_){var f,g;if(!_)return null;const{providerId:E}=_,x=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},R=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&_?.idToken){const q=null===(g=null===(f=ot(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new ei(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new Ed(R,x);case"github.com":return new lc(R,x);case"google.com":return new kf(R,x);case"twitter.com":return new cc(R,x,_.screenName||null);case"custom":case"anonymous":return new ei(R,null);default:return new ei(R,E,x)}}(g)}class fo{constructor(f,g,E){this.type=f,this.credential=g,this.auth=E}static _fromIdtoken(f,g){return new fo("enroll",f,g)}static _fromMfaPendingCredential(f){return new fo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return fo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return fo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Gu{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=bn(f),x=g.customData._serverResponse,R=(x.mfaInfo||[]).map(ce=>Ae._fromServerResponse(E,ce));j(x.mfaPendingCredential,E,"internal-error");const q=fo._fromMfaPendingCredential(x.mfaPendingCredential);return new Gu(q,R,function(){var ce=(0,m.Z)(function*(Le){const Qe=yield Le._process(E,q);delete x.mfaInfo,delete x.mfaPendingCredential;const yt=Object.assign(Object.assign({},x),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const _t=yield Cr._fromIdTokenResponse(E,g.operationType,yt);return yield E._updateCurrentUser(_t.user),_t;case"reauthenticate":return j(g.user,E,"internal-error"),Cr._forOperation(g.user,g.operationType,yt);default:xe(E,"internal-error")}});return function(Le){return ce.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}function Wu(_,f){return ln(_,"POST","/v2/accounts/mfaEnrollment:start",Rt(_,f))}class Ff{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Ae._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Ff(f)}getSession(){var f=this;return(0,m.Z)(function*(){return fo._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var E=this;return(0,m.Z)(function*(){const x=f,R=yield E.getSession(),q=yield dr(E.user,x._process(E.user.auth,R,g));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){var E;const x="string"==typeof f?f:f.uid,R=yield g.user.getIdToken(),q=yield dr(g.user,function Dd(_,f){return ln(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(_,f))}(g.user.auth,{idToken:R,mfaEnrollmentId:x}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ce})=>ce!==x),yield g.user._updateTokensIfNecessary(q);try{yield g.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(E=ce)||void 0===E?void 0:E.code))throw ce}})()}}const jo=new WeakMap,po="__sak";class qu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(po,"1"),this.storage.removeItem(po),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ra=(()=>{class _ extends qu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Na(){const _=(0,k.z$)();return ct(_)||Ut(_)}()&&function En(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=to(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),R=this.localCache[E];x!==R&&g(E,R,x)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((ce,Le,Qe)=>{this.notifyListeners(ce,Qe)});const x=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(x);if(g.newValue!==ce)null!==g.newValue?this.storage.setItem(x,g.newValue):this.storage.removeItem(x);else if(this.localCache[x]===g.newValue&&!E)return}const R=()=>{const ce=this.storage.getItem(x);!E&&this.localCache[x]===ce||this.notifyListeners(x,ce)},q=this.storage.getItem(x);!function tr(){return(0,k.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,E){this.localCache[g]=E;const x=this.listeners[g];if(x)for(const R of Array.from(x))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var x=()=>super._set,R=this;return(0,m.Z)(function*(){yield x().call(R,g,E),R.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,x=this;return(0,m.Z)(function*(){const R=yield E().call(x,g);return x.localCache[g]=JSON.stringify(R),R})()}_remove(g){var E=()=>super._remove,x=this;return(0,m.Z)(function*(){yield E().call(x,g),delete x.localCache[g]})()}}return _.type="LOCAL",_})(),Wi=(()=>{class _ extends qu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return _.type="SESSION",_})();let Ad=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(R=>R.isListeningto(g));if(E)return E;const x=new _(g);return this.receivers.push(x),x}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,m.Z)(function*(){const x=g,{eventId:R,eventType:q,data:ce}=x.data,Le=E.handlersMap[q];if(!Le?.size)return;x.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Qe=Array.from(Le).map(function(){var _t=(0,m.Z)(function*(Dr){return Dr(x.origin,ce)});return function(Dr){return _t.apply(this,arguments)}}()),yt=yield function Pa(_){return Promise.all(_.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(Qe);x.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:yt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function ka(_="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return _+g}class dc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var x=this;return(0,m.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,ce;return new Promise((Le,Qe)=>{const yt=ka("",20);R.port1.start();const _t=setTimeout(()=>{Qe(new Error("unsupported_event"))},E);ce={messageChannel:R,onMessage(Dr){const Yi=Dr;if(Yi.data.eventId===yt)switch(Yi.data.status){case"ack":clearTimeout(_t),q=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Le(Yi.data.response);break;default:clearTimeout(_t),clearTimeout(q),Qe(new Error("invalid_response"))}}},x.handlers.add(ce),R.port1.addEventListener("message",ce.onMessage),x.target.postMessage({eventType:f,eventId:yt,data:g},[R.port2])}).finally(()=>{ce&&x.removeMessageHandler(ce)})})()}}function jn(){return window}function Ku(){return typeof jn().WorkerGlobalScope<"u"&&"function"==typeof jn().importScripts}function Fa(){return(Fa=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Vs="firebaseLocalStorageDb",Us="firebaseLocalStorage",hc="fbase_key";class mo{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function La(_,f){return _.transaction([Us],f?"readwrite":"readonly").objectStore(Us)}function $o(){const _=indexedDB.open(Vs,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Us,{keyPath:hc})}catch(x){g(x)}}),_.addEventListener("success",(0,m.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Us)?f(E):(E.close(),yield function Md(){const _=indexedDB.deleteDatabase(Vs);return new mo(_).toPromise()}(),f(yield $o()))}))})}function ds(_,f,g){return fc.apply(this,arguments)}function fc(){return(fc=(0,m.Z)(function*(_,f,g){const E=La(_,!0).put({[hc]:f,value:g});return new mo(E).toPromise()})).apply(this,arguments)}function Va(){return(Va=(0,m.Z)(function*(_,f){const g=La(_,!1).get(f),E=yield new mo(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function yo(_,f){const g=La(_,!0).delete(f);return new mo(g).toPromise()}const Go=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield $o()),g.db})()}_withRetries(g){var E=this;return(0,m.Z)(function*(){let x=0;for(;;)try{const R=yield E._openDb();return yield g(R)}catch(R){if(x++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return Ku()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=Ad._getInstance(function Yu(){return Ku()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(x,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(x,R){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(x,R){return["keyChanged"]});return function(x,R){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var E,x;if(g.activeServiceWorker=yield function go(){return Fa.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new dc(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=R[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Zu(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield $o();return yield ds(g,po,"1"),yield yo(g,po),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var x=this;return(0,m.Z)(function*(){return x._withPendingWrite((0,m.Z)(function*(){return yield x._withRetries(R=>ds(R,g,E)),x.localCache[g]=E,x.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,m.Z)(function*(){const x=yield E._withRetries(R=>function Qu(_,f){return Va.apply(this,arguments)}(R,g));return E.localCache[g]=x,x})()}_remove(g){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(x=>yo(x,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const E=yield g._withRetries(q=>{const ce=La(q,!1).getAll();return new mo(ce).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const x=[],R=new Set;for(const{fbase_key:q,value:ce}of E)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(ce)&&(g.notifyListeners(q,ce),x.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),x.push(q));return x})()}notifyListeners(g,E){this.localCache[g]=E;const x=this.listeners[g];if(x)for(const R of Array.from(x))R(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Wo(_,f){return ln(_,"POST","/v2/accounts/mfaSignIn:start",Rt(_,f))}function Bs(){return(Bs=(0,m.Z)(function*(_){return(yield ln(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qo(_){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=x=>{const R=ve("internal-error");R.customData=x,g(R)},E.type="text/javascript",E.charset="UTF-8",function zo(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function el(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ua=1e12;class mn{constructor(f){this.auth=f,this.counter=Ua,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new dm(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||Ua;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ua))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var E;return null===(E=g._widgets.get(f||Ua))||void 0===E||E.execute(),""})()}}class dm{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof f?document.getElementById(f):f;j(x,"argument-error",{appName:g}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function S_(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hm=el("rcb"),A_=new un(3e4,6e4);class Lf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=jn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return j(function RE(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(jn().grecaptcha):new Promise((E,x)=>{const R=jn().setTimeout(()=>{x(ve(f,"network-request-failed"))},A_.get());jn()[hm]=()=>{jn().clearTimeout(R),delete jn()[hm];const ce=jn().grecaptcha;if(!ce)return void x(ve(f,"internal-error"));const Le=ce.render;ce.render=(Qe,yt)=>{const _t=Le(Qe,yt);return this.counter++,_t},this.hostLanguage=g,E(ce)},qo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:hm,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),x(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=jn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gc{load(f){return(0,m.Z)(function*(){return new mn(f)})()}clearedOneInstance(){}}const M_="recaptcha",N_={theme:"light",type:"image"};class mr{constructor(f,g=Object.assign({},N_),E){this.parameters=g,this.type=M_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(E),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof f?document.getElementById(f):f;j(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gc:new Lf,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(R=>{const q=ce=>{!ce||(f.tokenChangeListeners.delete(q),R(ce))};f.tokenChangeListeners.add(q),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=jn()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){j(ft()&&!Ku(),f.auth,"internal-error"),yield function dn(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function ti(_){return Bs.apply(this,arguments)}(f.auth);j(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class br{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=ks._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function tl(){return(tl=(0,m.Z)(function*(_,f,g){const E=bn(_),x=yield mi(E,f,(0,k.m9)(g));return new br(x,R=>Sn(E,R))})).apply(this,arguments)}function ki(){return(ki=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_);yield qt(!1,E,"phone");const x=yield mi(E.auth,f,(0,k.m9)(g));return new br(x,R=>Ru(E,R))})).apply(this,arguments)}function Zo(){return(Zo=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_),x=yield mi(E.auth,f,(0,k.m9)(g));return new br(x,R=>Ou(E,R))})).apply(this,arguments)}function mi(_,f,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(_,f,g){var E;const x=yield g.verify();try{let R;if(j("string"==typeof x,_,"argument-error"),j(g.type===M_,_,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const q=R.session;if("phoneNumber"in R)return j("enroll"===q.type,_,"internal-error"),(yield Wu(_,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{j("signin"===q.type,_,"internal-error");const ce=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return j(ce,_,"missing-multi-factor-info"),(yield Wo(_,{mfaPendingCredential:q.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield sm(_,{phoneNumber:R.phoneNumber,recaptchaToken:x});return q}}finally{g._reset()}})).apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(_,f){yield oo((0,k.m9)(_),f)})).apply(this,arguments)}let nl=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=bn(g)}verifyPhoneNumber(g,E){return mi(this.auth,g,(0,k.m9)(E))}static credential(g,E){return ks._fromVerification(g,E)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:x}=g;return E&&x?ks._fromTokenResponse(E,x):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Yo(_,f){return f?ie(f):(j(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ba extends Ir{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return nr(f,this._buildIdpRequest())}_linkToIdToken(f,g){return nr(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return nr(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function $r(_){return Oi(_.auth,new Ba(_),_.bypassAuthState)}function ja(_){const{auth:f,user:g}=_;return j(g,f,"internal-error"),ao(g,new Ba(_),_.bypassAuthState)}function fs(_){return qi.apply(this,arguments)}function qi(){return(qi=(0,m.Z)(function*(_){const{auth:f,user:g}=_;return j(g,f,"internal-error"),oo(g,new Ba(_),_.bypassAuthState)})).apply(this,arguments)}class Gr{constructor(f,g,E,x,R=!1){this.auth=f,this.resolver=E,this.user=x,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(E,x){f.pendingPromise={resolve:E,reject:x};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(E,x){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:R,tenantId:q,error:ce,type:Le}=f;if(ce)return void g.reject(ce);const Qe={auth:g.auth,requestUri:E,sessionId:x,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Qe))}catch(yt){g.reject(yt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return $r;case"linkViaPopup":case"linkViaRedirect":return fs;case"reauthViaPopup":case"reauthViaRedirect":return ja;default:xe(this.auth,"internal-error")}}resolve(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yc=new un(2e3,1e4);function Ha(){return(Ha=(0,m.Z)(function*(_,f,g){const E=bn(_);Be(_,f,ss);const x=Yo(E,g);return new ri(E,"signInViaPopup",f,x).executeNotNull()})).apply(this,arguments)}function Nd(){return(Nd=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_);Be(E.auth,f,ss);const x=Yo(E.auth,g);return new ri(E.auth,"reauthViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_);Be(E.auth,f,ss);const x=Yo(E.auth,g);return new ri(E.auth,"linkViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}let ri=(()=>{class _ extends Gr{constructor(g,E,x,R,q){super(g,E,R,q),this.provider=x,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const E=yield g.execute();return j(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,m.Z)(function*(){K(1===g.filter.length,"Popup operations only handle one event");const E=ka();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(x=>{g.reject(x)}),g.resolver._isIframeWebStorageSupported(g.auth,x=>{x||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,yc.get())};g()}}return _.currentPopupAction=null,_})();const yn=new Map;class Ki extends Gr{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let E=yn.get(g.auth._key());if(!E){try{const R=(yield function sl(_,f){return js.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(R)}catch(x){E=()=>Promise.reject(x)}yn.set(g.auth._key(),E)}return g.bypassAuthState||yn.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const x=yield E.auth._redirectUserForId(f.eventId);if(x)return E.user=x,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function js(){return(js=(0,m.Z)(function*(_,f){const g=_c(f),E=ps(_);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(g));return yield E._remove(g),x})).apply(this,arguments)}function ol(_,f){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,m.Z)(function*(_,f){return ps(_)._set(_c(f),"true")})).apply(this,arguments)}function vo(_,f){yn.set(_._key(),f)}function ps(_){return ie(_._redirectPersistence)}function _c(_){return Z("pendingRedirect",_.config.apiKey,_.name)}function b(){return(b=(0,m.Z)(function*(_,f,g){const E=bn(_);Be(_,f,ss);const x=Yo(E,g);return yield ol(x,E),x._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function U(){return(U=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_);Be(E.auth,f,ss);const x=Yo(E.auth,g);yield ol(x,E.auth);const R=yield pt(E);return x._openRedirect(E.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function De(){return(De=(0,m.Z)(function*(_,f,g){const E=(0,k.m9)(_);Be(E.auth,f,ss);const x=Yo(E.auth,g);yield qt(!1,E,f.providerId),yield ol(x,E.auth);const R=yield pt(E);return x._openRedirect(E.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(_,f){return yield bn(_)._initializationPromise,vt(_,f,!1)})).apply(this,arguments)}function vt(_,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,m.Z)(function*(_,f,g=!1){const E=bn(_),x=Yo(E,f),q=yield new Ki(E,x,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,f)),q})).apply(this,arguments)}function pt(_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,m.Z)(function*(_){const f=ka(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Hs{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function wo(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $s(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!$s(f)){const x=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,x))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gs(f))}saveEventToCache(f){this.cachedEventUids.add(gs(f)),this.lastProcessedEventTime=Date.now()}}function gs(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function $s({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function ms(_){return kn.apply(this,arguments)}function kn(){return(kn=(0,m.Z)(function*(_,f={}){return ln(_,"GET","/v1/projects",f)})).apply(this,arguments)}const ii=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gs=/^https?/;function R_(){return(R_=(0,m.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield ms(_);for(const g of f)try{if(Bf(g))return}catch{}xe(_,"unauthorized-domain")})).apply(this,arguments)}function Bf(_){const f=Pe(),{protocol:g,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const q=new URL(_);return""===q.hostname&&""===E?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===E}if(!Gs.test(g))return!1;if(ii.test(_))return E===_;const x=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const pm=new un(3e4,6e4);function Pd(){const _=jn().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let vc=null;function jf(_){return vc=vc||function Ga(_){return new Promise((f,g)=>{var E,x,R;function q(){Pd(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Pd(),g(ve(_,"network-request-failed"))},timeout:pm.get()})}if(null!==(x=null===(E=jn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)f(gapi.iframes.getContext());else{if(null===(R=jn().gapi)||void 0===R||!R.load){const ce=el("iframefcb");return jn()[ce]=()=>{gapi.load?q():g(ve(_,"network-request-failed"))},qo(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Le=>g(Le))}q()}}).catch(f=>{throw vc=null,f})}(_),vc}const gm=new un(5e3,15e3),DT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OE(_){const f=_.config;j(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?wn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:se.SDK_VERSION},x=mm.get(_.config.apiHost);x&&(E.eid=x);const R=_._getFrameworks();return R.length&&(E.fw=R.join(",")),`${g}?${(0,k.xO)(E).slice(1)}`}function wc(){return wc=(0,m.Z)(function*(_){const f=yield jf(_),g=jn().gapi;return j(g,_,"internal-error"),f.open({where:document.body,url:OE(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DT,dontclear:!0},E=>new Promise(function(){var x=(0,m.Z)(function*(R,q){yield E.restyle({setHideOnLeave:!1});const ce=ve(_,"network-request-failed"),Le=jn().setTimeout(()=>{q(ce)},gm.get());function Qe(){jn().clearTimeout(Le),R(E)}E.ping(Qe).then(Qe,()=>{q(ce)})});return function(R,q){return x.apply(this,arguments)}}()))}),wc.apply(this,arguments)}const Hf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class za{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ul(_,f,g,E,x,R){j(_.config.authDomain,_,"auth-domain-config-required"),j(_.config.apiKey,_,"invalid-api-key");const q={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:E,v:se.SDK_VERSION,eventId:x};if(f instanceof ss){f.setDefaultLanguage(_.languageCode),q.providerId=f.providerId||"",(0,k.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Qe]of Object.entries(R||{}))q[Le]=Qe}if(f instanceof os){const Le=f.getScopes().filter(Qe=>""!==Qe);Le.length>0&&(q.scopes=Le.join(","))}_.tenantId&&(q.tid=_.tenantId);const ce=q;for(const Le of Object.keys(ce))void 0===ce[Le]&&delete ce[Le];return`${function ym({config:_}){return _.emulator?wn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,k.xO)(ce).slice(1)}`}const Ic="webStorageSupport";class ys extends class vm{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ys(f)}_finalizeEnroll(f,g,E){return function zu(_,f){return ln(_,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(_,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Xu(_,f){return ln(_,"POST","/v2/accounts/mfaSignIn:finalize",Rt(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ll=(()=>{class _{constructor(){}static assertion(g){return ys._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var kd="@firebase/auth",kE="0.20.10";class TT{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{var x;f((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Eo(){return window}function Za(){return(Za=(0,m.Z)(function*(_,f,g){var E;const{BuildInfo:x}=Eo();K(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Vd(f.sessionId),q={};return Ut()?q.ibi=x.packageName:zt()?q.apn=x.packageName:xe(_,"operation-not-supported-in-this-environment"),x.displayName&&(q.appDisplayName=x.displayName),q.sessionId=R,ul(_,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,q)})).apply(this,arguments)}function Ld(){return(Ld=(0,m.Z)(function*(_){const{BuildInfo:f}=Eo(),g={};Ut()?g.iosBundleId=f.packageName:zt()?g.androidPackageName=f.packageName:xe(_,"operation-not-supported-in-this-environment"),yield ms(_,g)})).apply(this,arguments)}function L_(){return(L_=(0,m.Z)(function*(_,f,g){const{cordova:E}=Eo();let x=()=>{};try{yield new Promise((R,q)=>{let ce=null;function Le(){var _t;R();const Dr=null===(_t=E.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Dr&&Dr(),"function"==typeof g?.close&&g.close()}function Qe(){ce||(ce=window.setTimeout(()=>{q(ve(_,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Qe()}f.addPassiveListener(Le),document.addEventListener("resume",Qe,!1),zt()&&document.addEventListener("visibilitychange",yt,!1),x=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",yt,!1),ce&&window.clearTimeout(ce)}})}finally{x()}})).apply(this,arguments)}function Vd(_){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,m.Z)(function*(_){const f=wm(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wm(_){if(K(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let E=0;E<_.length;E++)g[E]=_.charCodeAt(E);return g}(0,k.Pz)("authIdTokenMaxAge"),function ST(_){(0,se._registerComponent)(new le.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),x=f.getProvider("heartbeat"),{apiKey:R,authDomain:q}=E.options;return((ce,Le)=>{j(R&&!R.includes(":"),"invalid-api-key",{appName:ce.name}),j(!q?.includes(":"),"argument-error",{appName:ce.name});const Qe={apiKey:R,authDomain:q,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ms(_)},yt=new Ft(ce,Le,Qe);return function ke(_,f){const g=f?.persistence||[],E=(Array.isArray(g)?g:[g]).map(ie);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,f?.popupRedirectResolver)}(yt,g),yt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new le.wA("auth-internal",f=>{const g=bn(f.getProvider("auth").getImmediate());return new TT(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(kd,kE,function FE(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,se.registerVersion)(kd,kE,"esm2017")}("Browser");class zf extends Hs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function U_(_){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,m.Z)(function*(_){const f=yield Bd()._get(fl(_));return f&&(yield Bd()._remove(fl(_))),f})).apply(this,arguments)}function Ya(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function Bd(){return ie(Ra)}function fl(_){return Z("authEvent",_.config.apiKey,_.name)}function jd(_){if(!_?.includes("?"))return{};const[f,...g]=_.split("?");return(0,k.zd)(g.join("?"))}function j_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Dc(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function Qa(_=(0,k.z$)()){return!("file:"!==Dc()&&"ionic:"!==Dc()&&"capacitor:"!==Dc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jf(){try{const _=self.localStorage,f=ka();if(_)return _.setItem(f,"1"),_.removeItem(f),!function G_(_=(0,k.z$)()){return function Qf(){return(0,k.w1)()&&11===document?.documentMode}()||function Dm(_=(0,k.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,k.hl)()}catch{return Hd()&&(0,k.hl)()}return!1}function Hd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Tc(){return(function Zf(){return"http:"===Dc()||"https:"===Dc()}()||(0,k.ru)()||Qa())&&!function Yf(){return(0,k.b$)()||(0,k.UG)()}()&&Jf()&&!Hd()}function $d(){return Qa()&&typeof document<"u"}function Gd(){return(Gd=(0,m.Z)(function*(){return!!$d()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const si={LOCAL:"local",NONE:"none",SESSION:"session"},pl=j,Ws="persistence";function Ja(_){return gl.apply(this,arguments)}function gl(){return(gl=(0,m.Z)(function*(_){yield _._initializationPromise;const f=Sc(),g=Z(Ws,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())})).apply(this,arguments)}function Sc(){var _;try{return(null===(_=function Xf(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const Wd=j;class oi{constructor(){this.browserResolver=ie(class _m{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wi,this._completeRedirectFn=vt,this._overrideRedirectResult=vo}_openPopup(f,g,E,x){var R=this;return(0,m.Z)(function*(){var q;K(null===(q=R.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ce=ul(f,g,E,Pe(),x);return function qa(_,f,g,E=500,x=600){const R=Math.max((window.screen.availHeight-x)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let ce="";const Le=Object.assign(Object.assign({},Hf),{width:E.toString(),height:x.toString(),top:R,left:q}),Qe=(0,k.z$)().toLowerCase();g&&(ce=Qt(Qe)?"_blank":g),Ge(Qe)&&(f=f||"http://localhost",Le.scrollbars="yes");const yt=Object.entries(Le).reduce((Dr,[Yi,op])=>`${Dr}${Yi}=${op},`,"");if(function Jr(_=(0,k.z$)()){var f;return Ut(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Qe)&&"_self"!==ce)return function Ec(_,f){const g=document.createElement("a");g.href=_,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",ce),new za(null);const _t=window.open(f||"",ce,yt);j(_t,_,"popup-blocked");try{_t.focus()}catch{}return new za(_t)}(f,ce,ka())})()}_openRedirect(f,g,E,x){var R=this;return(0,m.Z)(function*(){return yield R._originValidation(f),function Pi(_){jn().location.href=_}(ul(f,g,E,Pe(),x)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:x,promise:R}=this.eventManagers[g];return x?Promise.resolve(x):(K(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const E=yield function P_(_){return wc.apply(this,arguments)}(f),x=new Hs(f);return E.register("authEvent",R=>(j(R?.authEvent,f,"invalid-auth-event"),{status:x.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:x},g.iframes[f._key()]=E,x})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ic,{type:Ic},x=>{var R;const q=null===(R=x?.[0])||void 0===R?void 0:R[Ic];void 0!==q&&g(!!q),xe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Uf(_){return R_.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return to()||ct()||Ut()}}),this.cordovaResolver=ie(class Cm{constructor(){this._redirectPersistence=Wi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vt,this._overrideRedirectResult=vo}_initialize(f){var g=this;return(0,m.Z)(function*(){const E=f._key();let x=g.eventManagers.get(E);return x||(x=new zf(f),g.eventManagers.set(E,x),g.attachCallbackListeners(f,x)),x})()}_openPopup(f){xe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,x){var R=this;return(0,m.Z)(function*(){!function UE(_){var f,g,E,x,R,q,ce,Le,Qe,yt;const _t=Eo();j("function"==typeof(null===(f=_t?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(g=_t?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(R=null===(x=null===(E=_t?.cordova)||void 0===E?void 0:E.plugins)||void 0===x?void 0:x.browsertab)||void 0===R?void 0:R.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Le=null===(ce=null===(q=_t?.cordova)||void 0===q?void 0:q.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Le?void 0:Le.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(yt=null===(Qe=_t?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===yt?void 0:yt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield R._initialize(f);yield q.initialized(),q.resetRedirect(),function Rd(){yn.clear()}(),yield R._originValidation(f);const ce=function qf(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Ya(),postBody:null,tenantId:_.tenantId,error:ve(_,"no-auth-event")}}(f,E,x);yield function V_(_,f){return Bd()._set(fl(_),f)}(f,ce);const Le=yield function Io(_,f,g){return Za.apply(this,arguments)}(f,ce,g),Qe=yield function Wf(_){const{cordova:f}=Eo();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let x=null;E?f.plugins.browsertab.openUrl(_):x=f.InAppBrowser.open(_,function hr(_=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(x)})})}(Le);return function VE(_,f,g){return L_.apply(this,arguments)}(f,q,Qe)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Gf(_){return Ld.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:x,BuildInfo:R}=Eo(),q=setTimeout((0,m.Z)(function*(){yield U_(f),g.onEvent(j_())}),500),ce=function(){var yt=(0,m.Z)(function*(_t){clearTimeout(q);const Dr=yield U_(f);let Yi=null;Dr&&_t?.url&&(Yi=function hl(_,f){var g,E;const x=function _r(_){const f=jd(_),g=f.link?decodeURIComponent(f.link):void 0,E=jd(g).link,x=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return jd(x).link||x||E||g||_}(f);if(x.includes("/__/auth/callback")){const R=jd(x),q=R.firebaseError?function Em(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ce=null===(E=null===(g=q?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Le=ce?ve(ce):null;return Le?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:x,postBody:null}}return null}(Dr,_t.url)),g.onEvent(Yi||j_())});return function(Dr){return yt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ce);const Le=x,Qe=`${R.packageName.toLowerCase()}://`;Eo().handleOpenURL=function(){var yt=(0,m.Z)(function*(_t){if(_t.toLowerCase().startsWith(Qe)&&ce({url:_t}),"function"==typeof Le)try{Le(_t)}catch(Dr){console.error(Dr)}});return function(_t){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Wi,this._completeRedirectFn=vt,this._overrideRedirectResult=vo}_initialize(f){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,x){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,E,x)})()}_openRedirect(f,g,E,x){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,E,x)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return $d()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const g=yield function W_(){return Gd.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function tp(_){return _.unwrap()}function q_(_){return rp(_)}function rp(_){const{_tokenResponse:f}=_ instanceof k.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof k.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return nl.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=Tu;break;case"facebook.com":E=Ca;break;case"github.com":E=Ql;break;case"twitter.com":E=Xr;break;default:const{oauthIdToken:x,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:ce,nonce:Le}=f;return R||q||x||ce?ce?g.startsWith("saml.")?Fo._create(g,ce):is._fromParams({providerId:g,signInMethod:g,pendingToken:ce,idToken:x,accessToken:R}):new so(g).credential({idToken:x,accessToken:R,rawNonce:Le}):null}return _ instanceof k.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function vr(_,f){return f.catch(g=>{throw g instanceof k.ZR&&function np(_,f){var g,E;const x=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new HE(_,function On(_,f){var g;const E=(0,k.m9)(_),x=f;return j(f.customData.operationType,E,"argument-error"),j(null===(g=x.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Gu._fromError(E,x)}(_,f));else if(x){const R=rp(f),q=f;R&&(q.credential=R,q.tenantId=x.tenantId||void 0,q.email=x.email||void 0,q.phoneNumber=x.phoneNumber||void 0)}}(_,g),g}).then(g=>{const x=g.user;return{operationType:g.operationType,credential:q_(g),additionalUserInfo:Hu(g),user:_s.getOrCreate(x)}})}function qd(_,f){return ip.apply(this,arguments)}function ip(){return(ip=(0,m.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>vr(_,g.confirm(E))}})).apply(this,arguments)}class HE{constructor(f,g){this.resolver=g,this.auth=function zd(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return vr(tp(this.auth),this.resolver.resolveSignIn(f))}}class _s{constructor(f){this._delegate=f,this.multiFactor=function Ho(_){const f=(0,k.m9)(_);return jo.has(f)||jo.set(f,Ff._fromUser(f)),jo.get(f)}(f)}static getOrCreate(f){return _s.USER_MAP.has(f)||_s.USER_MAP.set(f,new _s(f)),_s.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,m.Z)(function*(){return vr(g.auth,Ru(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,m.Z)(function*(){return qd(E.auth,function ni(_,f,g){return ki.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,m.Z)(function*(){return vr(g.auth,function il(_,f,g){return $a.apply(this,arguments)}(g._delegate,f,oi))})()}linkWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield Ja(bn(g.auth)),function Q(_,f,g){return function ae(_,f,g){return De.apply(this,arguments)}(_,f,g)}(g._delegate,f,oi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,m.Z)(function*(){return vr(g.auth,Ou(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return qd(this.auth,function mc(_,f,g){return Zo.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return vr(this.auth,function fm(_,f,g){return Nd.apply(this,arguments)}(this._delegate,f,oi))}reauthenticateWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield Ja(bn(g.auth)),function T(_,f,g){return function M(_,f,g){return U.apply(this,arguments)}(_,f,g)}(g._delegate,f,oi)})()}sendEmailVerification(f){return function ic(_,f){return Ma.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,m.Z)(function*(){return yield function Hr(_,f){return Au.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function wd(_,f){return co((0,k.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function lo(_,f){return co((0,k.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ir(_,f){return at.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ac(_,f){return uc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function sc(_,f,g){return Uu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_s.USER_MAP=new WeakMap;const Xa=j;let sp=(()=>{class _{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=g.options;Xa(x,"invalid-api-key",{appName:g.name}),Xa(x,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?oi:void 0;this._delegate=E.initialize({options:{persistence:eu(x,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_s.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function Cu(_,f,g){const E=bn(_);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const x=!!g?.disableWarnings,R=Hi(f),{host:q,port:ce}=function Kn(_){const f=Hi(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const R=x[1];return{host:R,port:Ns(E.substr(R.length+1))}}{const[R,q]=E.split(":");return{host:R,port:Ns(q)}}}(f);E.config.emulator={url:`${R}//${q}${null===ce?"":`:${ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:ce,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Rs(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,E)}applyActionCode(g){return function gi(_,f){return Da.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ta(this._delegate,g)}confirmPasswordReset(g,E){return function Lu(_,f,g){return Vo.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var x=this;return(0,m.Z)(function*(){return vr(x._delegate,function Sa(_,f,g){return Rn.apply(this,arguments)}(x._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Vu(_,f){return xa.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function cs(_,f){return"EMAIL_SIGNIN"===Du.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){Xa(Tc(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function je(_,f){return dt.apply(this,arguments)}(g._delegate,oi);return E?vr(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function jE(_,f){bn(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,x){const{next:R,error:q,complete:ce}=Kd(g,E,x);return this._delegate.onAuthStateChanged(R,q,ce)}onIdTokenChanged(g,E,x){const{next:R,error:q,complete:ce}=Kd(g,E,x);return this._delegate.onIdTokenChanged(R,q,ce)}sendSignInLinkToEmail(g,E){return function nc(_,f,g){return uo.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Fu(_,f,g){return Nn.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,m.Z)(function*(){let x;switch(function z_(_,f){pl(Object.values(si).includes(f),_,"invalid-persistence-type"),(0,k.b$)()?pl(f!==si.SESSION,_,"unsupported-persistence-type"):(0,k.UG)()?pl(f===si.NONE,_,"unsupported-persistence-type"):Hd()?pl(f===si.NONE||f===si.LOCAL&&(0,k.hl)(),_,"unsupported-persistence-type"):pl(f===si.NONE||Jf(),_,"unsupported-persistence-type")}(E._delegate,g),g){case si.SESSION:x=Wi;break;case si.LOCAL:x=(yield ie(Go)._isAvailable())?Go:Ra;break;case si.NONE:x=B;break;default:return xe("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return vr(this._delegate,function Rf(_){return Mn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return vr(this._delegate,Sn(this._delegate,g))}signInWithCustomToken(g){return vr(this._delegate,function Xl(_,f){return ba.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return vr(this._delegate,function Gi(_,f,g){return Sn((0,k.m9)(_),$i.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return vr(this._delegate,function lm(_,f,g){return Aa.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return qd(this._delegate,function Vf(_,f,g){return tl.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,m.Z)(function*(){return Xa(Tc(),E._delegate,"operation-not-supported-in-this-environment"),vr(E._delegate,function rl(_,f,g){return Ha.apply(this,arguments)}(E._delegate,g,oi))})()}signInWithRedirect(g){var E=this;return(0,m.Z)(function*(){return Xa(Tc(),E._delegate,"operation-not-supported-in-this-environment"),yield Ja(E._delegate),function Pn(_,f,g){return function Od(_,f,g){return b.apply(this,arguments)}(_,f,g)}(E._delegate,g,oi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function tc(_,f){return vd.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=si,_})();function Kd(_,f,g){let E=_;"function"!=typeof _&&({next:E,error:f,complete:g}=_);const x=E;return{next:q=>x(q&&_s.getOrCreate(q)),error:f,complete:g}}function eu(_,f){const g=function ep(_,f){const g=Sc();if(!g)return[];const E=Z(Ws,_,f);switch(g.getItem(E)){case si.NONE:return[B];case si.LOCAL:return[Go,Wi];case si.SESSION:return[Wi];default:return[]}}(_,f);if(typeof self<"u"&&!g.includes(Go)&&g.push(Go),typeof window<"u")for(const E of[Ra,Wi])g.includes(E)||g.push(E);return g.includes(B)||g.push(B),g}class Zd{constructor(){this.providerId="phone",this._delegate=new nl(tp(ee.Z.auth()))}static credential(f,g){return nl.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Zd.PHONE_SIGN_IN_METHOD=nl.PHONE_SIGN_IN_METHOD,Zd.PROVIDER_ID=nl.PROVIDER_ID;const K_=j;class Z_{constructor(f,g,E=ee.Z.app()){var x;K_(null===(x=E.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new mr(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y_(_){_.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new sp(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:$i,FacebookAuthProvider:Ca,GithubAuthProvider:Ql,GoogleAuthProvider:Tu,OAuthProvider:so,SAMLAuthProvider:fi,PhoneAuthProvider:Zd,PhoneMultiFactorGenerator:ll,RecaptchaVerifier:Z_,TwitterAuthProvider:Xr,Auth:sp,AuthCredential:Ir,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.23")}(ee.Z)},9751:(ut,Te,L)=>{L.d(Te,{y:()=>he});var m=L(930),ee=L(727),k=L(8822),se=L(9635),re=L(2416),de=L(576),le=L(2806);let he=(()=>{class Y{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Ie=new Y;return Ie.source=this,Ie.operator=Ne,Ie}subscribe(Ne,Ie,tt){const ye=function G(Y){return Y&&Y instanceof m.Lv||function $(Y){return Y&&(0,de.m)(Y.next)&&(0,de.m)(Y.error)&&(0,de.m)(Y.complete)}(Y)&&(0,ee.Nn)(Y)}(Ne)?Ne:new m.Hp(Ne,Ie,tt);return(0,le.x)(()=>{const{operator:pe,source:Je}=this;ye.add(pe?pe.call(ye,Je):Je?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ie){Ne.error(Ie)}}forEach(Ne,Ie){return new(Ie=fe(Ie))((tt,ye)=>{const pe=new m.Hp({next:Je=>{try{Ne(Je)}catch(st){ye(st),pe.unsubscribe()}},error:ye,complete:tt});this.subscribe(pe)})}_subscribe(Ne){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Ne)}[k.L](){return this}pipe(...Ne){return(0,se.U)(Ne)(this)}toPromise(Ne){return new(Ne=fe(Ne))((Ie,tt)=>{let ye;this.subscribe(pe=>ye=pe,pe=>tt(pe),()=>Ie(ye))})}}return Y.create=Ve=>new Y(Ve),Y})();function fe(Y){var Ve;return null!==(Ve=Y??re.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(ut,Te,L)=>{L.d(Te,{x:()=>le});var m=L(9751),ee=L(727);const se=(0,L(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=L(8737),de=L(2806);let le=(()=>{class fe extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Y=new he(this,this);return Y.operator=G,Y}_throwIfClosed(){if(this.closed)throw new se}next(G){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(G)}})}error(G){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Y}=this;for(;Y.length;)Y.shift().error(G)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Y,isStopped:Ve,observers:Ne}=this;return Y||Ve?ee.Lc:(this.currentObservers=null,Ne.push(G),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Ne,G)}))}_checkFinalizedStatuses(G){const{hasError:Y,thrownError:Ve,isStopped:Ne}=this;Y?G.error(Ve):Ne&&G.complete()}asObservable(){const G=new m.y;return G.source=this,G}}return fe.create=($,G)=>new he($,G),fe})();class he extends le{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,Y;null===(Y=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Y||Y.call(G,$)}error($){var G,Y;null===(Y=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Y||Y.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,Y;return null!==(Y=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==Y?Y:ee.Lc}}},930:(ut,Te,L)=>{L.d(Te,{Hp:()=>tt,Lv:()=>Y});var m=L(576),ee=L(727),k=L(2416),se=L(7849),re=L(5032);const de=fe("C",void 0,void 0);function fe(xe,ve,Ce){return{kind:xe,value:ve,error:Ce}}var $=L(3410),G=L(2806);class Y extends ee.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,ee.Nn)(ve)&&ve.add(this)):this.destination=st}static create(ve,Ce,Be){return new tt(ve,Ce,Be)}next(ve){this.isStopped?Je(function he(xe){return fe("N",xe,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Je(function le(xe){return fe("E",void 0,xe)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Je(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Ne(xe,ve){return Ve.call(xe,ve)}class Ie{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ve)}catch(Be){ye(Be)}}error(ve){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ve)}catch(Be){ye(Be)}else ye(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ce){ye(Ce)}}}class tt extends Y{constructor(ve,Ce,Be){let He;if(super(),(0,m.m)(ve)||!ve)He={next:ve??void 0,error:Ce??void 0,complete:Be??void 0};else{let j;this&&k.v.useDeprecatedNextContext?(j=Object.create(ve),j.unsubscribe=()=>this.unsubscribe(),He={next:ve.next&&Ne(ve.next,j),error:ve.error&&Ne(ve.error,j),complete:ve.complete&&Ne(ve.complete,j)}):He=ve}this.destination=new Ie(He)}}function ye(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(xe):(0,se.h)(xe)}function Je(xe,ve){const{onStoppedNotification:Ce}=k.v;Ce&&$.z.setTimeout(()=>Ce(xe,ve))}const st={closed:!0,next:re.Z,error:function pe(xe){throw xe},complete:re.Z}},727:(ut,Te,L)=>{L.d(Te,{Lc:()=>de,w0:()=>re,Nn:()=>le});var m=L(576);const k=(0,L(3888).d)(fe=>function(G){fe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Y,Ve)=>`${Ve+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var se=L(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ne of G)Ne.remove(this);else G.remove(this);const{initialTeardown:Y}=this;if((0,m.m)(Y))try{Y()}catch(Ne){$=Ne instanceof k?Ne.errors:[Ne]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Ne of Ve)try{he(Ne)}catch(Ie){$=$??[],Ie instanceof k?$=[...$,...Ie.errors]:$.push(Ie)}}if($)throw new k($)}}add($){var G;if($&&$!==this)if(this.closed)he($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,se.P)(G,$)}remove($){const{_finalizers:G}=this;G&&(0,se.P)(G,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const fe=new re;return fe.closed=!0,fe})();const de=re.EMPTY;function le(fe){return fe instanceof re||fe&&"closed"in fe&&(0,m.m)(fe.remove)&&(0,m.m)(fe.add)&&(0,m.m)(fe.unsubscribe)}function he(fe){(0,m.m)(fe)?fe():fe.unsubscribe()}},2416:(ut,Te,L)=>{L.d(Te,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Te,L)=>{L.d(Te,{E:()=>ee});const ee=new(L(9751).y)(re=>re.complete())},8996:(ut,Te,L)=>{L.d(Te,{D:()=>ve});var m=L(8421),ee=L(5363),k=L(9468),de=L(9751),he=L(2202),fe=L(576),$=L(9672);function Y(Ce,Be){if(!Ce)throw new Error("Iterable cannot be null");return new de.y(He=>{(0,$.f)(He,Be,()=>{const j=Ce[Symbol.asyncIterator]();(0,$.f)(He,Be,()=>{j.next().then(me=>{me.done?He.complete():He.next(me.value)})},0,!0)})})}var Ve=L(3670),Ne=L(8239),Ie=L(1144),tt=L(6495),ye=L(2206),pe=L(4532),Je=L(3260);function ve(Ce,Be){return Be?function xe(Ce,Be){if(null!=Ce){if((0,Ve.c)(Ce))return function se(Ce,Be){return(0,m.Xf)(Ce).pipe((0,k.R)(Be),(0,ee.Q)(Be))}(Ce,Be);if((0,Ie.z)(Ce))return function le(Ce,Be){return new de.y(He=>{let j=0;return Be.schedule(function(){j===Ce.length?He.complete():(He.next(Ce[j++]),He.closed||this.schedule())})})}(Ce,Be);if((0,Ne.t)(Ce))return function re(Ce,Be){return(0,m.Xf)(Ce).pipe((0,k.R)(Be),(0,ee.Q)(Be))}(Ce,Be);if((0,ye.D)(Ce))return Y(Ce,Be);if((0,tt.T)(Ce))return function G(Ce,Be){return new de.y(He=>{let j;return(0,$.f)(He,Be,()=>{j=Ce[he.h](),(0,$.f)(He,Be,()=>{let me,K;try{({value:me,done:K}=j.next())}catch(X){return void He.error(X)}K?He.complete():He.next(me)},0,!0)}),()=>(0,fe.m)(j?.return)&&j.return()})}(Ce,Be);if((0,Je.L)(Ce))return function st(Ce,Be){return Y((0,Je.Q)(Ce),Be)}(Ce,Be)}throw(0,pe.z)(Ce)}(Ce,Be):(0,m.Xf)(Ce)}},8421:(ut,Te,L)=>{L.d(Te,{Xf:()=>Ve});var m=L(655),ee=L(1144),k=L(8239),se=L(9751),re=L(3670),de=L(2206),le=L(4532),he=L(6495),fe=L(3260),$=L(576),G=L(7849),Y=L(8822);function Ve(xe){if(xe instanceof se.y)return xe;if(null!=xe){if((0,re.c)(xe))return function Ne(xe){return new se.y(ve=>{const Ce=xe[Y.L]();if((0,$.m)(Ce.subscribe))return Ce.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,ee.z)(xe))return function Ie(xe){return new se.y(ve=>{for(let Ce=0;Ce<xe.length&&!ve.closed;Ce++)ve.next(xe[Ce]);ve.complete()})}(xe);if((0,k.t)(xe))return function tt(xe){return new se.y(ve=>{xe.then(Ce=>{ve.closed||(ve.next(Ce),ve.complete())},Ce=>ve.error(Ce)).then(null,G.h)})}(xe);if((0,de.D)(xe))return pe(xe);if((0,he.T)(xe))return function ye(xe){return new se.y(ve=>{for(const Ce of xe)if(ve.next(Ce),ve.closed)return;ve.complete()})}(xe);if((0,fe.L)(xe))return function Je(xe){return pe((0,fe.Q)(xe))}(xe)}throw(0,le.z)(xe)}function pe(xe){return new se.y(ve=>{(function st(xe,ve){var Ce,Be,He,j;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,m.KL)(xe);!(Be=yield Ce.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(me){He={error:me}}finally{try{Be&&!Be.done&&(j=Ce.return)&&(yield j.call(Ce))}finally{if(He)throw He.error}}ve.complete()})})(xe,ve).catch(Ce=>ve.error(Ce))})}},6451:(ut,Te,L)=>{L.d(Te,{T:()=>de});var m=L(8189),ee=L(8421),k=L(515),se=L(7669),re=L(8996);function de(...le){const he=(0,se.yG)(le),fe=(0,se._6)(le,1/0),$=le;return $.length?1===$.length?(0,ee.Xf)($[0]):(0,m.J)(fe)((0,re.D)($,he)):k.E}},5403:(ut,Te,L)=>{L.d(Te,{x:()=>ee});var m=L(930);function ee(se,re,de,le,he){return new k(se,re,de,le,he)}class k extends m.Lv{constructor(re,de,le,he,fe,$){super(re),this.onFinalize=fe,this.shouldUnsubscribe=$,this._next=de?function(G){try{de(G)}catch(Y){re.error(Y)}}:super._next,this._error=he?function(G){try{he(G)}catch(Y){re.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(G){re.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ut,Te,L)=>{L.d(Te,{U:()=>k});var m=L(4482),ee=L(5403);function k(se,re){return(0,m.e)((de,le)=>{let he=0;de.subscribe((0,ee.x)(le,fe=>{le.next(se.call(re,fe,he++))}))})}},8189:(ut,Te,L)=>{L.d(Te,{J:()=>k});var m=L(5577),ee=L(4671);function k(se=1/0){return(0,m.z)(ee.y,se)}},5577:(ut,Te,L)=>{L.d(Te,{z:()=>he});var m=L(4004),ee=L(8421),k=L(4482),se=L(9672),re=L(5403),le=L(576);function he(fe,$,G=1/0){return(0,le.m)($)?he((Y,Ve)=>(0,m.U)((Ne,Ie)=>$(Y,Ne,Ve,Ie))((0,ee.Xf)(fe(Y,Ve))),G):("number"==typeof $&&(G=$),(0,k.e)((Y,Ve)=>function de(fe,$,G,Y,Ve,Ne,Ie,tt){const ye=[];let pe=0,Je=0,st=!1;const xe=()=>{st&&!ye.length&&!pe&&$.complete()},ve=Be=>pe<Y?Ce(Be):ye.push(Be),Ce=Be=>{Ne&&$.next(Be),pe++;let He=!1;(0,ee.Xf)(G(Be,Je++)).subscribe((0,re.x)($,j=>{Ve?.(j),Ne?ve(j):$.next(j)},()=>{He=!0},void 0,()=>{if(He)try{for(pe--;ye.length&&pe<Y;){const j=ye.shift();Ie?(0,se.f)($,Ie,()=>Ce(j)):Ce(j)}xe()}catch(j){$.error(j)}}))};return fe.subscribe((0,re.x)($,ve,()=>{st=!0,xe()})),()=>{tt?.()}}(Y,Ve,fe,G)))}},5363:(ut,Te,L)=>{L.d(Te,{Q:()=>se});var m=L(9672),ee=L(4482),k=L(5403);function se(re,de=0){return(0,ee.e)((le,he)=>{le.subscribe((0,k.x)(he,fe=>(0,m.f)(he,re,()=>he.next(fe),de),()=>(0,m.f)(he,re,()=>he.complete(),de),fe=>(0,m.f)(he,re,()=>he.error(fe),de)))})}},3099:(ut,Te,L)=>{L.d(Te,{B:()=>re});var m=L(8421),ee=L(7579),k=L(930),se=L(4482);function re(le={}){const{connector:he=(()=>new ee.x),resetOnError:fe=!0,resetOnComplete:$=!0,resetOnRefCountZero:G=!0}=le;return Y=>{let Ve,Ne,Ie,tt=0,ye=!1,pe=!1;const Je=()=>{Ne?.unsubscribe(),Ne=void 0},st=()=>{Je(),Ve=Ie=void 0,ye=pe=!1},xe=()=>{const ve=Ve;st(),ve?.unsubscribe()};return(0,se.e)((ve,Ce)=>{tt++,!pe&&!ye&&Je();const Be=Ie=Ie??he();Ce.add(()=>{tt--,0===tt&&!pe&&!ye&&(Ne=de(xe,G))}),Be.subscribe(Ce),!Ve&&tt>0&&(Ve=new k.Hp({next:He=>Be.next(He),error:He=>{pe=!0,Je(),Ne=de(st,fe,He),Be.error(He)},complete:()=>{ye=!0,Je(),Ne=de(st,$),Be.complete()}}),(0,m.Xf)(ve).subscribe(Ve))})(Y)}}function de(le,he,...fe){if(!0===he)return void le();if(!1===he)return;const $=new k.Hp({next:()=>{$.unsubscribe(),le()}});return he(...fe).subscribe($)}},9468:(ut,Te,L)=>{L.d(Te,{R:()=>ee});var m=L(4482);function ee(k,se=0){return(0,m.e)((re,de)=>{de.add(k.schedule(()=>re.subscribe(de),se))})}},8505:(ut,Te,L)=>{L.d(Te,{b:()=>re});var m=L(576),ee=L(4482),k=L(5403),se=L(4671);function re(de,le,he){const fe=(0,m.m)(de)||le||he?{next:de,error:le,complete:he}:de;return fe?(0,ee.e)(($,G)=>{var Y;null===(Y=fe.subscribe)||void 0===Y||Y.call(fe);let Ve=!0;$.subscribe((0,k.x)(G,Ne=>{var Ie;null===(Ie=fe.next)||void 0===Ie||Ie.call(fe,Ne),G.next(Ne)},()=>{var Ne;Ve=!1,null===(Ne=fe.complete)||void 0===Ne||Ne.call(fe),G.complete()},Ne=>{var Ie;Ve=!1,null===(Ie=fe.error)||void 0===Ie||Ie.call(fe,Ne),G.error(Ne)},()=>{var Ne,Ie;Ve&&(null===(Ne=fe.unsubscribe)||void 0===Ne||Ne.call(fe)),null===(Ie=fe.finalize)||void 0===Ie||Ie.call(fe)}))}):se.y}},4408:(ut,Te,L)=>{L.d(Te,{o:()=>re});var m=L(727);class ee extends m.w0{constructor(le,he){super()}schedule(le,he=0){return this}}const k={setInterval(de,le,...he){const{delegate:fe}=k;return fe?.setInterval?fe.setInterval(de,le,...he):setInterval(de,le,...he)},clearInterval(de){const{delegate:le}=k;return(le?.clearInterval||clearInterval)(de)},delegate:void 0};var se=L(8737);class re extends ee{constructor(le,he){super(le,he),this.scheduler=le,this.work=he,this.pending=!1}schedule(le,he=0){var fe;if(this.closed)return this;this.state=le;const $=this.id,G=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(G,$,he)),this.pending=!0,this.delay=he,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(G,this.id,he),this}requestAsyncId(le,he,fe=0){return k.setInterval(le.flush.bind(le,this),fe)}recycleAsyncId(le,he,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return he;null!=he&&k.clearInterval(he)}execute(le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(le,he);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,he){let $,fe=!1;try{this.work(le)}catch(G){fe=!0,$=G||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:le,scheduler:he}=this,{actions:fe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(fe,this),null!=le&&(this.id=this.recycleAsyncId(he,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Te,L)=>{L.d(Te,{v:()=>k});var m=L(6063);class ee{constructor(re,de=ee.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,le){return new this.schedulerActionCtor(this,re).schedule(le,de)}}ee.now=m.l.now;class k extends ee{constructor(re,de=ee.now){super(re,de),this.actions=[],this._active=!1}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,le){for(;re=de.shift();)re.unsubscribe();throw le}}}},4986:(ut,Te,L)=>{L.d(Te,{z:()=>k});var m=L(4408);const k=new(L(7565).v)(m.o)},6063:(ut,Te,L)=>{L.d(Te,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ut,Te,L)=>{L.d(Te,{z:()=>m});const m={setTimeout(ee,k,...se){const{delegate:re}=m;return re?.setTimeout?re.setTimeout(ee,k,...se):setTimeout(ee,k,...se)},clearTimeout(ee){const{delegate:k}=m;return(k?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(ut,Te,L)=>{L.d(Te,{h:()=>ee});const ee=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Te,L)=>{L.d(Te,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Te,L)=>{L.d(Te,{_6:()=>de,jO:()=>se,yG:()=>re});var m=L(576);function k(le){return le[le.length-1]}function se(le){return(0,m.m)(k(le))?le.pop():void 0}function re(le){return function ee(le){return le&&(0,m.m)(le.schedule)}(k(le))?le.pop():void 0}function de(le,he){return"number"==typeof k(le)?le.pop():he}},8737:(ut,Te,L)=>{function m(ee,k){if(ee){const se=ee.indexOf(k);0<=se&&ee.splice(se,1)}}L.d(Te,{P:()=>m})},3888:(ut,Te,L)=>{function m(ee){const se=ee(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}L.d(Te,{d:()=>m})},2806:(ut,Te,L)=>{L.d(Te,{O:()=>se,x:()=>k});var m=L(2416);let ee=null;function k(re){if(m.v.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),re(),de){const{errorThrown:le,error:he}=ee;if(ee=null,le)throw he}}else re()}function se(re){m.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(ut,Te,L)=>{function m(ee,k,se,re=0,de=!1){const le=k.schedule(function(){se(),de?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(le),!de)return le}L.d(Te,{f:()=>m})},4671:(ut,Te,L)=>{function m(ee){return ee}L.d(Te,{y:()=>m})},1144:(ut,Te,L)=>{L.d(Te,{z:()=>m});const m=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(ut,Te,L)=>{L.d(Te,{D:()=>ee});var m=L(576);function ee(k){return Symbol.asyncIterator&&(0,m.m)(k?.[Symbol.asyncIterator])}},576:(ut,Te,L)=>{function m(ee){return"function"==typeof ee}L.d(Te,{m:()=>m})},3670:(ut,Te,L)=>{L.d(Te,{c:()=>k});var m=L(8822),ee=L(576);function k(se){return(0,ee.m)(se[m.L])}},6495:(ut,Te,L)=>{L.d(Te,{T:()=>k});var m=L(2202),ee=L(576);function k(se){return(0,ee.m)(se?.[m.h])}},8239:(ut,Te,L)=>{L.d(Te,{t:()=>ee});var m=L(576);function ee(k){return(0,m.m)(k?.then)}},3260:(ut,Te,L)=>{L.d(Te,{L:()=>se,Q:()=>k});var m=L(655),ee=L(576);function k(re){return(0,m.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:he,done:fe}=yield(0,m.qq)(le.read());if(fe)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(he)}}finally{le.releaseLock()}})}function se(re){return(0,ee.m)(re?.getReader)}},4482:(ut,Te,L)=>{L.d(Te,{A:()=>ee,e:()=>k});var m=L(576);function ee(se){return(0,m.m)(se?.lift)}function k(se){return re=>{if(ee(re))return re.lift(function(de){try{return se(de,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Te,L)=>{function m(){}L.d(Te,{Z:()=>m})},9635:(ut,Te,L)=>{L.d(Te,{U:()=>k,z:()=>ee});var m=L(4671);function ee(...se){return k(se)}function k(se){return 0===se.length?m.y:1===se.length?se[0]:function(de){return se.reduce((le,he)=>he(le),de)}}},7849:(ut,Te,L)=>{L.d(Te,{h:()=>k});var m=L(2416),ee=L(3410);function k(se){ee.z.setTimeout(()=>{const{onUnhandledError:re}=m.v;if(!re)throw se;re(se)})}},4532:(ut,Te,L)=>{function m(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>m})},655:(ut,Te,L)=>{function se(K,X){var ie={};for(var ne in K)Object.prototype.hasOwnProperty.call(K,ne)&&X.indexOf(ne)<0&&(ie[ne]=K[ne]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(ne=Object.getOwnPropertySymbols(K);ke<ne.length;ke++)X.indexOf(ne[ke])<0&&Object.prototype.propertyIsEnumerable.call(K,ne[ke])&&(ie[ne[ke]]=K[ne[ke]])}return ie}function he(K,X,ie,ne){return new(ie||(ie=Promise))(function(Pe,ft){function Xt(un){try{Ke(ne.next(un))}catch(wn){ft(wn)}}function Bt(un){try{Ke(ne.throw(un))}catch(wn){ft(wn)}}function Ke(un){un.done?Pe(un.value):function ke(Pe){return Pe instanceof ie?Pe:new ie(function(ft){ft(Pe)})}(un.value).then(Xt,Bt)}Ke((ne=ne.apply(K,X||[])).next())})}function ye(K){return this instanceof ye?(this.v=K,this):new ye(K)}function pe(K,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ne=ie.apply(K,X||[]),Pe=[];return ke={},ft("next"),ft("throw"),ft("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ft(Yt){ne[Yt]&&(ke[Yt]=function(en){return new Promise(function(Lr,Rt){Pe.push([Yt,en,Lr,Rt])>1||Xt(Yt,en)})})}function Xt(Yt,en){try{!function Bt(Yt){Yt.value instanceof ye?Promise.resolve(Yt.value.v).then(Ke,un):wn(Pe[0][2],Yt)}(ne[Yt](en))}catch(Lr){wn(Pe[0][3],Lr)}}function Ke(Yt){Xt("next",Yt)}function un(Yt){Xt("throw",Yt)}function wn(Yt,en){Yt(en),Pe.shift(),Pe.length&&Xt(Pe[0][0],Pe[0][1])}}function st(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=K[Symbol.asyncIterator];return X?X.call(K):(K=function Y(K){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&K[X],ne=0;if(ie)return ie.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ne>=K.length&&(K=void 0),{value:K&&K[ne++],done:!K}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(Pe){ie[Pe]=K[Pe]&&function(ft){return new Promise(function(Xt,Bt){!function ke(Pe,ft,Xt,Bt){Promise.resolve(Bt).then(function(Ke){Pe({value:Ke,done:Xt})},ft)}(Xt,Bt,(ft=K[Pe](ft)).done,ft.value)})}}}L.d(Te,{FC:()=>pe,KL:()=>st,_T:()=>se,mG:()=>he,qq:()=>ye})},4650:(ut,Te,L)=>{L.d(Te,{$8M:()=>Xu,$Z:()=>Ev,AFp:()=>Vb,AaK:()=>he,CHM:()=>ku,CRH:()=>Mb,CZH:()=>vn,CqO:()=>nw,D6c:()=>GA,EJc:()=>SA,EpF:()=>ew,F4k:()=>cC,FYo:()=>x,FiY:()=>je,G48:()=>N0,GfV:()=>Le,Gpc:()=>G,Gre:()=>DC,JOm:()=>Co,KtG:()=>Fu,LFG:()=>Pn,LSH:()=>Cm,Lbi:()=>jy,Lck:()=>Ay,MMx:()=>Jp,NdJ:()=>rw,OlP:()=>mn,Oqu:()=>Vp,PXZ:()=>rd,Q6J:()=>ry,QGY:()=>tw,QP$:()=>Qt,Qsj:()=>R,R0b:()=>Xi,RDi:()=>OE,Rgc:()=>ue,SBq:()=>f,Sil:()=>MA,Suo:()=>lg,TTD:()=>os,TgZ:()=>iy,X6Q:()=>rf,XFs:()=>Ze,Xpm:()=>Se,Xts:()=>Yf,Y36:()=>Oc,YKP:()=>zw,YNc:()=>ny,Yjl:()=>Ee,Yz7:()=>en,Z0I:()=>ns,ZZ4:()=>bg,_Bn:()=>Ww,_UZ:()=>oy,_Vd:()=>ml,_c5:()=>Dg,_uU:()=>fy,aQg:()=>Yy,c2e:()=>li,cJS:()=>Rt,cg1:()=>Bp,dDg:()=>RA,dqk:()=>an,eFA:()=>ef,ekj:()=>uw,eoX:()=>D0,f3M:()=>b,g9A:()=>Zh,h0i:()=>Yc,hGG:()=>R0,iGM:()=>xl,ifc:()=>ot,ip1:()=>p0,jDz:()=>qw,kL8:()=>VC,lG2:()=>Z,lqb:()=>oi,lri:()=>C0,n5z:()=>hs,oAB:()=>kt,oxw:()=>pC,q4F:()=>Qe,qLn:()=>Qd,qOj:()=>zv,qZA:()=>sy,rWj:()=>b0,sBO:()=>qb,sIi:()=>xp,s_b:()=>Py,soG:()=>Hy,tb:()=>pg,tp0:()=>vt,uIk:()=>Qv,vHH:()=>Ie,vpe:()=>ht,wAp:()=>wt,xp6:()=>Om,z2F:()=>yg,zSh:()=>Ja,zs3:()=>Rc});var m=L(7579),ee=L(727),k=L(9751),se=L(6451),re=L(3099);function de(s){for(let o in s)if(s[o]===de)return o;throw Error("Could not find renamed property on target object.")}function le(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=de({__forward_ref__:de});function G(s){return s.__forward_ref__=G,s.toString=function(){return he(this())},s}function Y(s){return Ve(s)?s():s}function Ve(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===G}class Ie extends Error{constructor(o,u){super(function tt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s,o){throw new Ie(-201,!1)}function Bt(s,o){null==s&&function Ke(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function en(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Rt(s){return{providers:s.providers||[],imports:s.imports||[]}}function ln(s){return xi(s,Mi)||xi(s,di)}function ns(s){return null!==ln(s)}function xi(s,o){return s.hasOwnProperty(o)?s[o]:null}function As(s){return s&&(s.hasOwnProperty(Yr)||s.hasOwnProperty(Po))?s[Yr]:null}const Mi=de({\u0275prov:de}),Yr=de({\u0275inj:de}),di=de({ngInjectableDef:de}),Po=de({ngInjectorDef:de});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let Ar;function Xn(s){const o=Ar;return Ar=s,o}function hi(s,o,u){const c=ln(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ze.Optional?null:void 0!==o?o:void ve(he(s))}function xn(s){return{toString:s}.toString()}var qn=(()=>((qn=qn||{})[qn.OnPush=0]="OnPush",qn[qn.Default=1]="Default",qn))(),ot=(()=>{return(s=ot||(ot={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ot;var s})();const an=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qr={},Tt=[],rs=de({\u0275cmp:de}),tn=de({\u0275dir:de}),Ni=de({\u0275pipe:de}),rn=de({\u0275mod:de}),er=de({\u0275fac:de}),Br=de({__NG_ELEMENT_ID__:de});let et=0;function Se(s){return xn(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===qn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Tt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ot.Emulated,id:"c"+et++,styles:s.styles||Tt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,v=s.features;return d.inputs=B(s.inputs,c),d.outputs=B(s.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ct).filter(It):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(ct).filter(It):null,d})}function Ct(s){return J(s)||Ge(s)}function It(s){return null!==s}function kt(s){return xn(()=>({type:s.type,bootstrap:s.bootstrap||Tt,declarations:s.declarations||Tt,imports:s.imports||Tt,exports:s.exports||Tt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function B(s,o){if(null==s)return Qr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const Z=Se;function Ee(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function J(s){return s[rs]||null}function Ge(s){return s[tn]||null}function ct(s){return s[Ni]||null}function Qt(s){const o=J(s)||Ge(s)||ct(s);return null!==o&&o.standalone}function fn(s,o){const u=s[rn]||null;if(!u&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return u}function pr(s){return Array.isArray(s)&&"object"==typeof s[1]}function jr(s){return Array.isArray(s)&&!0===s[1]}function bu(s){return 0!=(8&s.flags)}function Ia(s){return 2==(2&s.flags)}function ql(s){return 1==(1&s.flags)}function xr(s){return null!==s.template}function Sf(s){return 0!=(256&s[2])}function $i(s,o){return s.hasOwnProperty(er)?s[er]:null}class ss{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function os(){return so}function so(s){return s.type.prototype.ngOnChanges&&(s.setInput=Tu),Ca}function Ca(){const s=Mf(this),o=s?.current;if(o){const u=s.previous;if(u===Qr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Tu(s,o,u,c){const d=Mf(s)||function Fo(s,o){return s[Ql]=o}(s,{previous:Qr,current:null}),p=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[u],C=v[I];p[I]=new ss(C&&C.currentValue,o,v===Qr),s[c]=o}os.ngInherit=!0;const Ql="__ngSimpleChanges__";function Mf(s){return s[Ql]||null}function Mn(s){for(;Array.isArray(s);)s=s[0];return s}function pi(s,o){return Mn(o[s])}function Hr(s,o){return Mn(o[s.index])}function oo(s,o){return s.data[o]}function qt(s,o){const u=o[s];return pr(u)?u:u[0]}function ao(s){return 64==(64&s[2])}function Oi(s,o){return null==o?null:s[o]}function Nu(s){s[18]=0}function Sn(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const St={lFrame:ac(null),bindingsEnabled:!0};function ls(){return St.bindingsEnabled}function Ae(){return St.lFrame.lView}function $t(){return St.lFrame.tView}function ku(s){return St.lFrame.contextLView=s,s[8]}function Fu(s){return St.lFrame.contextLView=null,s}function Nn(){let s=Lu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Lu(){return St.lFrame.currentTNode}function gi(s,o){const u=St.lFrame;u.currentTNode=s,u.isParent=o}function Da(){return St.lFrame.isParent}function uo(){return St.lFrame.bindingIndex++}function cs(s){const o=St.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function cm(s,o){const u=St.lFrame;u.bindingIndex=u.bindingRootIndex=s,Vu(o)}function Vu(s){St.lFrame.currentDirectiveIndex=s}function ic(){return St.lFrame.currentQueryIndex}function Ma(s){St.lFrame.currentQueryIndex=s}function sc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Uu(s,o,u){if(u&Ze.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&Ze.Host||(d=sc(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=St.lFrame=oc();return c.currentTNode=o,c.lView=s,!0}function Bu(s){const o=oc(),u=s[1];St.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function oc(){const s=St.lFrame,o=null===s?null:s.child;return null===o?ac(s):o}function ac(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function uc(){const s=St.lFrame;return St.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const wd=uc;function lo(){const s=uc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function rr(){return St.lFrame.selectedIndex}function ei(s){St.lFrame.selectedIndex=s}function In(){const s=St.lFrame;return oo(s.tView,s.selectedIndex)}function $u(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:N}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function ho(s,o,u){Bo(s,o,3,u)}function Uo(s,o,u,c){(3&s[2])===u&&Bo(s,o,u,c)}function Cd(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Bo(s,o,u,c){const p=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<p||-1==p)&&(bd(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function bd(s,o,u,c){const d=u[c]<0,p=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class Ls{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Ho(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const p=u[c++],v=u[c++],I=u[c++];s.setAttribute(o,v,I,p)}else{const p=d,v=u[++c];qu(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),c++}}return c}function po(s){return 3===s||4===s||6===s}function qu(s){return 64===s.charCodeAt(0)}function Na(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Td(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Td(s,o,u,c,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function Sd(s){return-1!==s}function gr(s){return 32767&s}function Oa(s,o){let u=function Ra(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Wi=!0;function Pa(s){const o=Wi;return Wi=s,o}let jn=0;const Pi={};function go(s,o){const u=Zu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Fa(c.data,s),Fa(o,null),Fa(c.blueprint,null));const d=Yu(s,o),p=s.injectorIndex;if(Sd(d)){const v=gr(d),I=Oa(d,o),C=I[1].data;for(let A=0;A<8;A++)o[p+A]=I[v+A]|C[v+A]}return o[p+8]=d,p}function Fa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Zu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Yu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=Wo(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Vs(s,o,u){!function Ku(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Br)&&(c=u[Br]),null==c&&(c=u[Br]=jn++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Us(s,o,u){if(u&Ze.Optional||void 0!==s)return s;ve()}function hc(s,o,u,c){if(u&Ze.Optional&&void 0===c&&(c=null),0==(u&(Ze.Self|Ze.Host))){const d=s[9],p=Xn(void 0);try{return d?d.get(o,c,u&Ze.Optional):hi(o,c,u&Ze.Optional)}finally{Xn(p)}}return Us(c,0,u)}function mo(s,o,u,c=Ze.Default,d){if(null!==s){if(1024&o[2]){const v=function Go(s,o,u,c,d){let p=s,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=La(p,v,u,c|Ze.Self,Pi);if(I!==Pi)return I;let C=p.parent;if(!C){const A=v[21];if(A){const N=A.get(u,Pi,c);if(N!==Pi)return N}C=Wo(v),v=v[15]}p=C}return d}(s,o,u,c,Pi);if(v!==Pi)return v}const p=La(s,o,u,c,Pi);if(p!==Pi)return p}return hc(o,u,c,d)}function La(s,o,u,c,d){const p=function fc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Br)?s[Br]:void 0;return"number"==typeof o?o>=0?255&o:pc:o}(u);if("function"==typeof p){if(!Uu(o,s,c))return c&Ze.Host?Us(d,0,c):hc(o,u,c,d);try{const v=p(c);if(null!=v||c&Ze.Optional)return v;ve()}finally{wd()}}else if("number"==typeof p){let v=null,I=Zu(s,o),C=-1,A=c&Ze.Host?o[16][6]:null;for((-1===I||c&Ze.SkipSelf)&&(C=-1===I?Yu(s,o):o[I+8],-1!==C&&Va(c,!1)?(v=o[1],I=gr(C),o=Oa(C,o)):I=-1);-1!==I;){const N=o[1];if(Qu(p,I,N.data)){const F=Md(I,o,u,v,c,A);if(F!==Pi)return F}C=o[I+8],-1!==C&&Va(c,o[1].data[I+8]===A)&&Qu(p,I,o)?(v=N,I=gr(C),o=Oa(C,o)):I=-1}}return d}function Md(s,o,u,c,d,p){const v=o[1],I=v.data[s+8],N=$o(I,v,u,null==c?Ia(I)&&Wi:c!=v&&0!=(3&I.type),d&Ze.Host&&p===I);return null!==N?ds(o,v,N,I):Pi}function $o(s,o,u,c,d){const p=s.providerIndexes,v=o.data,I=1048575&p,C=s.directiveStart,N=p>>20,z=d?I+N:s.directiveEnd;for(let te=c?I:I+N;te<z;te++){const we=v[te];if(te<C&&u===we||te>=C&&we.type===u)return te}if(d){const te=v[C];if(te&&xr(te)&&te.type===u)return C}return null}function ds(s,o,u,c){let d=s[u];const p=o.data;if(function fo(s){return s instanceof Ls}(d)){const v=d;v.resolving&&function Je(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${u}`)}(function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(p[u]));const I=Pa(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Xn(v.injectImpl):null;Uu(s,c,Ze.Default);try{d=s[u]=v.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Id(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=so(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&Xn(C),Pa(I),v.resolving=!1,wd()}}return d}function Qu(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Va(s,o){return!(s&Ze.Self||s&Ze.Host&&o)}class yo{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return mo(this._tNode,this._lView,o,c,u)}}function pc(){return new yo(Nn(),Ae())}function hs(s){return xn(()=>{const o=s.prototype.constructor,u=o[er]||Ju(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[er]||Ju(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Ju(s){return Ve(s)?()=>{const o=Ju(Y(s));return o&&o()}:$i(s)}function Wo(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Xu(s){return function xd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(po(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(Nn(),s)}const Bs="__parameters__";function Ko(s,o,u){return xn(()=>{const c=function el(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(C,A,N){const F=C.hasOwnProperty(Bs)?C[Bs]:Object.defineProperty(C,Bs,{value:[]})[Bs];for(;F.length<=N;)F.push(null);return(F[N]=F[N]||[]).push(v),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class mn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=en({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ni(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),ni(c,o)):o!==s&&o.push(c)}return o}function ki(s,o){s.forEach(u=>Array.isArray(u)?ki(u,o):o(u))}function mc(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Zo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function $r(s,o,u){let c=fs(s,o);return c>=0?s[1|c]=u:(c=~c,function at(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function ja(s,o){const u=fs(s,o);if(u>=0)return s[1|u]}function fs(s,o){return function Gr(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),v=s[p<<u];if(o===v)return p<<u;v>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const yn={},Ki="__NG_DI_FLAG__",sl="ngTempTokenPath",ol=/\n/gm,Rd="__source";let vo;function ps(s){const o=vo;return vo=s,o}function _c(s,o=Ze.Default){if(void 0===vo)throw new Ie(-203,!1);return null===vo?hi(s,void 0,o):vo.get(s,o&Ze.Optional?null:void 0,o)}function Pn(s,o=Ze.Default){return(function xs(){return Ar}()||_c)(Y(s),o)}function b(s,o=Ze.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Pn(s,o)}function T(s){const o=[];for(let u=0;u<s.length;u++){const c=Y(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Ie(900,!1);let d,p=Ze.Default;for(let v=0;v<c.length;v++){const I=c[v],C=U(I);"number"==typeof C?-1===C?d=I.token:p|=C:d=I}o.push(Pn(d,p))}else o.push(Pn(c))}return o}function M(s,o){return s[Ki]=o,s.prototype[Ki]=o,s}function U(s){return s[Ki]}const je=M(Ko("Optional"),8),vt=M(Ko("SkipSelf"),4);let mm;function OE(s){mm=s}class ul{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ys(s){return s instanceof ul?s.changingThisBreaksApplicationSecurity:s}const Eo=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var _r=(()=>((_r=_r||{})[_r.NONE=0]="NONE",_r[_r.HTML=1]="HTML",_r[_r.STYLE=2]="STYLE",_r[_r.SCRIPT=3]="SCRIPT",_r[_r.URL=4]="URL",_r[_r.RESOURCE_URL=5]="RESOURCE_URL",_r))();function Cm(s){const o=function Qa(){const s=Ae();return s&&s[12]}();return o?o.sanitize(_r.URL,s)||"":function ll(s,o){const u=function kd(s){return s instanceof ul&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?ys(s):function dl(s){return(s=String(s)).match(Eo)?s:"unsafe:"+s}(ye(s))}const Yf=new mn("ENVIRONMENT_INITIALIZER"),Qf=new mn("INJECTOR",-1),Dm=new mn("INJECTOR_DEF_TYPES");class G_{get(o,u=yn){if(u===yn){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return u}}function Jf(...s){return{\u0275providers:Hd(0,s)}}function Hd(s,...o){const u=[],c=new Set;let d;return ki(o,p=>{const v=p;$d(v,u,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&Tc(d,u),u}function Tc(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];ki(d,p=>{o.push(p)})}}function $d(s,o,u,c){if(!(s=Y(s)))return!1;let d=null,p=As(s);const v=!p&&J(s);if(p||v){if(v&&!v.standalone)return!1;d=s}else{const C=s.ngModule;if(p=As(C),!p)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of C)$d(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let A;c.add(d);try{ki(p.imports,N=>{$d(N,o,u,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&Tc(A,o)}if(!I){const A=$i(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Tt},{provide:Dm,useValue:d,multi:!0},{provide:Yf,useValue:()=>Pn(d),multi:!0})}const C=p.providers;null==C||I||ki(C,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}const Gd=de({provide:String,useValue:de});function Xf(s){return null!==s&&"object"==typeof s&&Gd in s}function Ws(s){return"function"==typeof s}const Ja=new mn("Set Injector scope."),gl={},ep={};let Sc;function Wd(){return void 0===Sc&&(Sc=new G_),Sc}class oi{}class tp extends oi{constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xa(o,v=>this.processProvider(v)),this.records.set(Qf,vr(void 0,this)),d.has("environment")&&this.records.set(oi,vr(void 0,this));const p=this.records.get(Ja);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Dm.multi,Tt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=ps(this),c=Xn(void 0);try{return o()}finally{ps(u),Xn(c)}}get(o,u=yn,c=Ze.Default){this.assertNotDestroyed();const d=ps(this),p=Xn(void 0);try{if(!(c&Ze.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function HE(s){return"function"==typeof s||"object"==typeof s&&s instanceof mn}(o)&&ln(o);I=C&&this.injectableDefInScope(C)?vr(zd(o),gl):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Ze.Self?Wd():this.parent).get(o,u=c&Ze.Optional&&u===yn?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[sl]=v[sl]||[]).unshift(he(o)),d)throw v;return function Q(s,o,u,c){const d=s[sl];throw o[Rd]&&d.unshift(o[Rd]),s.message=function ae(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):he(I)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(ol,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[sl]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Xn(p),ps(d)}}resolveInjectorInitializers(){const o=ps(this),u=Xn(void 0);try{const c=this.get(Yf.multi,Tt,Ze.Self);for(const d of c)d()}finally{ps(o),Xn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let u=Ws(o=Y(o))?o:Y(o&&o.provide);const c=function np(s){return Xf(s)?vr(void 0,s.useValue):vr(rp(s),gl)}(o);if(Ws(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=vr(void 0,gl,!0),d.factory=()=>T(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===gl&&(u.value=ep,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ip(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Y(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function zd(s){const o=ln(s),u=null!==o?o.factory:$i(s);if(null!==u)return u;if(s instanceof mn)throw new Ie(204,!1);if(s instanceof Function)return function q_(s){const o=s.length;if(o>0)throw function mi(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Ie(204,!1);const u=function Vr(s){const o=s&&(s[Mi]||s[di]);if(o){const u=function Ur(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ie(204,!1)}function rp(s,o,u){let c;if(Ws(s)){const d=Y(s);return $i(d)||zd(d)}if(Xf(s))c=()=>Y(s.useValue);else if(function pl(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...T(s.deps||[]));else if(function si(s){return!(!s||!s.useExisting)}(s))c=()=>Pn(Y(s.useExisting));else{const d=Y(s&&(s.useClass||s.provide));if(!function qd(s){return!!s.deps}(s))return $i(d)||zd(d);c=()=>new d(...T(s.deps))}return c}function vr(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function _s(s){return!!s.\u0275providers}function Xa(s,o){for(const u of s)Array.isArray(u)?Xa(u,o):_s(u)?Xa(u.\u0275providers,o):o(u)}class Kd{}class Z_{resolveComponentFactory(o){throw function eu(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ml=(()=>{class s{}return s.NULL=new Z_,s})();function Y_(){return _(Nn(),Ae())}function _(s,o){return new f(Hr(s,o))}let f=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Y_,s})();function g(s){return s instanceof f?s.nativeElement:s}class x{}let R=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function q(){const s=Ae(),u=qt(Nn().index,s);return(pr(u)?u:s)[11]}(),s})(),ce=(()=>{class s{}return s.\u0275prov=en({token:s,providedIn:"root",factory:()=>null}),s})();class Le{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Qe=new Le("14.2.6"),yt={};function Qi(s){return s.ngOriginalError}class Qd{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Qi(o);for(;u&&Qi(u);)u=Qi(u);return u||null}}const Jd=new Map;let yl=0;const sr="__ngContext__";function zr(s,o){pr(o)?(s[sr]=o[20],function NT(s){Jd.set(s[20],s)}(o)):s[sr]=o}function _l(s){return s instanceof Function?s():s}var Co=(()=>((Co=Co||{})[Co.Important=1]="Important",Co[Co.DashCase=2]="DashCase",Co))();function lp(s,o){return undefined(s,o)}function cp(s){const o=s[3];return jr(o)?o[3]:o}function nI(s){return zs(s[13])}function bo(s){return zs(s[4])}function zs(s){for(;null!==s&&!jr(s);)s=s[4];return s}function nu(s,o,u,c,d){if(null!=c){let p,v=!1;jr(c)?p=c:pr(c)&&(v=!0,c=c[0]);const I=Mn(c);0===s&&null!==u?null==d?av(o,u,I):Xo(o,u,I,d||null,!0):1===s&&null!==u?Xo(o,u,I,d||null,!0):2===s?function xc(s,o,u){const c=Do(s,o);c&&function iu(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=p&&function cI(s,o,u,c,d){const p=u[7];p!==Mn(u)&&nu(o,s,c,p,d);for(let I=10;I<u.length;I++){const C=u[I];pp(C[1],C,s,o,c,p)}}(o,s,p,u,d)}}function iv(s,o,u){return s.createElement(o,u)}function eh(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Sn(d,-1)),u.splice(c,1)}function ru(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&eh(d,c),o>0&&(s[u-1][4]=c[4]);const p=Zo(s,10+o);!function sI(s,o){pp(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function ov(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&pp(s,o,u,3,null,null),function sv(s){let o=s[13];if(!o)return hp(s[1],s);for(;o;){let u=null;if(pr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)pr(o)&&hp(o[1],o),o=o[3];null===o&&(o=s),pr(o)&&hp(o[1],o),u=o&&o[4]}o=u}}(o)}}function hp(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Mr(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Ls)){const p=u[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],C=p[v+1];try{C.call(I)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function aI(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],I="function"==typeof v?v(o):Mn(o[v]),C=c[d=u[p+2]],A=u[p+3];"boolean"==typeof A?I.removeEventListener(u[p],C,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),p+=2}else{const v=c[d=u[p+1]];u[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&jr(o[3])){u!==o[3]&&eh(u,o);const c=o[19];null!==c&&c.detachView(s)}!function YE(s){Jd.delete(s[20])}(o)}}function th(s,o,u){return function fp(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===ot.None||d===ot.Emulated)return null}return Hr(c,u)}(s,o.parent,u)}function Xo(s,o,u,c,d){s.insertBefore(o,u,c,d)}function av(s,o,u){s.appendChild(o,u)}function uI(s,o,u,c,d){null!==c?Xo(s,o,u,c,d):av(s,o,u)}function Do(s,o){return s.parentNode(o)}let uv=function Nm(s,o,u){return 40&s.type?Hr(s,u):null};function nh(s,o,u,c){const d=th(s,c,o),p=o[11],I=function wl(s,o,u){return uv(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)uI(p,d,u[C],I,!1);else uI(p,d,u,I,!1)}function jt(s,o){if(null!==o){const u=o.type;if(3&u)return Hr(o,s);if(4&u)return cv(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return jt(s,c);{const d=s[o.index];return jr(d)?cv(-1,d):Mn(d)}}if(32&u)return lp(o,s)()||Mn(s[o.index]);{const c=rh(s,o);return null!==c?Array.isArray(c)?c[0]:jt(cp(s[16]),c):jt(s,o.next)}}return null}function rh(s,o){return null!==o?s[16][6].projection[o.projection]:null}function cv(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return jt(c,d)}return o[7]}function dv(s,o,u,c,d,p,v){for(;null!=u;){const I=c[u.index],C=u.type;if(v&&0===o&&(I&&zr(Mn(I),c),u.flags|=4),64!=(64&u.flags))if(8&C)dv(s,o,u.child,c,d,p,!1),nu(o,s,d,I,p);else if(32&C){const A=lp(u,c);let N;for(;N=A();)nu(o,s,d,N,p);nu(o,s,d,I,p)}else 16&C?hv(s,o,c,u,d,p):nu(o,s,d,I,p);u=v?u.projectionNext:u.next}}function pp(s,o,u,c,d,p){dv(u,c,s.firstChild,o,d,p,!1)}function hv(s,o,u,c,d,p){const v=u[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)nu(o,s,d,C[A],p);else dv(s,o,C,v[3],d,p,!0)}function HT(s,o,u){s.setAttribute(o,"style",u)}function Nr(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function su(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const fI="ng-template";function $T(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==su(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function fv(s){return 4===s.type&&s.value!==fI}function pI(s,o,u){return o===(4!==s.type||u?s.value:fI)}function GT(s,o,u){let c=4;const d=s.attrs||[],p=function Rm(s){for(let o=0;o<s.length;o++)if(po(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!pI(s,C,u)||""===C&&1===o.length){if(qs(c))return!1;v=!0}}else{const A=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!$T(s.attrs,A,u)){if(qs(c))return!1;v=!0}continue}const F=WT(8&c?"class":C,d,fv(s),u);if(-1===F){if(qs(c))return!1;v=!0;continue}if(""!==A){let z;z=F>p?"":d[F+1].toLowerCase();const te=8&c?z:null;if(te&&-1!==su(te,A,0)||2&c&&A!==z){if(qs(c))return!1;v=!0}}}}else{if(!v&&!qs(c)&&!qs(C))return!1;if(v&&qs(C))continue;v=!1,c=C|1&c}}return qs(c)||v}function qs(s){return 0==(1&s)}function WT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function Mc(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function pv(s,o,u=!1){for(let c=0;c<o.length;c++)if(GT(s,o[c],u))return!0;return!1}function ih(s,o){return s?":not("+o.trim()+")":o}function zT(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!qs(v)&&(o+=ih(p,d),d=""),c=v,p=p||!qs(c);u++}return""!==d&&(o+=ih(p,d)),o}const Ot={};function Om(s){mI($t(),Ae(),rr()+s,!1)}function mI(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ho(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Uo(o,p,0,u)}ei(u)}function vI(s,o=null,u=null,c){const d=wI(s,o,u,c);return d.resolveInjectorInitializers(),d}function wI(s,o=null,u=null,c,d=new Set){const p=[u||Tt,Jf(s)];return c=c||("object"==typeof s?void 0:he(s)),new tp(p,o||Wd(),c||null,d)}let Rc=(()=>{class s{static create(u,c){if(Array.isArray(u))return vI({name:""},c,u,"");{const d=u.name??"";return vI({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=yn,s.NULL=new G_,s.\u0275prov=en({token:s,providedIn:"any",factory:()=>Pn(Qf)}),s.__NG_ELEMENT_ID__=-1,s})();function Oc(s,o=Ze.Default){const u=Ae();return null===u?Pn(s,o):mo(Nn(),u,Y(s),o)}function Ev(){throw new Error("invalid")}function lh(s,o){return s<<17|o<<2}function ui(s){return s>>17&32767}function Iv(s){return 2|s}function ou(s){return(131068&s)>>2}function Cv(s,o){return-131069&s|o<<2}function bv(s){return 1|s}function sS(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const v=s.data[p];Ma(d),v.contentQueries(2,o[p],p)}}}function hh(s,o,u,c,d,p,v,I,C,A,N){const F=o.blueprint.slice();return F[0]=d,F[2]=76|c,(null!==N||s&&1024&s[2])&&(F[2]|=1024),Nu(F),F[3]=F[15]=s,F[8]=u,F[10]=v||s&&s[10],F[11]=I||s&&s[11],F[12]=C||s&&s[12]||null,F[9]=A||s&&s[9]||null,F[6]=p,F[20]=function _R(){return yl++}(),F[21]=N,F[16]=2==o.type?s[16]:F,F}function fh(s,o,u,c,d){let p=s.data[o];if(null===p)p=function Nv(s,o,u,c,d){const p=Lu(),v=Da(),C=s.data[o]=function aS(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==p&&(v?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(s,o,u,c,d),function lm(){return St.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const v=function Vo(){const s=St.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return gi(p,!0),p}function ph(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function bp(s,o,u){Bu(o);try{const c=s.viewQuery;null!==c&&wh(1,c,u);const d=s.template;null!==d&&Rv(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&sS(s,o),s.staticViewQueries&&wh(2,s.viewQuery,u);const p=s.components;null!==p&&function UR(s,o){for(let u=0;u<o.length;u++)_S(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,lo()}}function Li(s,o,u,c){const d=o[2];if(128!=(128&d)){Bu(o);try{Nu(o),function nc(s){return St.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Rv(s,o,u,2,c);const v=3==(3&d);if(v){const A=s.preOrderCheckHooks;null!==A&&ho(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Uo(o,A,0,null),Cd(o,0)}if(function Zm(s){for(let o=nI(s);null!==o;o=bo(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(512&d[2])&&Sn(p,1),d[2]|=512}}}(o),function Bv(s){for(let o=nI(s);null!==o;o=bo(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];ao(c)&&Li(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&sS(s,o),v){const A=s.contentCheckHooks;null!==A&&ho(o,A)}else{const A=s.contentHooks;null!==A&&Uo(o,A,1),Cd(o,1)}!function LR(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)ei(~d);else{const p=d,v=u[++c],I=u[++c];cm(v,p),I(2,o[p])}}}finally{ei(-1)}}(s,o);const I=s.components;null!==I&&function VR(s,o){for(let u=0;u<o.length;u++)yS(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&wh(2,C,c),v){const A=s.viewCheckHooks;null!==A&&ho(o,A)}else{const A=s.viewHooks;null!==A&&Uo(o,A,2),Cd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Sn(o[3],-1))}finally{lo()}}}function Rv(s,o,u,c,d){const p=rr(),v=2&c;try{ei(-1),v&&o.length>22&&mI(s,o,22,!1),u(c,d)}finally{ei(p)}}function Ov(s,o,u){!ls()||(function Lv(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||go(u,o),zr(c,o);const v=u.initialInputs;for(let I=d;I<p;I++){const C=s.data[I],A=xr(C);A&&gS(o,u,C);const N=ds(o,s,I,u);zr(N,o),null!==v&&WI(0,I-d,N,C,0,v),A&&(qt(u.index,o)[8]=N)}}(s,o,u,Hr(u,o)),128==(128&u.flags)&&function Km(s,o,u){const c=u.directiveStart,d=u.directiveEnd,p=u.index,v=function rc(){return St.lFrame.currentDirectiveIndex}();try{ei(p);for(let I=c;I<d;I++){const C=s.data[I],A=o[I];Vu(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&kc(C,A)}}finally{ei(-1),Vu(v)}}(s,o,u))}function Pv(s,o,u=Hr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function kv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=mh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function mh(s,o,u,c,d,p,v,I,C,A){const N=22+c,F=N+d,z=function oS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ot);return u}(N,F),te="function"==typeof A?A():A;return z[1]={type:s,blueprint:z,template:u,queries:null,viewQuery:I,declTNode:o,data:z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:te,incompleteFirstPass:!1}}function _h(s,o,u,c){const d=Eh(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&$v(s).push(c,d.length-1))}function BI(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function vh(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,v=[];let I=null,C=null;for(let A=o.directiveStart;A<c;A++){const N=d[A],F=N.inputs,z=null===p||fv(o)?null:mS(F,p);v.push(z),I=BI(F,A,I),C=BI(N.outputs,A,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=C}function jI(s,o){const u=qt(o,s);16&u[2]||(u[2]|=32)}function Fv(s,o,u,c){let d=!1;if(ls()){const p=function hS(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];pv(u,v.selectors,!1)&&(d||(d=[]),Vs(go(u,o),s,v.type),xr(v)?(HI(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==p){d=!0,$I(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const F=p[N];F.providersResolver&&F.providersResolver(F)}let I=!1,C=!1,A=ph(s,o,p.length,null);for(let N=0;N<p.length;N++){const F=p[N];u.mergedAttrs=Na(u.mergedAttrs,F.hostAttrs),GI(s,u,o,A,F),pS(A,F,v),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const z=F.type.prototype;!I&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!C&&(z.ngOnChanges||z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}vh(s,u)}v&&function fS(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Ie(-301,!1);c.push(o[d],p)}}}(u,c,v)}return u.mergedAttrs=Na(u.mergedAttrs,u.attrs),d}function cS(s,o,u,c,d,p){const v=p.hostBindings;if(v){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const C=~o.index;(function dS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=C&&I.push(C),I.push(c,d,v)}}function kc(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function HI(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function pS(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;xr(o)&&(u[""]=s)}}function $I(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function GI(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=$i(d.type)),v=new Ls(p,xr(d),Oc);s.blueprint[c]=v,u[c]=v,cS(s,o,0,c,ph(s,u,d.hostVars,Ot),d)}function gS(s,o,u){const c=Hr(o,s),d=kv(u),p=s[10],v=Fc(s,hh(s,d,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=v}function na(s,o,u,c,d,p){const v=Hr(s,o);!function Vv(s,o,u,c,d,p,v){if(null==p)s.removeAttribute(o,d,u);else{const I=null==v?ye(p):v(p,c||"",d);s.setAttribute(o,d,I,u)}}(o[11],v,p,s.value,u,c,d)}function WI(s,o,u,c,d,p){const v=p[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const A=v[C++],N=v[C++],F=v[C++];null!==I?c.setInput(u,F,A,N):u[N]=F}}}function mS(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Uv(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function yS(s,o){const u=qt(o,s);if(ao(u)){const c=u[1];48&u[2]?Li(c,u,c.template,u[8]):u[5]>0&&jv(u)}}function jv(s){for(let c=nI(s);null!==c;c=bo(c))for(let d=10;d<c.length;d++){const p=c[d];if(ao(p))if(512&p[2]){const v=p[1];Li(v,p,v.template,p[8])}else p[5]>0&&jv(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=qt(u[c],s);ao(d)&&d[5]>0&&jv(d)}}function _S(s,o){const u=qt(o,s),c=u[1];(function vS(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),bp(c,u,u[8])}function Fc(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Ym(s){for(;s;){s[2]|=32;const o=cp(s);if(Sf(s)&&!o)return s;s=o}return null}function Tp(s,o,u,c=!0){const d=o[10];d.begin&&d.begin();try{Li(s,o,s.template,u)}catch(v){throw c&&KI(o,v),v}finally{d.end&&d.end()}}function wh(s,o,u){Ma(0),o(s,u)}function Eh(s){return s[7]||(s[7]=[])}function $v(s){return s.cleanup||(s.cleanup=[])}function KI(s,o){const u=s[9],c=u?u.get(Qd,null):null;c&&c.handleError(o)}function Gv(s,o,u,c,d){for(let p=0;p<u.length;){const v=u[p++],I=u[p++],C=o[v],A=s.data[v];null!==A.setInput?A.setInput(C,d,c,I):C[I]=d}}function Qm(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=fe(d,I):2==p&&(c=fe(c,I+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function Lc(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Mn(p)),jr(p))for(let I=10;I<p.length;I++){const C=p[I],A=C[1].firstChild;null!==A&&Lc(C[1],C,A,c)}const v=u.type;if(8&v)Lc(s,o,u.child,c);else if(32&v){const I=lp(u,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=rh(o,u);if(Array.isArray(I))c.push(...I);else{const C=cp(o[16]);Lc(C[1],C,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class Sp{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Lc(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(jr(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(ru(o,c),Zo(u,c))}this._attachedToViewContainer=!1}ov(this._lView[1],this._lView)}onDestroy(o){_h(this._lView[1],this._lView,null,o)}markForCheck(){Ym(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Tp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function UT(s,o){pp(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class ES extends Sp{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Tp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Wv extends ml{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=J(o);return new Ap(u,this.ngModule)}}function ZI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class CS{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const d=this.injector.get(o,yt,c);return d!==yt||u===yt?d:this.parentInjector.get(o,u,c)}}class Ap extends Kd{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Nc(s){return s.map(zT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return ZI(this.componentDef.inputs)}get outputs(){return ZI(this.componentDef.outputs)}create(o,u,c,d){let p=(d=d||this.ngModule)instanceof oi?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new CS(o,p):o,I=v.get(x,null);if(null===I)throw new Ie(407,!1);const C=v.get(ce,null),A=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",F=c?function yh(s,o,u){return s.selectRootElement(o,u===ot.ShadowDom)}(A,c,this.componentDef.encapsulation):iv(I.createRenderer(null,this.componentDef),N,function IS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),z=this.componentDef.onPush?288:272,te=mh(0,null,null,1,0,null,null,null,null,null),we=hh(null,te,null,z,null,null,I,A,C,v,null);let Fe,We;Bu(we);try{const it=function JI(s,o,u,c,d,p){const v=u[1];u[22]=s;const C=fh(v,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(Qm(C,A,!0),null!==s&&(Ho(d,s,A),null!==C.classes&&Nr(d,s,C.classes),null!==C.styles&&HT(d,s,C.styles)));const N=c.createRenderer(s,o),F=hh(u,kv(o),null,o.onPush?32:16,u[22],C,c,N,p||null,null,null);return v.firstCreatePass&&(Vs(go(C,u),v,o.type),HI(v,C),$I(C,u.length,1)),Fc(u,F),u[22]=F}(F,this.componentDef,we,I,A);if(F)if(c)Ho(A,F,["ng-version",Qe.full]);else{const{attrs:Et,classes:Me}=function qT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!qs(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Et&&Ho(A,F,Et),Me&&Me.length>0&&Nr(A,F,Me.join(" "))}if(We=oo(te,22),void 0!==u){const Et=We.projection=[];for(let Me=0;Me<this.ngContentSelectors.length;Me++){const At=u[Me];Et.push(null!=At?Array.from(At):null)}}Fe=function XI(s,o,u,c){const d=u[1],p=function lS(s,o,u){const c=Nn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),GI(s,c,o,ph(s,o,1,null),u),vh(s,c));const d=ds(o,s,c.directiveStart,c);zr(d,o);const p=Hr(c,o);return p&&zr(p,o),d}(d,u,o);if(s[8]=u[8]=p,null!==c)for(const I of c)I(p,o);if(o.contentQueries){const I=Nn();o.contentQueries(1,p,I.directiveStart)}const v=Nn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ei(v.index),cS(u[1],v,0,v.directiveStart,v.directiveEnd,o),kc(o,p)),p}(it,this.componentDef,we,[eC]),bp(te,we,null)}finally{lo()}return new QI(this.componentType,Fe,_(We,we),we,We)}}class QI extends class sp{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new ES(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;Gv(p[1],p,d,o,u),jI(p,this._tNode.index)}}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function eC(){const s=Nn();$u(Ae()[1],s)}function zv(s){let o=function tC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(xr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=qv(s.inputs),v.declaredInputs=qv(s.declaredInputs),v.outputs=qv(s.outputs);const I=d.hostBindings;I&&nC(s,I);const C=d.viewQuery,A=d.contentQueries;if(C&&TS(s,C),A&&SS(s,A),le(s.inputs,d.inputs),le(s.declaredInputs,d.declaredInputs),le(s.outputs,d.outputs),xr(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const I=p[v];I&&I.ngInherit&&I(s),I===zv&&(u=!1)}}o=Object.getPrototypeOf(o)}!function DS(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Na(d.hostAttrs,u=Na(u,d.hostAttrs))}}(c)}function qv(s){return s===Qr?{}:s===Tt?[]:s}function TS(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function SS(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function nC(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let Zv=null;function Vc(){if(!Zv){const s=an.Symbol;if(s&&s.iterator)Zv=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Zv=c)}}}return Zv}function xp(s){return!!Xm(s)&&(Array.isArray(s)||!(s instanceof Map)&&Vc()in s)}function Xm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function _i(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Qv(s,o,u,c){const d=Ae();return _i(d,uo(),o)&&($t(),na(In(),d,s,o,u,c)),Qv}function Ch(s,o,u,c){return _i(s,uo(),u)?o+ye(u)+c:Ot}function ny(s,o,u,c,d,p,v,I){const C=Ae(),A=$t(),N=s+22,F=A.firstCreatePass?function Th(s,o,u,c,d,p,v,I,C){const A=o.consts,N=fh(o,s,4,v||null,Oi(A,I));Fv(o,u,N,Oi(A,C)),$u(o,N);const F=N.tViews=mh(2,N,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),F.queries=o.queries.embeddedTView(N)),N}(N,A,C,o,u,c,d,p,v):A.data[N];gi(F,!1);const z=C[11].createComment("");nh(A,C,z,F),zr(z,C),Fc(C,C[N]=Uv(z,C,z,F)),ql(F)&&Ov(A,C,F),null!=v&&Pv(C,F,I)}function ry(s,o,u){const c=Ae();return _i(c,uo(),o)&&function vs(s,o,u,c,d,p,v,I){const C=Hr(o,u);let N,A=o.inputs;!I&&null!=A&&(N=A[c])?(Gv(s,u,N,c,d),Ia(o)&&jI(u,o.index)):3&o.type&&(c=function Dp(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,p.setProperty(C,c,d))}($t(),In(),c,s,o,c[11],u,!1),ry}function Rp(s,o,u,c,d){const v=d?"class":"style";Gv(s,u,o.inputs[v],v,c)}function iy(s,o,u,c){const d=Ae(),p=$t(),v=22+s,I=d[11],C=d[v]=iv(I,o,function Hu(){return St.lFrame.currentNamespace}()),A=p.firstCreatePass?function RS(s,o,u,c,d,p,v){const I=o.consts,A=fh(o,s,2,d,Oi(I,p));return Fv(o,u,A,Oi(I,v)),null!==A.attrs&&Qm(A,A.attrs,!1),null!==A.mergedAttrs&&Qm(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,p,d,0,o,u,c):p.data[v];gi(A,!0);const N=A.mergedAttrs;null!==N&&Ho(I,C,N);const F=A.classes;null!==F&&Nr(I,C,F);const z=A.styles;return null!==z&&HT(I,C,z),64!=(64&A.flags)&&nh(p,d,C,A),0===function Ou(){return St.lFrame.elementDepthCount}()&&zr(C,d),function Pu(){St.lFrame.elementDepthCount++}(),ql(A)&&(Ov(p,d,A),function gh(s,o,u){if(bu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}(p,A,d)),null!==c&&Pv(d,A),iy}function sy(){let s=Nn();Da()?function Ta(){St.lFrame.isParent=!1}():(s=s.parent,gi(s,!1));const o=s;!function Jl(){St.lFrame.elementDepthCount--}();const u=$t();return u.firstCreatePass&&($u(u,s),bu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function zu(s){return 0!=(16&s.flags)}(o)&&Rp(u,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Dd(s){return 0!=(32&s.flags)}(o)&&Rp(u,o,Ae(),o.stylesWithoutHost,!1),sy}function oy(s,o,u,c){return iy(s,o,u,c),sy(),oy}function ew(){return Ae()}function tw(s){return!!s&&"function"==typeof s.then}function cC(s){return!!s&&"function"==typeof s.subscribe}const nw=cC;function rw(s,o,u,c){const d=Ae(),p=$t(),v=Nn();return function hC(s,o,u,c,d,p,v,I){const C=ql(c),N=s.firstCreatePass&&$v(s),F=o[8],z=Eh(o);let te=!0;if(3&c.type||I){const We=Hr(c,o),it=I?I(We):We,Et=z.length,Me=I?hn=>I(Mn(hn[c.index])):c.index;let At=null;if(!I&&C&&(At=function kS(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===u&&d[p+1]===c){const I=o[7],C=d[p+2];return I.length>C?I[C]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,c.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=p,At.__ngLastListenerFn__=p,te=!1;else{p=iw(c,o,F,p,!1);const hn=u.listen(it,d,p);z.push(p,hn),N&&N.push(d,Me,Et,Et+1)}}else p=iw(c,o,F,p,!1);const we=c.outputs;let Fe;if(te&&null!==we&&(Fe=we[d])){const We=Fe.length;if(We)for(let it=0;it<We;it+=2){const Gn=o[Fe[it]][Fe[it+1]].subscribe(p),Ll=z.length;z.push(p,Gn),N&&N.push(d,c.index,Ll,-(Ll+1))}}}(p,d,d[11],v,s,o,0,c),rw}function fC(s,o,u,c){try{return!1!==u(c)}catch(d){return KI(s,d),!1}}function iw(s,o,u,c,d){return function p(v){if(v===Function)return c;Ym(2&s.flags?qt(s.index,o):o);let C=fC(o,0,c,v),A=p.__ngNextListenerFn__;for(;A;)C=fC(o,0,A,v)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function pC(s=1){return function co(s){return(St.lFrame.contextLView=function ju(s,o){for(;s>0;)o=o[15],s--;return o}(s,St.lFrame.contextLView))[8]}(s)}function P(s,o,u,c,d){const p=s[u+1],v=null===o;let I=c?ui(p):ou(p),C=!1;for(;0!==I&&(!1===C||v);){const N=s[I+1];US(s[I],o)&&(C=!0,s[I+1]=c?bv(N):Iv(N)),I=c?ui(N):ou(N)}C&&(s[u+1]=c?Iv(p):bv(p))}function US(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&fs(s,o)>=0}const Tn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function lt(s){return s.substring(Tn.key,Tn.keyEnd)}function Op(s,o){const u=Tn.textEnd;return u===o?-1:(o=Tn.keyEnd=function BS(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Tn.key=o,u),Cl(s,o,u))}function Cl(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function uw(s,o){return function An(s,o,u,c){const d=Ae(),p=$t(),v=cs(2);p.firstUpdatePass&&cw(p,s,v,c),o!==Ot&&_i(d,v,o)&&mw(p,p.data[rr()],d,d[11],s,d[v+1]=function dy(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(ys(s)))),s}(o,u),c,v)}(s,o,null,!0),uw}function So(s,o){for(let u=function Pt(s){return function yC(s){Tn.key=0,Tn.keyEnd=0,Tn.value=0,Tn.valueEnd=0,Tn.textEnd=s.length}(s),Op(s,Cl(s,0,Tn.textEnd))}(o);u>=0;u=Op(o,u))$r(s,lt(o),!0)}function kp(s,o){return o>=s.expandoStartIndex}function cw(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[rr()],v=kp(s,u);hy(p,c)&&null===o&&!v&&(o=!1),o=function dw(s,o,u,c){const d=function xa(s){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Fp(u=fw(null,s,o,u,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=fw(d,s,o,u,c),null===p){let C=function cy(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ou(c))return s[ui(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=fw(null,s,o,C[1],c),C=Fp(C,o.attrs,c),function oa(s,o,u,c){s[ui(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function hw(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Fp(c,s[p].hostAttrs,u);return Fp(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function du(s,o,u,c,d,p){let v=p?o.classBindings:o.styleBindings,I=ui(v),C=ou(v);s[c]=u;let N,A=!1;if(Array.isArray(u)){const F=u;N=F[1],(null===N||fs(F,N)>0)&&(A=!0)}else N=u;if(d)if(0!==C){const z=ui(s[I+1]);s[c+1]=lh(z,I),0!==z&&(s[z+1]=Cv(s[z+1],c)),s[I+1]=function xI(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=lh(I,0),0!==I&&(s[I+1]=Cv(s[I+1],c)),I=c;else s[c+1]=lh(C,0),0===I?I=c:s[C+1]=Cv(s[C+1],c),C=c;A&&(s[c+1]=Iv(s[c+1])),P(s,N,c,!0),P(s,N,c,!1),function To(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&fs(p,o)>=0&&(u[c+1]=bv(u[c+1]))}(o,N,s,c,p),v=lh(I,C),p?o.classBindings=v:o.styleBindings=v}(d,p,o,u,v,c)}}function fw(s,o,u,c,d){let p=null;const v=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<v&&(p=o[I],c=Fp(c,p.hostAttrs,d),p!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function Fp(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),$r(s,v,!!u||o[++p]))}return void 0===s?null:s}function mw(s,o,u,c,d,p,v,I){if(!(3&o.type))return;const C=s.data,A=C[I+1];Lp(function MI(s){return 1==(1&s)}(A)?wC(C,o,u,d,ou(A),v):void 0)||(Lp(p)||function Ep(s){return 2==(2&s)}(A)&&(p=wC(C,null,u,d,I,v)),function dI(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:Co.DashCase;null==d?s.removeStyle(u,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Co.Important),s.setStyle(u,c,d,p))}}(c,v,pi(rr(),u),d,p))}function wC(s,o,u,c,d,p){const v=null===o;let I;for(;d>0;){const C=s[d],A=Array.isArray(C),N=A?C[1]:C,F=null===N;let z=u[d+1];z===Ot&&(z=F?Tt:void 0);let te=F?ja(z,c):N===c?z:void 0;if(A&&!Lp(te)&&(te=ja(C,c)),Lp(te)&&(I=te,v))return I;const we=s[d+1];d=v?ui(we):ou(we)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(I=ja(C,c))}return I}function Lp(s){return void 0!==s}function hy(s,o){return 0!=(s.flags&(o?16:32))}function fy(s,o=""){const u=Ae(),c=$t(),d=s+22,p=c.firstCreatePass?fh(c,d,1,o,null):c.data[d],v=u[d]=function vl(s,o){return s.createText(o)}(u[11],o);nh(c,u,v,p),gi(p,!1)}function Vp(s){return yw("",s,""),Vp}function yw(s,o,u){const c=Ae(),d=Ch(c,s,o,u);return d!==Ot&&function lu(s,o,u){const c=pi(o,s);!function rI(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,rr(),d),yw}function DC(s,o,u){!function Ao(s,o,u,c){const d=$t(),p=cs(2);d.firstUpdatePass&&cw(d,null,p,c);const v=Ae();if(u!==Ot&&_i(v,p,u)){const I=d.data[rr()];if(hy(I,c)&&!kp(d,p)){let C=c?I.classesWithoutHost:I.stylesWithoutHost;null!==C&&(u=fe(C,u||"")),Rp(d,I,v,u,c)}else!function gw(s,o,u,c,d,p,v,I){d===Ot&&(d=Tt);let C=0,A=0,N=0<d.length?d[0]:null,F=0<p.length?p[0]:null;for(;null!==N||null!==F;){const z=C<d.length?d[C+1]:void 0,te=A<p.length?p[A+1]:void 0;let Fe,we=null;N===F?(C+=2,A+=2,z!==te&&(we=F,Fe=te)):null===F||null!==N&&N<F?(C+=2,we=N):(A+=2,we=F,Fe=te),null!==we&&mw(s,o,u,c,we,Fe,v,I),N=C<d.length?d[C]:null,F=A<p.length?p[A]:null}}(d,I,v,v[11],v[p+1],v[p+1]=function xh(s,o,u){if(null==u||""===u)return Tt;const c=[],d=ys(u);if(Array.isArray(d))for(let p=0;p<d.length;p++)s(c,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&s(c,p,d[p]);else"string"==typeof d&&o(c,d);return c}(s,o,u),c,p)}}($r,So,Ch(Ae(),s,o,u),!0)}const jc=void 0;var LC=["en",[["a","p"],["AM","PM"],jc],[["AM","PM"],jc,jc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jc,"{1} 'at' {0}",jc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $S(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let bl={};function Bp(s){const o=function BC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=jp(o);if(u)return u;const c=o.split("-")[0];if(u=jp(c),u)return u;if("en"===c)return LC;throw new Ie(701,!1)}function VC(s){return Bp(s)[wt.PluralCase]}function jp(s){return s in bl||(bl[s]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[s]),bl[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Hc="en-US";let Gc=Hc;function Kc(s,o,u,c,d){if(s=Y(s),Array.isArray(s))for(let p=0;p<s.length;p++)Kc(s[p],o,u,c,d);else{const p=$t(),v=Ae();let I=Ws(s)?s:Y(s.provide),C=rp(s);const A=Nn(),N=1048575&A.providerIndexes,F=A.directiveStart,z=A.providerIndexes>>20;if(Ws(s)||!s.multi){const te=new Ls(C,d,Oc),we=$n(I,o,d?N:N+z,F);-1===we?(Vs(go(A,v),p,I),Zc(p,s,o.length),o.push(I),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(te),v.push(te)):(u[we]=te,v[we]=te)}else{const te=$n(I,o,N+z,F),we=$n(I,o,N,N+z),Fe=te>=0&&u[te],We=we>=0&&u[we];if(d&&!We||!d&&!Fe){Vs(go(A,v),p,I);const it=function rA(s,o,u,c,d){const p=new Ls(s,u,Oc);return p.multi=[],p.index=o,p.componentProviders=0,ub(p,d,c&&!u),p}(d?nA:lb,u.length,d,c,C);!d&&We&&(u[we].providerFactory=it),Zc(p,s,o.length,0),o.push(I),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(it),v.push(it)}else Zc(p,s,te>-1?te:we,ub(u[d?we:te],C,!d&&c));!d&&c&&We&&u[we].componentProviders++}}}function Zc(s,o,u,c){const d=Ws(o),p=function z_(s){return!!s.useClass}(o);if(d||p){const C=(p?Y(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=A.indexOf(u);-1===N?A.push(u,[c,C]):A[N+1].push(c,C)}else A.push(u,C)}}}function ub(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function $n(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function lb(s,o,u,c){return Gw(this.multi,[])}function nA(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=ds(u,u[1],this.providerFactory.index,c);p=I.slice(0,v),Gw(d,p);for(let C=v;C<I.length;C++)p.push(I[C])}else p=[],Gw(d,p);return p}function Gw(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Ww(s,o=[]){return u=>{u.providersResolver=(c,d)=>function ab(s,o,u){const c=$t();if(c.firstCreatePass){const d=xr(s);Kc(u,c.data,c.blueprint,d,!0),Kc(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Yc{}class zw{}function Ay(s,o){return new ua(s,o??null)}class ua extends Yc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wv(this);const c=fn(o);this._bootstrapComponents=_l(c.bootstrap),this._r3Injector=wI(o,u,[{provide:Yc,useValue:this},{provide:ml,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class xy extends zw{constructor(o){super(),this.moduleType=o}create(o){return new ua(this.moduleType,o)}}class cb extends Yc{constructor(o,u,c){super(),this.componentFactoryResolver=new Wv(this),this.instance=null;const d=new tp([...o,{provide:Yc,useValue:this},{provide:ml,useValue:this.componentFactoryResolver}],u||Wd(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Jp(s,o,u=null){return new cb(s,o,u).injector}let Xp=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Hd(0,u.type),d=c.length>0?Jp([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=en({token:s,providedIn:"environment",factory:()=>new s(Pn(oi))}),s})();function qw(s){s.getStandaloneInjector=o=>o.get(Xp).getOrCreateStandaloneInjector(s)}function nt(s){return o=>{setTimeout(s,void 0,o)}}const ht=class Xw extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,p=u||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),p=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(p=nt(p),d&&(d=nt(d)),v&&(v=nt(v)));const I=super.subscribe({next:d,error:p,complete:v});return o instanceof ee.w0&&o.add(I),I}};function lA(){return this._results[Vc()]()}class ze{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Vc(),c=ze.prototype;c[u]||(c[u]=lA)}get changes(){return this._changes||(this._changes=new ht)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=ni(o);(this._changesDetected=!function tl(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ue=(()=>{class s{}return s.__NG_ELEMENT_ID__=Sb,s})();const Re=ue,Or=class extends Re{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=hh(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),bp(c,d,o),new Sp(d)}};function Sb(){return Oy(Nn(),Ae())}function Oy(s,o){return 4&s.type?new Or(o,s,_(s,o)):null}let Py=(()=>{class s{}return s.__NG_ELEMENT_ID__=cA,s})();function cA(){return hA(Nn(),Ae())}const dA=Py,Ab=class extends dA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return _(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Yu(this._hostTNode,this._hostLView);if(Sd(o)){const u=Oa(o,this._hostLView),c=gr(o);return new yo(u[1].data[c+8],u)}return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=e0(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const v=o.createEmbeddedView(u||{},p);return this.insert(v,d),v}createComponent(o,u,c,d,p){const v=o&&!function br(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const F=u||{};I=F.index,c=F.injector,d=F.projectableNodes,p=F.environmentInjector||F.ngModuleRef}const C=v?o:new Ap(J(o)),A=c||this.parentInjector;if(!p&&null==C.ngModule){const z=(v?A:this.parentInjector).get(oi,null);z&&(p=z)}const N=C.create(A,d,void 0,p);return this.insert(N.hostView,I),N}insert(o,u){const c=o._lView,d=c[1];if(function Mu(s){return jr(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const F=c[3],z=new Ab(F,F[6],F[3]);z.detach(z.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function oI(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],mc(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function BT(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,c,v,p);const I=cv(p,v),C=c[11],A=Do(C,v[7]);return null!==A&&function dp(s,o,u,c,d,p){c[0]=d,c[6]=o,pp(s,c,u,1,d,p)}(d,v[6],C,c,A,I),o.attachToViewContainerRef(),mc(t0(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=e0(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=ru(this._lContainer,u);c&&(Zo(t0(this._lContainer),u),ov(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=ru(this._lContainer,u);return c&&null!=Zo(t0(this._lContainer),u)?new Sp(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function e0(s){return s[8]}function t0(s){return s[8]||(s[8]=[])}function hA(s,o){let u;const c=o[s.index];if(jr(c))u=c;else{let d;if(8&s.type)d=Mn(c);else{const p=o[11];d=p.createComment("");const v=Hr(s,o);Xo(p,Do(p,v),d,function jT(s,o){return s.nextSibling(o)}(p,v),!1)}o[s.index]=u=Uv(c,o,d,s),Fc(o,u)}return new Ab(u,s,o)}class Al{constructor(o){this.queryList=o,this.matches=null}clone(){return new Al(this.queryList)}setDirty(){this.queryList.setDirty()}}class ky{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const v=u.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new ky(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Fy(o,u).matches&&this.queries[u].setDirty()}}class Ln{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class bt{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new bt(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Qc{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Qc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,sn(u,p)),this.matchTNodeWithReadOption(o,u,$o(u,o,p,!1,!1))}else c===ue?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,$o(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===f||d===Py||d===ue&&4&u.type)this.addMatch(u.index,-2);else{const p=$o(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function sn(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function ur(s,o,u,c){return-1===u?function pA(s,o){return 11&s.type?_(s,o):4&s.type?Oy(s,o):null}(o,s):-2===u?function qe(s,o,u){return u===f?_(o,s):u===ue?Oy(o,s):u===Py?hA(o,s):void 0}(s,o,c):ds(s,s[1],u,o)}function ag(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,v=u.matches,I=[];for(let C=0;C<v.length;C+=2){const A=v[C];I.push(A<0?null:ur(o,p[A],v[C+1],u.metadata.read))}d.matches=I}return d.matches}function ug(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const v=ag(s,o,d,u);for(let I=0;I<p.length;I+=2){const C=p[I];if(C>0)c.push(v[I/2]);else{const A=p[I+1],N=o[-C];for(let F=10;F<N.length;F++){const z=N[F];z[17]===z[3]&&ug(z[1],z,A,c)}if(null!==N[9]){const F=N[9];for(let z=0;z<F.length;z++){const te=F[z];ug(te[1],te,A,c)}}}}}return c}function xl(s){const o=Ae(),u=$t(),c=ic();Ma(c+1);const d=Fy(u,c);if(s.dirty&&function xu(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?ug(u,o,c,[]):ag(u,o,d,c);s.reset(p,g),s.notifyOnChanges()}return!0}return!1}function lg(s,o,u,c){const d=$t();if(d.firstCreatePass){const p=Nn();(function r0(s,o,u){null===s.queries&&(s.queries=new bt),s.queries.track(new Qc(o,u))})(d,new Ln(o,u,c),p.index),function Es(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function n0(s,o,u){const c=new ze(4==(4&u));_h(s,o,c,c.destroy),null===o[19]&&(o[19]=new ky),o[19].queries.push(new Al(c))}(d,Ae(),u)}function Mb(){return function cg(s,o){return s[19].queries[o].queryList}(Ae(),ic())}function Fy(s,o){return s.queries.getByIndex(o)}function fg(...s){}const p0=new mn("Application Initializer");let vn=(()=>{class s{constructor(u){this.appInits=u,this.resolve=fg,this.reject=fg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(tw(p))u.push(p);else if(nw(p)){const v=new Promise((I,C)=>{p.subscribe({complete:I,error:C})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Pn(p0,8))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Vb=new mn("AppId",{providedIn:"root",factory:function g0(){return`${m0()}${m0()}${m0()}`}});function m0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Zh=new mn("Platform Initializer"),jy=new mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pg=new mn("appBootstrapListener");let li=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Hy=new mn("LocaleId",{providedIn:"root",factory:()=>b(Hy,Ze.Optional|Ze.SkipSelf)||function TA(){return typeof $localize<"u"&&$localize.locale||Hc}()}),SA=new mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class xA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let MA=(()=>{class s{compileModuleSync(u){return new xy(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=_l(fn(u).declarations).reduce((v,I)=>{const C=J(I);return C&&v.push(new Ap(C)),v},[]);return new xA(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Yh=(()=>Promise.resolve(0))();function $y(s){typeof Zone>"u"?Yh.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Xi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ht(!1),this.onMicrotaskEmpty=new ht(!1),this.onStable=new ht(!1),this.onError=new ht(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function v0(){let s=an.requestAnimationFrame,o=an.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Gy(s){const o=()=>{!function Ui(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(an,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,nd(s),s.isCheckStableRunning=!0,kl(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),nd(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,v,I)=>{try{return E0(s),u.invokeTask(d,p,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Wy(s)}},onInvoke:(u,c,d,p,v,I,C)=>{try{return E0(s),u.invoke(d,p,v,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Wy(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,nd(s),kl(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xi.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Xi.isInAngularZone())throw new Ie(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,w0,fg,fg);try{return p.runTask(v,u,c)}finally{p.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const w0={};function kl(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function nd(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function E0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Wy(s){s._nesting--,kl(s)}class I0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ht,this.onMicrotaskEmpty=new ht,this.onStable=new ht,this.onError=new ht}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const C0=new mn(""),b0=new mn("");let zy,RA=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zy||(function Ub(s){zy=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xi.assertNotInAngularZone(),$y(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$y(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Pn(Xi),Pn(D0),Pn(b0))},s.\u0275prov=en({token:s,factory:s.\u0275fac}),s})(),D0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return zy?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Mo=null;const Bb=new mn("AllowMultipleToken"),T0=new mn("PlatformDestroyListeners");class rd{constructor(o,u){this.name=o,this.token=u}}function ef(s,o,u=[]){const c=`Platform: ${o}`,d=new mn(c);return(p=[])=>{let v=tf();if(!v||v.injector.get(Bb,!1)){const I=[...u,...p,{provide:d,useValue:!0}];s?s(I):function Hb(s){if(Mo&&!Mo.get(Bb,!1))throw new Ie(400,!1);Mo=s;const o=s.get(mg);(function S0(s){const o=s.get(Zh,null);o&&o.forEach(u=>u())})(s)}(function $b(s=[],o){return Rc.create({name:o,providers:[{provide:Ja,useValue:"platform"},{provide:T0,useValue:new Set([()=>Mo=null])},...s]})}(I,c))}return function PA(s){const o=tf();if(!o)throw new Ie(401,!1);return o}()}}function tf(){return Mo?.get(mg)??null}let mg=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function Gb(s,o){let u;return u="noop"===s?new I0:("zone.js"===s?void 0:s)||new Xi(o),u}(c?.ngZone,function A0(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Xi,useValue:d}];return d.run(()=>{const v=Rc.create({providers:p,parent:this.injector,name:u.moduleType.name}),I=u.create(v),C=I.injector.get(Qd,null);if(!C)throw new Ie(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:N=>{C.handleError(N)}});I.onDestroy(()=>{_u(this._modules,I),A.unsubscribe()})}),function nf(s,o,u){try{const c=u();return tw(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const A=I.injector.get(vn);return A.runInitializers(),A.donePromise.then(()=>(function HC(s){Bt(s,"Expected localeId to be defined"),"string"==typeof s&&(Gc=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Hy,Hc)||Hc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const d=Wb({},c);return function Qh(s,o,u){const c=new xy(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(yg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Ie(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(T0,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Pn(Rc))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Wb(s,o){return Array.isArray(o)?o.reduce(Wb,s):{...s,...o}}let yg=(()=>{class s{constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new k.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Xi.assertNotInAngularZone(),$y(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Xi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(p,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof Kd;if(!this._injector.get(vn).done)throw!d&&Qt(u),new Ie(405,false);let v;v=d?u:this._injector.get(ml).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function jb(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Yc),A=v.create(Rc.NULL,[],c||v.selector,I),N=A.location.nativeElement,F=A.injector.get(C0,null);return F?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),_u(this.components,A),F?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;_u(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(pg,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>_u(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ie(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Pn(Xi),Pn(oi),Pn(Qd))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function _u(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let x0=!0,M0=!1;function rf(){return M0=!0,x0}function N0(){if(M0)throw new Error("Cannot enable prod mode after platform setup.");x0=!1}let qb=(()=>{class s{}return s.__NG_ELEMENT_ID__=Kb,s})();function Kb(s){return function Fl(s,o,u){if(Ia(s)&&!u){const c=qt(s.index,o);return new Sp(c,c)}return 47&s.type?new Sp(o[16],o):null}(Nn(),Ae(),16==(16&s))}class Qb{constructor(){}supports(o){return xp(o)}create(o){return new HA(o)}}const jA=(s,o)=>o;class HA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||jA}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const v=!c||u&&u.currentIndex<kr(c,d,p)?u:c,I=kr(v,d,p),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{p||(p=[]);const A=I-d,N=C-d;if(A!=N){for(let z=0;z<A;z++){const te=z<p.length?p[z]:p[z]=0,we=te+z;N<=we&&we<A&&(p[z]=te+1)}p[v.previousIndex]=N-A}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!xp(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,p,v,I)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,I),c=!0),u=u._next}else d=0,function Jm(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Vc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new Ig(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Xb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Ig{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Xb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Jb,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kr(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Zy{constructor(){}supports(o){return o instanceof Map||Xm(o)}create(){return new eD}}class eD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Xm(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new Cg(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Cg{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function No(){return new bg([new Qb])}let bg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||No()),deps:[[s,new vt,new je]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Ie(901,!1)}}return s.\u0275prov=en({token:s,providedIn:"root",factory:No}),s})();function uf(){return new Yy([new Zy])}let Yy=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||uf()),deps:[[s,new vt,new je]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Ie(901,!1)}}return s.\u0275prov=en({token:s,providedIn:"root",factory:uf}),s})();const Dg=ef(null,"core",[]);let R0=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Pn(yg))},s.\u0275mod=kt({type:s}),s.\u0275inj=Rt({}),s})();function GA(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ut,Te,L)=>{L.d(Te,{Z:()=>Ie});var m=L(2090),ee=L(4859),k=L(9681),se=L(1877);class re{constructor(ye,pe){this._delegate=ye,this.firebase=pe,(0,k._addComponent)(ye,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ye,pe=k._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(ye);return!st.isInitialized()&&"EXPLICIT"===(null===(Je=st.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&st.initialize(),st.getImmediate({identifier:pe})}_removeServiceInstance(ye,pe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(pe)}_addComponent(ye){(0,k._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,k._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function fe(){const tt=function he(tt){const ye={},pe={__esModule:!0,initializeApp:function xe(He,j={}){const me=k.initializeApp(He,j);if((0,m.r3)(ye,me.name))return ye[me.name];const K=new tt(me,pe);return ye[me.name]=K,K},app:st,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(He){const j=He.name,me=j.replace("-compat","");if(k._registerComponent(He)&&"PUBLIC"===He.type){const K=(X=st())=>{if("function"!=typeof X[me])throw le.create("invalid-app-argument",{appName:j});return X[me]()};void 0!==He.serviceProps&&(0,m.ZB)(K,He.serviceProps),pe[me]=K,tt.prototype[me]=function(...X){return this._getService.bind(this,j).apply(this,He.multipleInstances?X:[])}}return"PUBLIC"===He.type?pe[me]:null},removeApp:function Je(He){delete ye[He]},useAsService:function Be(He,j){return"serverAuth"===j?null:j},modularAPIs:k}};function st(He){if(!(0,m.r3)(ye,He=He||k._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:He});return ye[He]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function ve(){return Object.keys(ye).map(He=>ye[He])}}),st.App=tt,pe}(re);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function ye(pe){(0,m.ZB)(tt,pe)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),tt}(),G=new se.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=$;!function Ne(tt){(0,k.registerVersion)("@firebase/app-compat","0.1.37",tt)}()},9681:(ut,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>As,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>en,_apps:()=>un,_clearComponents:()=>ns,_components:()=>wn,_getProvider:()=>Rt,_registerComponent:()=>Lr,_removeServiceInstance:()=>ln,deleteApp:()=>Po,getApp:()=>Yr,getApps:()=>di,initializeApp:()=>Mi,onLog:()=>xs,registerVersion:()=>Ar,setLogLevel:()=>Xn});var m=L(5861),ee=L(4859),k=L(1877),se=L(2090),re=L(8766);class de{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function le(et){return"VERSION"===et.getComponent()?.type}(Xe)){const Ct=Xe.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(Xe=>Xe).join(" ")}}const he="@firebase/app",$=new k.Yd("@firebase/app"),Bt="[DEFAULT]",Ke={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,wn=new Map;function Yt(et,Se){try{et.container.addComponent(Se)}catch(Xe){$.debug(`Component ${Se.name} failed to register with FirebaseApp ${et.name}`,Xe)}}function en(et,Se){et.container.addOrOverwriteComponent(Se)}function Lr(et){const Se=et.name;if(wn.has(Se))return $.debug(`There were multiple attempts to register component ${Se}.`),!1;wn.set(Se,et);for(const Xe of un.values())Yt(Xe,et);return!0}function Rt(et,Se){const Xe=et.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),et.container.getProvider(Se)}function ln(et,Se,Xe=Bt){Rt(et,Se).clearInstance(Xe)}function ns(){wn.clear()}const Vr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(Se,Xe,Ct){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}const As="9.12.1";function Mi(et,Se={}){let Xe=et;"object"!=typeof Se&&(Se={name:Se});const Ct=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},Se),It=Ct.name;if("string"!=typeof It||!It)throw Vr.create("bad-app-name",{appName:String(It)});if(Xe||(Xe=(0,se.aH)()),!Xe)throw Vr.create("no-options");const kt=un.get(It);if(kt){if((0,se.vZ)(Xe,kt.options)&&(0,se.vZ)(Ct,kt.config))return kt;throw Vr.create("duplicate-app",{appName:It})}const W=new ee.H0(It);for(const Z of wn.values())W.addComponent(Z);const B=new Ur(Xe,Ct,W);return un.set(It,B),B}function Yr(et=Bt){const Se=un.get(et);if(!Se&&et===Bt)return Mi();if(!Se)throw Vr.create("no-app",{appName:et});return Se}function di(){return Array.from(un.values())}function Po(et){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,m.Z)(function*(et){const Se=et.name;un.has(Se)&&(un.delete(Se),yield Promise.all(et.container.getProviders().map(Xe=>Xe.delete())),et.isDeleted=!0)})).apply(this,arguments)}function Ar(et,Se,Xe){var Ct;let It=null!==(Ct=Ke[et])&&void 0!==Ct?Ct:et;Xe&&(It+=`-${Xe}`);const kt=It.match(/\s|\//),W=Se.match(/\s|\//);if(kt||W){const B=[`Unable to register library "${It}" with version "${Se}":`];return kt&&B.push(`library name "${It}" contains illegal characters (whitespace or "/")`),kt&&W&&B.push("and"),W&&B.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void $.warn(B.join(" "))}Lr(new ee.wA(`${It}-version`,()=>({library:It,version:Se}),"VERSION"))}function xs(et,Se){if(null!==et&&"function"!=typeof et)throw Vr.create("invalid-log-argument");(0,k.Am)(et,Se)}function Xn(et){(0,k.Ub)(et)}const xn="firebase-heartbeat-store";let qn=null;function gn(){return qn||(qn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(et,Se)=>{0===Se&&et.createObjectStore(xn)}}).catch(et=>{throw Vr.create("idb-open",{originalErrorMessage:et.message})})),qn}function ot(){return(ot=(0,m.Z)(function*(et){var Se;try{return(yield gn()).transaction(xn).objectStore(xn).get(Bn(et))}catch(Xe){if(Xe instanceof se.ZR)$.warn(Xe.message);else{const Ct=Vr.create("idb-get",{originalErrorMessage:null===(Se=Xe)||void 0===Se?void 0:Se.message});$.warn(Ct.message)}}})).apply(this,arguments)}function an(et,Se){return dr.apply(this,arguments)}function dr(){return(dr=(0,m.Z)(function*(et,Se){var Xe;try{const It=(yield gn()).transaction(xn,"readwrite");return yield It.objectStore(xn).put(Se,Bn(et)),It.done}catch(Ct){if(Ct instanceof se.ZR)$.warn(Ct.message);else{const It=Vr.create("idb-set",{originalErrorMessage:null===(Xe=Ct)||void 0===Xe?void 0:Xe.message});$.warn(It.message)}}})).apply(this,arguments)}function Bn(et){return`${et.name}!${et.options.appId}`}class rs{constructor(Se){this.container=Se,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new rn(Xe),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Se=this;return(0,m.Z)(function*(){const Ct=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=tn();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==It&&!Se._heartbeatsCache.heartbeats.some(kt=>kt.date===It))return Se._heartbeatsCache.heartbeats.push({date:It,agent:Ct}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(kt=>{const W=new Date(kt.date).valueOf();return Date.now()-W<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,m.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const Xe=tn(),{heartbeatsToSend:Ct,unsentEntries:It}=function Ni(et,Se=1024){const Xe=[];let Ct=et.slice();for(const It of et){const kt=Xe.find(W=>W.agent===It.agent);if(kt){if(kt.dates.push(It.date),er(Xe)>Se){kt.dates.pop();break}}else if(Xe.push({agent:It.agent,dates:[It.date]}),er(Xe)>Se){Xe.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:Ct}}(Se._heartbeatsCache.heartbeats),kt=(0,se.L)(JSON.stringify({version:2,heartbeats:Ct}));return Se._heartbeatsCache.lastSentHeartbeatDate=Xe,It.length>0?(Se._heartbeatsCache.heartbeats=It,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),kt})()}}function tn(){return(new Date).toISOString().substring(0,10)}class rn{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,m.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function mt(et){return ot.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var Xe=this;return(0,m.Z)(function*(){var Ct;if(yield Xe._canUseIndexedDBPromise){const kt=yield Xe.read();return an(Xe.app,{lastSentHeartbeatDate:null!==(Ct=Se.lastSentHeartbeatDate)&&void 0!==Ct?Ct:kt.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var Xe=this;return(0,m.Z)(function*(){var Ct;if(yield Xe._canUseIndexedDBPromise){const kt=yield Xe.read();return an(Xe.app,{lastSentHeartbeatDate:null!==(Ct=Se.lastSentHeartbeatDate)&&void 0!==Ct?Ct:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...Se.heartbeats]})}})()}}function er(et){return(0,se.L)(JSON.stringify({version:2,heartbeats:et})).length}!function Br(et){Lr(new ee.wA("platform-logger",Se=>new de(Se),"PRIVATE")),Lr(new ee.wA("heartbeat",Se=>new rs(Se),"PRIVATE")),Ar(he,"0.8.2",et),Ar(he,"0.8.2","esm2017"),Ar("fire-js","")}("")},4859:(ut,Te,L)=>{L.d(Te,{H0:()=>he,wA:()=>k,zt:()=>re});var m=L(5861),ee=L(2090);class k{constructor($,G,Y){this.name=$,this.instanceFactory=G,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const se="[DEFAULT]";class re{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const Y=new ee.BH;if(this.instancesDeferred.set(G,Y),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:G});Ve&&Y.resolve(Ve)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const Y=this.normalizeInstanceIdentifier($?.identifier),Ve=null!==(G=$?.optional)&&void 0!==G&&G;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Ne){if(Ve)return null;throw Ne}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function le(fe){return"EAGER"===fe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[G,Y]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(G);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ve});Y.resolve(Ne)}catch{}}}}clearInstance($=se){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,m.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...G.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=se){return this.instances.has($)}getOptions($=se){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,Y=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:Y,options:G});for(const[Ne,Ie]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Ne)&&Ie.resolve(Ve);return Ve}onInit($,G){var Y;const Ve=this.normalizeInstanceIdentifier(G),Ne=null!==(Y=this.onInitCallbacks.get(Ve))&&void 0!==Y?Y:new Set;Ne.add($),this.onInitCallbacks.set(Ve,Ne);const Ie=this.instances.get(Ve);return Ie&&$(Ie,Ve),()=>{Ne.delete($)}}invokeOnInitCallbacks($,G){const Y=this.onInitCallbacks.get(G);if(Y)for(const Ve of Y)try{Ve($,G)}catch{}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let Y=this.instances.get($);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=$,fe===se?void 0:fe),options:G}),this.instances.set($,Y),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(Y,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Y)}catch{}var fe;return Y||null}normalizeInstanceIdentifier($=se){return this.component?this.component.multipleInstances?$:se:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new re($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Te,L)=>{L.d(Te,{Am:()=>fe,Ub:()=>he,Yd:()=>le,in:()=>ee});const m=[];var ee=(()=>{return($=ee||(ee={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",ee;var $})();const k={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},se=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=($,G,...Y)=>{if(G<$.logLevel)return;const Ve=(new Date).toISOString(),Ne=re[G];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ne](`[${Ve}]  ${$.name}:`,...Y)};class le{constructor(G){this.name=G,this._logLevel=se,this._logHandler=de,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ee))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?k[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...G),this._logHandler(this,ee.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...G),this._logHandler(this,ee.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...G),this._logHandler(this,ee.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...G),this._logHandler(this,ee.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...G),this._logHandler(this,ee.ERROR,...G)}}function he($){m.forEach(G=>{G.setLogLevel($)})}function fe($,G){for(const Y of m){let Ve=null;G&&G.level&&(Ve=k[G.level]),Y.userLogHandler=null===$?null:(Ne,Ie,...tt)=>{const ye=tt.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Ie>=(Ve??Ne.logLevel)&&$({level:ee[Ie].toLowerCase(),message:ye,args:tt,type:Ne.name})}}}},8766:(ut,Te,L)=>{L.d(Te,{Lj:()=>xe,X3:()=>st});var m=L(5861);let k,se;const le=new WeakMap,he=new WeakMap,fe=new WeakMap,$=new WeakMap,G=new WeakMap;let Ne={get(j,me,K){if(j instanceof IDBTransaction){if("done"===me)return he.get(j);if("objectStoreNames"===me)return j.objectStoreNames||fe.get(j);if("store"===me)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return pe(j[me])},set:(j,me,K)=>(j[me]=K,!0),has:(j,me)=>j instanceof IDBTransaction&&("done"===me||"store"===me)||me in j};function ye(j){return"function"==typeof j?function tt(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...me){return j.apply(Je(this),me),pe(le.get(this))}:function(...me){return pe(j.apply(Je(this),me))}:function(me,...K){const X=j.call(Je(this),me,...K);return fe.set(X,me.sort?me.sort():[me]),pe(X)}}(j):(j instanceof IDBTransaction&&function Ve(j){if(he.has(j))return;const me=new Promise((K,X)=>{const ie=()=>{j.removeEventListener("complete",ne),j.removeEventListener("error",ke),j.removeEventListener("abort",ke)},ne=()=>{K(),ie()},ke=()=>{X(j.error||new DOMException("AbortError","AbortError")),ie()};j.addEventListener("complete",ne),j.addEventListener("error",ke),j.addEventListener("abort",ke)});he.set(j,me)}(j),((j,me)=>me.some(K=>j instanceof K))(j,function re(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Ne):j)}function pe(j){if(j instanceof IDBRequest)return function Y(j){const me=new Promise((K,X)=>{const ie=()=>{j.removeEventListener("success",ne),j.removeEventListener("error",ke)},ne=()=>{K(pe(j.result)),ie()},ke=()=>{X(j.error),ie()};j.addEventListener("success",ne),j.addEventListener("error",ke)});return me.then(K=>{K instanceof IDBCursor&&le.set(K,j)}).catch(()=>{}),G.set(me,j),me}(j);if($.has(j))return $.get(j);const me=ye(j);return me!==j&&($.set(j,me),G.set(me,j)),me}const Je=j=>G.get(j);function st(j,me,{blocked:K,upgrade:X,blocking:ie,terminated:ne}={}){const ke=indexedDB.open(j,me),Pe=pe(ke);return X&&ke.addEventListener("upgradeneeded",ft=>{X(pe(ke.result),ft.oldVersion,ft.newVersion,pe(ke.transaction))}),K&&ke.addEventListener("blocked",()=>K()),Pe.then(ft=>{ne&&ft.addEventListener("close",()=>ne()),ie&&ft.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Pe}function xe(j,{blocked:me}={}){const K=indexedDB.deleteDatabase(j);return me&&K.addEventListener("blocked",()=>me()),pe(K).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Be=new Map;function He(j,me){if(!(j instanceof IDBDatabase)||me in j||"string"!=typeof me)return;if(Be.get(me))return Be.get(me);const K=me.replace(/FromIndex$/,""),X=me!==K,ie=Ce.includes(K);if(!(K in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!ve.includes(K))return;const ne=function(){var ke=(0,m.Z)(function*(Pe,...ft){const Xt=this.transaction(Pe,ie?"readwrite":"readonly");let Bt=Xt.store;return X&&(Bt=Bt.index(ft.shift())),(yield Promise.all([Bt[K](...ft),ie&&Xt.done]))[0]});return function(ft){return ke.apply(this,arguments)}}();return Be.set(me,ne),ne}!function Ie(j){Ne=j(Ne)}(j=>({...j,get:(me,K,X)=>He(me,K)||j.get(me,K,X),has:(me,K)=>!!He(me,K)||j.has(me,K)}))},5861:(ut,Te,L)=>{function m(k,se,re,de,le,he,fe){try{var $=k[he](fe),G=$.value}catch(Y){return void re(Y)}$.done?se(G):Promise.resolve(G).then(de,le)}function ee(k){return function(){var se=this,re=arguments;return new Promise(function(de,le){var he=k.apply(se,re);function fe(G){m(he,de,le,fe,$,"next",G)}function $(G){m(he,de,le,fe,$,"throw",G)}fe(void 0)})}}L.d(Te,{Z:()=>ee})}},ut=>{ut(ut.s=8584)}]);